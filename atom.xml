<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Leejia Blog</title>
  
  <subtitle>君子之心，常怀敬畏.</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://www.leejia.me/"/>
  <updated>2018-10-11T12:36:18.693Z</updated>
  <id>https://www.leejia.me/</id>
  
  <author>
    <name>Leejia</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>linux查看日志文件内容命令tail、cat、tac、head、echo</title>
    <link href="https://www.leejia.me/python/linux_log_command.html"/>
    <id>https://www.leejia.me/python/linux_log_command.html</id>
    <published>2018-10-11T12:29:49.000Z</published>
    <updated>2018-10-11T12:36:18.693Z</updated>
    
    <content type="html"><![CDATA[<ul><li>linux查看日志文件内容命令tail、cat、tac、head、echo<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tail -f <span class="keyword">test</span>.<span class="built_in">log</span></span><br></pre></td></tr></table></figure></li></ul><p>你会看到屏幕不断有内容被打印出来. 这时候中断第一个进程Ctrl-C,</p><p>linux 如何显示一个文件的某几行(中间几行)</p><ul><li><p>从第3000行开始，显示1000行。即显示3000~3999行</p><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat filename | <span class="type">tail</span> -n +<span class="number">3000</span> | <span class="type">head</span> -n <span class="number">1000</span></span><br></pre></td></tr></table></figure></li><li><p>显示1000行到3000行</p><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat filename| <span class="type">head</span> -n <span class="number">3000</span> | <span class="type">tail</span> -n +<span class="number">1000</span></span><br></pre></td></tr></table></figure></li></ul><p>注意两种方法的顺序</p><ul><li><p>分解：</p><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tail -n <span class="number">1000</span>：显示最后<span class="number">1000</span>行</span><br><span class="line">tail -n +<span class="number">1000</span>：从<span class="number">1000</span>行开始显示，显示<span class="number">1000</span>行以后的</span><br><span class="line">head -n <span class="number">1000</span>：显示前面<span class="number">1000</span>行</span><br></pre></td></tr></table></figure></li><li><p>用sed命令</p><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -n '<span class="number">5</span>,<span class="number">10</span>p' filename 这样你就可以只查看文件的第<span class="number">5</span>行到第<span class="number">10</span>行。</span><br></pre></td></tr></table></figure></li></ul><p>例：cat mylog.log | tail -n 1000 #输出mylog.log 文件最后一千行</p><p>cat主要有三大功能：</p><ol><li>一次显示整个文件。$ cat filename</li><li>从键盘创建一个文件。$ cat &gt; filename<br>只能创建新文件,不能编辑已有文件.</li><li>将几个文件合并为一个文件：<figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> $cat file1 file2 &gt; file</span><br><span class="line"></span><br><span class="line">参数：</span><br><span class="line">-<span class="ruby">n 或 --number 由 <span class="number">1</span> 开始对所有输出的行数编号</span></span><br><span class="line"><span class="ruby">-b 或 --number-nonblank 和 -n 相似，只不过对于空白行不编号</span></span><br><span class="line"><span class="ruby">-s 或 --squeeze-blank 当遇到有连续两行以上的空白行，就代换为一行的空白行</span></span><br><span class="line"><span class="ruby">-v 或 --show-nonprinting</span></span><br></pre></td></tr></table></figure></li></ol><p>例：<br>把 textfile1 的档案内容加上行号后输入 textfile2 这个档案里<br><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat -<span class="built_in">n</span> textfile1 &gt; textfile2</span><br></pre></td></tr></table></figure></p><p>把 textfile1 和 textfile2 的档案内容加上行号（空白行不加）之后将内容附加到 textfile3 里。<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat -b textfile1 textfile2 <span class="meta">&gt;&gt; </span>textfile3</span><br></pre></td></tr></table></figure></p><p>把test.txt文件扔进垃圾箱，赋空值test.txt<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat /dev/null &gt; <span class="regexp">/etc/test</span>.txt </span><br><span class="line">注意：&gt;意思是创建，<span class="meta">&gt;&gt;</span>是追加。千万不要弄混了。</span><br></pre></td></tr></table></figure></p><ul><li>tac (反向列示)<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tac 是将 <span class="built_in">cat</span> 反写过来，所以他的功能就跟 <span class="built_in">cat</span> 相反， <span class="built_in">cat</span> 是由第一行到最后一行连续显示在萤幕上，</span><br><span class="line">而 tac 则是由最后一行到第一行反向在萤幕上显示出来！</span><br></pre></td></tr></table></figure></li></ul><p>在Linux中echo命令用来在标准输出上显示一段字符，比如：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"the echo command test!"</span></span><br></pre></td></tr></table></figure></p><p>这个就会输出“the echo command test!”这一行文字！<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo <span class="string">"the echo command test!"</span>&gt;<span class="selector-tag">a</span>.sh</span><br></pre></td></tr></table></figure></p><p>这个就会在a.sh文件中输出“the echo command test!”这一行文字！ </p><p>该命令的一般格式为： echo [ -n ] </p><p>字符串其中选项n表示输出文字后不换行；字符串能加引号，也能不加引号。</p><p>用echo命令输出加引号的字符串时，将字符串原样输出；</p><p>用echo命令输出不加引号的字符串时，将字符串中的各个单词作为字符串输出，各字符串之间用一个空格分割。</p><blockquote><p>摘自:<a href="https://www.cnblogs.com/zdz8207/p/linux-log-tail-cat-tac.html" target="_blank" rel="noopener">https://www.cnblogs.com/zdz8207/p/linux-log-tail-cat-tac.html</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ul&gt;
&lt;li&gt;linux查看日志文件内容命令tail、cat、tac、head、echo&lt;figure class=&quot;highlight stata&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;
      
    
    </summary>
    
      <category term="python" scheme="https://www.leejia.me/categories/python/"/>
    
    
      <category term="tail" scheme="https://www.leejia.me/tags/tail/"/>
    
      <category term="cat" scheme="https://www.leejia.me/tags/cat/"/>
    
      <category term="head" scheme="https://www.leejia.me/tags/head/"/>
    
      <category term="echo" scheme="https://www.leejia.me/tags/echo/"/>
    
  </entry>
  
  <entry>
    <title>python列表的extend方法</title>
    <link href="https://www.leejia.me/python/python_list_extend.html"/>
    <id>https://www.leejia.me/python/python_list_extend.html</id>
    <published>2018-10-10T03:57:19.000Z</published>
    <updated>2018-10-10T14:49:27.066Z</updated>
    
    <content type="html"><![CDATA[<p>越是我以为熟悉的知识,细细研究越能有一些新的发现.<br>今天在使用列表的时候,有了新的发现. 这个点是王之前一直没有注意到的问题.<br>列表的extend()方法只能传可迭代对象,如果是不可迭代对象会报错.<br>如果传入的是字典.那么会添加字典的键到列表中, 具体看代码(注释)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">In [<span class="number">2</span>]: li = list()  <span class="comment"># 定义一个空列表</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">3</span>]: a = &#123;<span class="string">'lijia'</span>: <span class="number">123</span>&#125; </span><br><span class="line"></span><br><span class="line">In [<span class="number">4</span>]: li.extend(a)</span><br><span class="line"></span><br><span class="line">In [<span class="number">5</span>]: li</span><br><span class="line">Out[<span class="number">5</span>]: [<span class="string">'lijia'</span>]  <span class="comment"># 可以看出只能添加字典a的键</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">6</span>]: b = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">7</span>]: li.extend(b)</span><br><span class="line"></span><br><span class="line">In [<span class="number">8</span>]: li</span><br><span class="line">Out[<span class="number">8</span>]: [<span class="string">'lijia'</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"></span><br><span class="line">In [<span class="number">9</span>]: c = &#123;a: <span class="number">3</span>&#125; <span class="comment"># 这粒定义了一个错误的字典....</span></span><br><span class="line">------------------------------------------------------------------------</span><br><span class="line">TypeError                              Traceback (most recent call last)</span><br><span class="line">&lt;ipython-input<span class="number">-9</span><span class="number">-198</span>aa74edb36&gt; <span class="keyword">in</span> &lt;module&gt;()</span><br><span class="line">----&gt; 1 c = &#123;a: 3&#125;</span><br><span class="line"></span><br><span class="line">TypeError: unhashable type: <span class="string">'dict'</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">10</span>]: c = &#123;<span class="string">'2'</span>: <span class="number">3</span>&#125;</span><br><span class="line"></span><br><span class="line">In [<span class="number">11</span>]: li.extend(c)</span><br><span class="line"></span><br><span class="line">In [<span class="number">12</span>]: li</span><br><span class="line">Out[<span class="number">12</span>]: [<span class="string">'lijia'</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="string">'2'</span>]  <span class="comment"># 只把字典c 的键</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">13</span>]: d = <span class="number">456666</span>  <span class="comment"># 整型d 不可迭代</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">14</span>]: li.extend(d)</span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line">TypeError                                 Traceback (most recent call last)</span><br><span class="line">&lt;ipython-input<span class="number">-14</span><span class="number">-7</span>f659be96b91&gt; <span class="keyword">in</span> &lt;module&gt;()</span><br><span class="line">----&gt; 1 li.extend(d)</span><br><span class="line"></span><br><span class="line">TypeError: <span class="string">'int'</span> object <span class="keyword">is</span> <span class="keyword">not</span> iterable</span><br><span class="line"></span><br><span class="line">In [<span class="number">15</span>]:</span><br></pre></td></tr></table></figure><p>OK 收工.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;越是我以为熟悉的知识,细细研究越能有一些新的发现.&lt;br&gt;今天在使用列表的时候,有了新的发现. 这个点是王之前一直没有注意到的问题.&lt;br&gt;列表的extend()方法只能传可迭代对象,如果是不可迭代对象会报错.&lt;br&gt;如果传入的是字典.那么会添加字典的键到列表中, 具体看代
      
    
    </summary>
    
      <category term="python" scheme="https://www.leejia.me/categories/python/"/>
    
    
      <category term="python" scheme="https://www.leejia.me/tags/python/"/>
    
      <category term="list" scheme="https://www.leejia.me/tags/list/"/>
    
      <category term="extend" scheme="https://www.leejia.me/tags/extend/"/>
    
  </entry>
  
  <entry>
    <title>apscheduler出现Unable to determine the name of the local timezone的解决方法</title>
    <link href="https://www.leejia.me/python/Unable-to-determine-the-name-of-the-local-timezone.html"/>
    <id>https://www.leejia.me/python/Unable-to-determine-the-name-of-the-local-timezone.html</id>
    <published>2018-10-09T10:23:39.000Z</published>
    <updated>2018-10-09T10:30:06.619Z</updated>
    
    <content type="html"><![CDATA[<p>今天写了一个定时任务,实现每天推送信息到微信上, 代码在macbookpro 上跑起来的时候非常顺畅.但是部署到centos就不对了, 一个劲的给我报错.<br><code>ValueError: Unable to determine the name of the local timezone -- you must explicitly specify the name of the local timezone. Please refrain from using timezones like EST to prevent problems with daylight saving time. Instead, use a locale based timezone name (such as Europe/Helsinki).</code><br>具体代码在下面:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">2018-10-09 06:18:48 开始执行任务</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"goodmorning.py"</span>, line 113, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    goodmorning.run()</span><br><span class="line">  File <span class="string">"goodmorning.py"</span>, line 106, <span class="keyword">in</span> run</span><br><span class="line">    scheduler.add_job(self.make, <span class="string">'cron'</span>, day_of_week=<span class="string">'0-6'</span>, hour=7, minute=30, second=00)</span><br><span class="line">  File <span class="string">"/root/goodmorning/venv/lib/python3.4/site-packages/apscheduler/schedulers/base.py"</span>, line 416, <span class="keyword">in</span> add_job</span><br><span class="line">    <span class="string">'trigger'</span>: self._create_trigger(trigger, trigger_args),</span><br><span class="line">  File <span class="string">"/root/goodmorning/venv/lib/python3.4/site-packages/apscheduler/schedulers/base.py"</span>, line 918, <span class="keyword">in</span> _create_trigger</span><br><span class="line">    <span class="built_in">return</span> self._create_plugin_instance(<span class="string">'trigger'</span>, trigger, trigger_args)</span><br><span class="line">  File <span class="string">"/root/goodmorning/venv/lib/python3.4/site-packages/apscheduler/schedulers/base.py"</span>, line 903, <span class="keyword">in</span> _create_plugin_instance</span><br><span class="line">    <span class="built_in">return</span> plugin_cls(**constructor_kwargs)</span><br><span class="line">  File <span class="string">"/root/goodmorning/venv/lib/python3.4/site-packages/apscheduler/triggers/cron/__init__.py"</span>, line 52, <span class="keyword">in</span> __init__</span><br><span class="line">    self.timezone = astimezone(timezone)</span><br><span class="line">  File <span class="string">"/root/goodmorning/venv/lib/python3.4/site-packages/apscheduler/util.py"</span>, line 87, <span class="keyword">in</span> astimezone</span><br><span class="line">    <span class="string">'Unable to determine the name of the local timezone -- you must explicitly '</span></span><br><span class="line">ValueError: Unable to determine the name of the <span class="built_in">local</span> timezone -- you must explicitly specify the name of the <span class="built_in">local</span> timezone. Please refrain from using timezones like EST to prevent problems with daylight saving time. Instead, use a locale based timezone name (such as Europe/Helsinki).</span><br></pre></td></tr></table></figure></p><h2 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">timedatectl <span class="built_in">set</span>-timezone Asia/Shanghai</span><br></pre></td></tr></table></figure><p>这样既可以解决找不到timezone的问题.还可以把失去修改成上海(博主的服务器在美国.便宜啊.而且好像.me域名在国内无法备案了.)</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;今天写了一个定时任务,实现每天推送信息到微信上, 代码在macbookpro 上跑起来的时候非常顺畅.但是部署到centos就不对了, 一个劲的给我报错.&lt;br&gt;&lt;code&gt;ValueError: Unable to determine the name of the lo
      
    
    </summary>
    
      <category term="python" scheme="https://www.leejia.me/categories/python/"/>
    
    
      <category term="apscheduler" scheme="https://www.leejia.me/tags/apscheduler/"/>
    
      <category term="python" scheme="https://www.leejia.me/tags/python/"/>
    
      <category term="timezone" scheme="https://www.leejia.me/tags/timezone/"/>
    
  </entry>
  
  <entry>
    <title>每天定时任务APScheduler模块</title>
    <link href="https://www.leejia.me/python/module_APScheduler.html"/>
    <id>https://www.leejia.me/python/module_APScheduler.html</id>
    <published>2018-10-09T02:51:06.000Z</published>
    <updated>2018-10-09T03:10:00.018Z</updated>
    
    <content type="html"><![CDATA[<p>有的时候我们需要一个定时任务，每天同一时间点去发送。这时候，就需要写一个定时任务了。这里我们用到了APScheduler这个库，不了解的去看一下官方文档，这里以每天早上8点钟为例。</p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install APScheduler</span><br></pre></td></tr></table></figure><h2 id="APScheduler"><a href="#APScheduler" class="headerlink" title="APScheduler"></a>APScheduler</h2><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">APScheduler是一个<span class="keyword">python</span>的第三方库，用来提供<span class="keyword">python</span>的后台程序。包含四个组件，分别是：</span><br><span class="line"></span><br><span class="line">triggers： 任务触发器组件，提供任务触发方式</span><br><span class="line"></span><br><span class="line">job stores： 任务商店组件，提供任务保存方式</span><br><span class="line"></span><br><span class="line">executors： 任务调度组件，提供任务调度方式</span><br><span class="line"></span><br><span class="line">schedulers： 任务调度组件，提供任务工作方式</span><br></pre></td></tr></table></figure><h2 id="入门"><a href="#入门" class="headerlink" title="入门"></a>入门</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> apscheduler.schedulers.blocking <span class="keyword">import</span> BlockingScheduler</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment"># 实例化一个调度器</span></span><br><span class="line">scheduler = BlockingScheduler()</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">job1</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"%s: 执行任务"</span>  % time.asctime()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加任务并设置触发方式为3s一次</span></span><br><span class="line">scheduler.add_job(job1, <span class="string">'interval'</span>, seconds=<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 开始运行调度器</span></span><br><span class="line">scheduler.start()</span><br></pre></td></tr></table></figure><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    print(get_time() + <span class="string">" 开始执行任务"</span>)</span><br><span class="line">    scheduler.add_job(任务函数, <span class="string">'cron'</span>, day_of_week=<span class="string">'0-6'</span>, hour=<span class="number">8</span>, minute=<span class="number">00</span>, second=<span class="number">00</span>)</span><br><span class="line">    scheduler.start()</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;有的时候我们需要一个定时任务，每天同一时间点去发送。这时候，就需要写一个定时任务了。这里我们用到了APScheduler这个库，不了解的去看一下官方文档，这里以每天早上8点钟为例。&lt;/p&gt;
&lt;h2 id=&quot;安装&quot;&gt;&lt;a href=&quot;#安装&quot; class=&quot;headerlin
      
    
    </summary>
    
      <category term="python" scheme="https://www.leejia.me/categories/python/"/>
    
    
      <category term="python" scheme="https://www.leejia.me/tags/python/"/>
    
      <category term="APScheduler" scheme="https://www.leejia.me/tags/APScheduler/"/>
    
      <category term="定时任务" scheme="https://www.leejia.me/tags/%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/"/>
    
  </entry>
  
  <entry>
    <title>mac安装pyv8模块</title>
    <link href="https://www.leejia.me/code/install_pyv8.html"/>
    <id>https://www.leejia.me/code/install_pyv8.html</id>
    <published>2018-10-08T05:59:18.000Z</published>
    <updated>2018-10-08T06:30:50.874Z</updated>
    
    <content type="html"><![CDATA[<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 第一种</span></span><br><span class="line">pip install -e git://github.com/brokenseal/PyV8-OS-X<span class="comment">#egg=pyv8 </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 第二种</span></span><br><span class="line">https://github.com/emmetio/pyv8-binaries 下载对应的包解压放到python模块文件夹中</span><br></pre></td></tr></table></figure><p>保持网络畅通, 然后等待… 就成功了.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Last login: Mon Oct  8 13:31:59 on ttys000</span><br><span class="line">Page: www.leejia.me</span><br><span class="line">NickName: Leejia</span><br><span class="line">➜  ~ pip install -e git://github.com/brokenseal/PyV8-OS-X<span class="comment">#egg=pyv8 </span></span><br><span class="line">Looking <span class="keyword">in</span> indexes: http://mirrors.aliyun.com/pypi/simple</span><br><span class="line">Obtaining pyv8 from git+git://github.com/brokenseal/PyV8-OS-X<span class="comment">#egg=pyv8</span></span><br><span class="line">  Cloning git://github.com/brokenseal/PyV8-OS-X to ./src/pyv8</span><br><span class="line">Installing collected packages: pyv8</span><br><span class="line">  Running setup.py develop <span class="keyword">for</span> pyv8</span><br><span class="line">Successfully installed pyv8</span><br><span class="line">You are using pip version 18.0, however version 18.1 is available.</span><br><span class="line">You should consider upgrading via the <span class="string">'pip install --upgrade pip'</span> <span class="built_in">command</span>.</span><br><span class="line">➜  ~ ipython3</span><br></pre></td></tr></table></figure></p><h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ ipython3</span><br><span class="line">Python 3.6.5 (v3.6.5:f59c0932b4, Mar 28 2018, 05:52:31) </span><br><span class="line">Type <span class="string">'copyright'</span>, <span class="string">'credits'</span> or <span class="string">'license'</span> <span class="keyword">for</span> more information</span><br><span class="line">IPython 6.4.0 -- An enhanced Interactive Python. Type <span class="string">'?'</span> <span class="keyword">for</span> <span class="built_in">help</span>.</span><br><span class="line"></span><br><span class="line">In [1]: import pyv8</span><br><span class="line"></span><br><span class="line">In [2]:</span><br></pre></td></tr></table></figure><p><code>import pyv8</code> 没有报错就表示成功了.</p><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Author  : Leejia</span></span><br><span class="line"><span class="comment"># @Blog    ：www.leejia.me</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> pyv8 <span class="keyword">import</span> _PyV8 <span class="keyword">as</span> PyV8</span><br><span class="line"></span><br><span class="line">ctxt = PyV8.JSContext()</span><br><span class="line">ctxt.enter()</span><br><span class="line">func = ctxt.eval(<span class="string">"""</span></span><br><span class="line"><span class="string">    (function()&#123;</span></span><br><span class="line"><span class="string">        function hello()&#123;</span></span><br><span class="line"><span class="string">            return "Hello world.";</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        return hello();</span></span><br><span class="line"><span class="string">    &#125;)</span></span><br><span class="line"><span class="string">"""</span>)</span><br><span class="line">print(func())</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;安装&quot;&gt;&lt;a href=&quot;#安装&quot; class=&quot;headerlink&quot; title=&quot;安装&quot;&gt;&lt;/a&gt;安装&lt;/h2&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span
      
    
    </summary>
    
      <category term="code" scheme="https://www.leejia.me/categories/code/"/>
    
    
      <category term="python" scheme="https://www.leejia.me/tags/python/"/>
    
      <category term="pyv8" scheme="https://www.leejia.me/tags/pyv8/"/>
    
      <category term="mac" scheme="https://www.leejia.me/tags/mac/"/>
    
  </entry>
  
  <entry>
    <title>博客启用新主题</title>
    <link href="https://www.leejia.me/code/blog_use_new_theme.html"/>
    <id>https://www.leejia.me/code/blog_use_new_theme.html</id>
    <published>2018-09-22T02:08:03.000Z</published>
    <updated>2018-09-23T01:01:17.827Z</updated>
    
    <content type="html"><![CDATA[<ul><li><p>博客之前一直使用的是<a href="https://github.com/tufu9441/maupassant-hexo" target="_blank" rel="noopener">Maupassant</a>.非常感谢<a href="https://www.haomwei.com" target="_blank" rel="noopener">屠城</a>,提供这款漂亮简洁的主题.</p></li><li><p>今天启用了<a href="https://github.com/cofess/" target="_blank" rel="noopener">cofess</a> 开发的主题<a href="https://github.com/cofess/hexo-theme-pure" target="_blank" rel="noopener">pure</a> .这款主题在Hexo官方的主题库中有.一款非常漂亮的主题.</p></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ul&gt;
&lt;li&gt;&lt;p&gt;博客之前一直使用的是&lt;a href=&quot;https://github.com/tufu9441/maupassant-hexo&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Maupassant&lt;/a&gt;.非常感谢&lt;a href=&quot;https
      
    
    </summary>
    
      <category term="code" scheme="https://www.leejia.me/categories/code/"/>
    
    
      <category term="hexo" scheme="https://www.leejia.me/tags/hexo/"/>
    
      <category term="theme" scheme="https://www.leejia.me/tags/theme/"/>
    
  </entry>
  
  <entry>
    <title>Hexo生成的RSS文件atom.xml报错</title>
    <link href="https://www.leejia.me/code/id_rss_vscode_bug.html"/>
    <id>https://www.leejia.me/code/id_rss_vscode_bug.html</id>
    <published>2018-09-21T10:38:33.000Z</published>
    <updated>2018-09-24T13:50:16.161Z</updated>
    
    <content type="html"><![CDATA[<p>Hexo 生成的 RSS 的 atom.xml 报错 PCDATA invalid Char value，产生这样的原因就是 Markdown 文件中有特殊字符。</p><h2 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h2><p>我使用 <a href="https://github.com/hexojs/hexo-generator-feed" target="_blank" rel="noopener">hexo-generator-feed</a> 来生成 Feed 的<code>atom.xml</code>文件</p><h2 id="错误"><a href="#错误" class="headerlink" title="错误"></a>错误</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">在浏览器中查看 atom.xml，发现报错，信息如下。</span><br><span class="line"></span><br><span class="line">This page contains the following errors:</span><br><span class="line">error on line 264 at column 168: PCDATA invalid Char value 8</span><br><span class="line">Below is a rendering of the page up to the first error.</span><br></pre></td></tr></table></figure><p>因为是使用的是vscode直接编辑的,这个编辑器有个问题会产生<code>^H</code>这个字符,这个导致xml无法渲染.而且在vscode,typora中这个字符都不会显示, 用vim编辑器打开就可以看到<code>^H</code></p><h2 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h2><p>用vim编辑器打开就可以看到<code>^H</code>然后挨个删掉.</p><p>然后在使用命令重新生成一下<code>atom.xml</code>文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Hexo 生成的 RSS 的 atom.xml 报错 PCDATA invalid Char value，产生这样的原因就是 Markdown 文件中有特殊字符。&lt;/p&gt;
&lt;h2 id=&quot;插件&quot;&gt;&lt;a href=&quot;#插件&quot; class=&quot;headerlink&quot; title=
      
    
    </summary>
    
      <category term="code" scheme="https://www.leejia.me/categories/code/"/>
    
    
      <category term="rss" scheme="https://www.leejia.me/tags/rss/"/>
    
      <category term="vscode" scheme="https://www.leejia.me/tags/vscode/"/>
    
      <category term="hexo" scheme="https://www.leejia.me/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>python中print底层调用了什么方法</title>
    <link href="https://www.leejia.me/python/python_source_code.html"/>
    <id>https://www.leejia.me/python/python_source_code.html</id>
    <published>2018-09-20T07:29:15.000Z</published>
    <updated>2018-09-20T07:53:44.060Z</updated>
    
    <content type="html"><![CDATA[<h2 id="print"><a href="#print" class="headerlink" title="print"></a>print</h2><p>函数print()底层调用的是sys.stdout.write()来实现打印字符串控制台,但是print()又不同于sys.stdout.write()</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Author  : Leejia</span></span><br><span class="line"><span class="comment"># @Blog    ：www.leejia.me</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">print(__file__)</span><br><span class="line">print(<span class="string">'hello, Leejia'</span>)</span><br><span class="line">print(<span class="string">'-'</span> * <span class="number">10</span>)</span><br><span class="line">sys.stdout.write(<span class="string">'hello, Leejia'</span>)</span><br><span class="line">print(<span class="string">'leeeeeee'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出结果:</span></span><br><span class="line">/Users/jetmo/Documents/Code/shops/print_input_test.py</span><br><span class="line">hello, Leejia</span><br><span class="line">----------</span><br><span class="line">hello, Leejialeeeeeee</span><br><span class="line"></span><br><span class="line">Process finished <span class="keyword">with</span> exit code <span class="number">0</span></span><br></pre></td></tr></table></figure><p>可以看看出来, sys.stdout.write 是没有自动换行的</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sys.stdout.write(<span class="string">'hello, Leejia'</span>)</span><br><span class="line">print(<span class="string">'leeeeeee'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 结果: </span></span><br><span class="line">hello, Leejialeeeeeee</span><br></pre></td></tr></table></figure><p>sys.stdout.write 只能接受一个参数</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sys.stdout.write(<span class="string">'hello, Leejia'</span>, <span class="string">'test'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 结果:</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"/Users/jetmo/Documents/Code/shops/print_input_test.py"</span>, line <span class="number">12</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    sys.stdout.write(<span class="string">'hello, Leejia'</span>, <span class="string">'test'</span>)</span><br><span class="line">TypeError: write() takes exactly one argument (<span class="number">2</span> given)</span><br></pre></td></tr></table></figure><p>sys.stdout.write 只能接受字符串</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sys.stdout.write(<span class="number">123</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 结果</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"/Users/jetmo/Documents/Code/shops/print_input_test.py"</span>, line <span class="number">14</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    sys.stdout.write(<span class="number">123</span>)</span><br><span class="line">TypeError: write() argument must be str, <span class="keyword">not</span> int</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;print&quot;&gt;&lt;a href=&quot;#print&quot; class=&quot;headerlink&quot; title=&quot;print&quot;&gt;&lt;/a&gt;print&lt;/h2&gt;&lt;p&gt;函数print()底层调用的是sys.stdout.write()来实现打印字符串控制台,但是print()又不同于
      
    
    </summary>
    
      <category term="python" scheme="https://www.leejia.me/categories/python/"/>
    
    
      <category term="python" scheme="https://www.leejia.me/tags/python/"/>
    
      <category term="input" scheme="https://www.leejia.me/tags/input/"/>
    
      <category term="底层源码" scheme="https://www.leejia.me/tags/%E5%BA%95%E5%B1%82%E6%BA%90%E7%A0%81/"/>
    
  </entry>
  
  <entry>
    <title>关于ubuntu清理垃圾</title>
    <link href="https://www.leejia.me/code/clean_your_ubuntu.html"/>
    <id>https://www.leejia.me/code/clean_your_ubuntu.html</id>
    <published>2018-09-18T02:18:14.000Z</published>
    <updated>2018-09-18T05:35:35.749Z</updated>
    
    <content type="html"><![CDATA[<p>MBP上安装了ubuntu16.04虚拟机,随着使用时间越长, 导致缓存,无效的配置文件等占用空间特别的大.目前有22G多.于是在网上找了一个清理方法.</p><p>Ubuntu Linux与Windows系统不同，Ubuntu Linux不会产生无用垃圾文件，但是在升级缓存中，Ubuntu Linux不会自动删除这些文件，今天就来说说这些垃圾文件清理方法。</p><h2 id="非常有用的清理命令："><a href="#非常有用的清理命令：" class="headerlink" title="非常有用的清理命令："></a>非常有用的清理命令：</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get autoclean <span class="comment"># --清理旧版本的软件缓存 OK(已经卸载掉的软件包)</span></span><br><span class="line">sudo apt-get clean  <span class="comment"># --清理所有软件缓存 OK(电脑上存储的安装包)</span></span><br><span class="line">sudo apt-get autoremove  <span class="comment"># --删除系统不再使用的孤立软件 OK</span></span><br><span class="line">(已经卸载了，但是一些只有它依赖而别的软件包都不需要的软件包)</span><br></pre></td></tr></table></figure><p>这三个命令主要清理升级缓存以及无用包的。</p><h2 id="清理Linux下孤立的包："><a href="#清理Linux下孤立的包：" class="headerlink" title="清理Linux下孤立的包："></a>清理Linux下孤立的包：</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">图形界面下我们可以用：gtkorphan</span><br><span class="line">sudo apt-get install gtkorphan -y</span><br><span class="line">终端命令下我们可以用：deborphan</span><br><span class="line">sudo apt-get install deborphan -y</span><br></pre></td></tr></table></figure><h2 id="删除多余的内核-在1中已清理"><a href="#删除多余的内核-在1中已清理" class="headerlink" title="删除多余的内核(在1中已清理)"></a>删除多余的内核(在1中已清理)</h2><p>(在终端中输入uname -a，然后看其显示的现用内核版本是多少)<br>(不删除掉老的内核，以便于使用新升级的内核无法启动时，你能马上使用老内核进行启动，不至于导致你无法进入系统的悲剧。不过在你升级完毕，重启后能进入系统后，说明新内核已经很好的兼容了你的电脑，那么你就可以放心大胆的删除掉老内核)</p><h2 id="清理无效软件"><a href="#清理无效软件" class="headerlink" title="清理无效软件"></a>清理无效软件</h2><p>libreoffice是一套类似于微软office的免费办公套件，不过无论界面交互还是执行性能都还有很大的提升空间，卸载libreoffice可以释放300M左右的磁盘空间<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get -y purge libreoffice* <span class="comment">#办公套件 </span></span><br><span class="line">sudo apt-get -y purge thunderbird*  <span class="comment"># 邮箱软件</span></span><br><span class="line">sudo apt-get -y purge gnome-power-manager <span class="comment">#电源统计 </span></span><br><span class="line">sudo apt-get -y purge deja-dup <span class="comment">#备份 </span></span><br><span class="line">sudo apt-get -y purge bluez* <span class="comment">#卸载蓝牙 </span></span><br><span class="line">sudo apt-get -y purge simple-scan <span class="comment">#扫描 </span></span><br><span class="line">sudo apt-get -y purge hplip* <span class="comment">#打印 </span></span><br><span class="line">sudo apt-get -y purge printer-driver* <span class="comment">#打印驱动 </span></span><br><span class="line">sudo apt-get -y purge rhythmbox* <span class="comment">#音乐播放 </span></span><br><span class="line">sudo apt-get -y purge gnome-orca <span class="comment">#屏幕阅读 </span></span><br><span class="line">sudo apt-get -y purge onboard <span class="comment">#屏幕键盘 </span></span><br><span class="line">sudo apt-get -y purge aisleriot <span class="comment">#纸牌王 </span></span><br><span class="line">sudo apt-get -y purge gnome-sudoku <span class="comment">#数独 </span></span><br><span class="line">sudo apt-get purge stardict* <span class="comment"># 星际译王</span></span><br><span class="line">sudo apt-get purge totem  <span class="comment"># 卸载视频播放器</span></span><br><span class="line">sudo apt-get purge Shotwell* <span class="comment"># 一个图片管理工具</span></span><br><span class="line">sudo apt-get purge imagemagic*</span><br><span class="line"><span class="comment"># 下面的谨慎操作!!</span></span><br><span class="line"><span class="comment"># aptitude remove totem # 卸载视频播放器</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 清单(sudo apt-get purge 下面的名称)</span></span><br><span class="line">libreoffice-common libreoffice（可以换 WPS ，apt purge libreoffice-common）</span><br><span class="line">unity-webapps-common Amazon 链接</span><br><span class="line">thunderbird 雷鸟邮件客户端</span><br><span class="line">totem 自带的播放器</span><br><span class="line">rhythmbox 自带的音乐播放器</span><br><span class="line">empathy 自带的即时聊天应用</span><br><span class="line">brasero 自带的光盘刻录器</span><br><span class="line">simple-scan 扫描仪</span><br><span class="line">gnome-mahjongg 对对碰游戏</span><br><span class="line">aisleriot 纸牌游戏</span><br><span class="line">gnome-mines 扫雷游戏</span><br><span class="line">cheese webcam 应用</span><br><span class="line">gnome-sudoku 数独游戏</span><br><span class="line">transmission-common BT 客户端</span><br><span class="line">gnome-orca 屏幕阅读</span><br><span class="line">webbrowser-app Ubuntu自带的浏览器（有了 chrome 和 Firefox 根本用不到这个）</span><br><span class="line">landscape-client-ui-install landscape 远程控制软件</span><br><span class="line">deja-dup 备份</span><br><span class="line">onboard 屏幕键盘</span><br><span class="line">imagemagic*</span><br></pre></td></tr></table></figure></p><h2 id="清理无效配置文件"><a href="#清理无效配置文件" class="headerlink" title="清理无效配置文件"></a>清理无效配置文件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dpkg -l |grep ^rc|awk <span class="string">'&#123;print $2&#125;'</span> |sudo xargs dpkg -P</span><br></pre></td></tr></table></figure><h2 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h2><p>包管理的临时文件目录:<br>包在 /var/cache/apt/archives<br>没有下载完的在 /var/cache/apt/archives/partial</p><p>在卸载软件的时候，尽可能使用sudo apt-get purge xxxxx（xxxx为要卸载的软件名），这样可以将软件以及它的配置文件均卸载干净。</p><h2 id="救命稻草"><a href="#救命稻草" class="headerlink" title="救命稻草"></a>救命稻草</h2><p>执行这一行的时候可能会关联其他软件这个时候如果重启ubuntu会出现:<br><code>#谨慎使用: aptitude remove totem # 卸载视频播放器</code><br><strong>登录后无dash,无启动栏launch,无menu bar只有桌面背景的快速解决办法</strong></p><p>解决方案：</p><ul><li>链接ubuntu<ul><li>(0)使用shell远程链接ubuntu(前提知道ip地址)</li><li>(1)或者尝试用　ctrl + alt + t　打开命令行</li></ul></li><li><p>安装<code>compizconfig-settings-manager</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install compizconfig-settings-manager</span><br></pre></td></tr></table></figure></li><li><p>安装 <code>unity</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get -f install &amp;&amp; sudo apt-get --reinstall install unity</span><br></pre></td></tr></table></figure></li><li><p>重启 </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo shutdown now -r</span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;MBP上安装了ubuntu16.04虚拟机,随着使用时间越长, 导致缓存,无效的配置文件等占用空间特别的大.目前有22G多.于是在网上找了一个清理方法.&lt;/p&gt;
&lt;p&gt;Ubuntu Linux与Windows系统不同，Ubuntu Linux不会产生无用垃圾文件，但是在升级
      
    
    </summary>
    
      <category term="code" scheme="https://www.leejia.me/categories/code/"/>
    
    
      <category term="mac" scheme="https://www.leejia.me/tags/mac/"/>
    
      <category term="ubuntu" scheme="https://www.leejia.me/tags/ubuntu/"/>
    
      <category term="clean" scheme="https://www.leejia.me/tags/clean/"/>
    
      <category term="垃圾" scheme="https://www.leejia.me/tags/%E5%9E%83%E5%9C%BE/"/>
    
  </entry>
  
  <entry>
    <title>定制mac终端欢迎页</title>
    <link href="https://www.leejia.me/code/diy_your_terminal.html"/>
    <id>https://www.leejia.me/code/diy_your_terminal.html</id>
    <published>2018-09-17T05:10:20.000Z</published>
    <updated>2018-09-17T05:16:57.181Z</updated>
    
    <content type="html"><![CDATA[<p>mac上无论是npm、git还是Jekyll都会用到终端，虽然坑多，但折腾不止！遂苦中作乐。</p><h2 id="配置步骤"><a href="#配置步骤" class="headerlink" title="配置步骤"></a>配置步骤</h2><ul><li><p>快捷键control+space唤出Spotlight，搜索terminal打开终端　</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /etc <span class="comment">#进入目录</span></span><br><span class="line">sudo pico motd  <span class="comment">#输入密码后进入修改页面</span></span><br></pre></td></tr></table></figure></li><li><p>粘贴内容如下</p><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">                   <span class="variable">_ooOoo_</span></span><br><span class="line">                  o8888888o</span><br><span class="line">                  <span class="number">88</span><span class="string">" . "</span><span class="number">88</span></span><br><span class="line">                  (| -_- |)</span><br><span class="line">                  O\  =  /O</span><br><span class="line">               <span class="variable">____</span>/`---<span class="string">'\____</span></span><br><span class="line"><span class="string">             .'</span>  \\|     |<span class="comment">//  `.</span></span><br><span class="line">            /  \\|||  :  |||<span class="comment">//  \</span></span><br><span class="line">           /  _||||| -:- |||||-  \</span><br><span class="line">           |   | \\\  -  <span class="comment">/// |   |</span></span><br><span class="line">           | \_|  <span class="string">''</span>\---/<span class="string">''</span>  |   |</span><br><span class="line">           \  .-\<span class="variable">__</span>  `-`  <span class="variable">___</span>/-. /</span><br><span class="line">         <span class="variable">___</span>`. .<span class="string">'  /--.--\  `. . __</span></span><br><span class="line"><span class="string">      ."" '</span>&lt;  `.<span class="variable">___</span>\_&lt;|&gt;_/<span class="variable">___</span>.<span class="string">'  &gt;'</span><span class="string">""</span>.</span><br><span class="line">     | | :  `- \`.;`\ _ /`;.`/ - ` : | |</span><br><span class="line">     \  \ `-.   \_ <span class="variable">__</span>\ /<span class="variable">__</span> _/   .-` /  /</span><br><span class="line">======`-.<span class="variable">____</span>`-.<span class="variable">___</span>\<span class="variable">_____</span>/<span class="variable">___</span>.-`<span class="variable">____</span>.-<span class="string">'======</span></span><br><span class="line"><span class="string">                   `=---='</span></span><br><span class="line"></span><br><span class="line">^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span><br><span class="line">           佛祖保佑  🙏   永无BUG</span><br></pre></td></tr></table></figure></li><li><p>保存:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">control + X 然后输入y  然后可能需要你输入保存的文件名</span><br><span class="line">填写motd</span><br></pre></td></tr></table></figure></li><li><p>重启终端看效果吧.<br>自带的tetminal和iterm都可以看到效果.</p></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;mac上无论是npm、git还是Jekyll都会用到终端，虽然坑多，但折腾不止！遂苦中作乐。&lt;/p&gt;
&lt;h2 id=&quot;配置步骤&quot;&gt;&lt;a href=&quot;#配置步骤&quot; class=&quot;headerlink&quot; title=&quot;配置步骤&quot;&gt;&lt;/a&gt;配置步骤&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p
      
    
    </summary>
    
      <category term="code" scheme="https://www.leejia.me/categories/code/"/>
    
    
      <category term="mac" scheme="https://www.leejia.me/tags/mac/"/>
    
      <category term="terminal" scheme="https://www.leejia.me/tags/terminal/"/>
    
      <category term="终端" scheme="https://www.leejia.me/tags/%E7%BB%88%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>docker安装和使用</title>
    <link href="https://www.leejia.me/code/install_docker_and_use.html"/>
    <id>https://www.leejia.me/code/install_docker_and_use.html</id>
    <published>2018-09-16T12:22:58.000Z</published>
    <updated>2018-09-17T02:27:37.376Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ubuntu"><a href="#ubuntu" class="headerlink" title="ubuntu"></a>ubuntu</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>更新ubuntu的apt源索引<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure></p><p>安装包允许apt通过HTTPS使用仓库<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install \</span><br><span class="line">    apt-transport-https \</span><br><span class="line">    ca-certificates \</span><br><span class="line">    curl \</span><br><span class="line">    software-properties-common</span><br></pre></td></tr></table></figure></p><p>添加Docker官方GPG key<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -</span><br></pre></td></tr></table></figure></p><p>设置Docker稳定版仓库<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository \</span><br><span class="line">   <span class="string">"deb [arch=amd64] https://download.docker.com/linux/ubuntu \</span></span><br><span class="line"><span class="string">   <span class="variable">$(lsb_release -cs)</span> \</span></span><br><span class="line"><span class="string">   stable"</span></span><br></pre></td></tr></table></figure></p><p>添加仓库后，更新apt源索引<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure></p><p>安装最新版Docker CE（社区版）<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install docker-ce</span><br></pre></td></tr></table></figure></p><p>检查Docker CE是否安装正确<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker run hello-world</span><br></pre></td></tr></table></figure></p><p>出现如下信息，表示安装成功<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">Status: Downloaded newer image <span class="keyword">for</span> hello-world:latest</span><br><span class="line"></span><br><span class="line">Hello from Docker!</span><br><span class="line">This message shows that your installation appears to be working correctly.</span><br><span class="line"></span><br><span class="line">To generate this message, Docker took the following steps:</span><br><span class="line"> 1. The Docker client contacted the Docker daemon.</span><br><span class="line"> 2. The Docker daemon pulled the <span class="string">"hello-world"</span> image from the Docker Hub.</span><br><span class="line">    (amd64)</span><br><span class="line"> 3. The Docker daemon created a new container from that image <span class="built_in">which</span> runs the</span><br><span class="line">    executable that produces the output you are currently reading.</span><br><span class="line"> 4. The Docker daemon streamed that output to the Docker client, <span class="built_in">which</span> sent it</span><br><span class="line">    to your terminal.</span><br><span class="line"></span><br><span class="line">To try something more ambitious, you can run an Ubuntu container with:</span><br><span class="line"> $ docker run -it ubuntu bash</span><br><span class="line"></span><br><span class="line">Share images, automate workflows, and more with a free Docker ID:</span><br><span class="line"> https://hub.docker.com/</span><br><span class="line"></span><br><span class="line">For more examples and ideas, visit:</span><br><span class="line"> https://docs.docker.com/get-started/</span><br></pre></td></tr></table></figure></p><h3 id="启动与停止"><a href="#启动与停止" class="headerlink" title="启动与停止"></a>启动与停止</h3><p>安装完成Docker后，默认已经启动了docker服务，如需手动控制docker服务的启停，可执行如下命令</p><p>启动docker<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service docker start</span><br></pre></td></tr></table></figure></p><p>停止docker<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service docker stop</span><br></pre></td></tr></table></figure></p><p>重启docker<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service docker restart</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;ubuntu&quot;&gt;&lt;a href=&quot;#ubuntu&quot; class=&quot;headerlink&quot; title=&quot;ubuntu&quot;&gt;&lt;/a&gt;ubuntu&lt;/h2&gt;&lt;h3 id=&quot;安装&quot;&gt;&lt;a href=&quot;#安装&quot; class=&quot;headerlink&quot; title=&quot;安装&quot;&gt;&lt;
      
    
    </summary>
    
      <category term="code" scheme="https://www.leejia.me/categories/code/"/>
    
    
      <category term="docker" scheme="https://www.leejia.me/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>开发记录之django框架数据库迁移</title>
    <link href="https://www.leejia.me/django/djang_migrate_dababase.html"/>
    <id>https://www.leejia.me/django/djang_migrate_dababase.html</id>
    <published>2018-09-16T02:47:14.000Z</published>
    <updated>2018-09-16T02:53:29.300Z</updated>
    
    <content type="html"><![CDATA[<h2 id="记录"><a href="#记录" class="headerlink" title="记录"></a>记录</h2><p>今天新建了一个数据库模型, 但是却怎么也迁移不成功.显示:没有任何改变..<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(shops_py3) ➜  shops git:(dev) ✗ python manage.py makemigrations</span><br><span class="line">No changes detected</span><br></pre></td></tr></table></figure></p><p>后来忽然想到一个问题: 我只是建立了数据模型,但是并没有个和django框架本身建立联系.<br>很显然我没有注册app….<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">INSTALLED_APPS = [</span><br><span class="line">    ....</span><br><span class="line">    <span class="string">'areas.apps.AreasConfig'</span>,</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p><p>注册后再执行果然妥妥的成功了~~~<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(shops_py3) ➜  shops git:(dev) ✗ python manage.py makemigrations</span><br></pre></td></tr></table></figure></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(shops_py3) ➜  shops git:(dev) ✗ python manage.py makemigrations</span><br><span class="line">Migrations <span class="keyword">for</span> <span class="string">'areas'</span>:</span><br><span class="line">  shops/apps/areas/migrations/<span class="number">0001</span>_initial.py</span><br><span class="line">    - Create model Area</span><br><span class="line">(shops_py3) ➜  shops git:(dev) ✗  python manage migrate</span><br></pre></td></tr></table></figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>开发一定要心细. 细节问题不能出错…因为真的很难排查…</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;记录&quot;&gt;&lt;a href=&quot;#记录&quot; class=&quot;headerlink&quot; title=&quot;记录&quot;&gt;&lt;/a&gt;记录&lt;/h2&gt;&lt;p&gt;今天新建了一个数据库模型, 但是却怎么也迁移不成功.显示:没有任何改变..&lt;br&gt;&lt;figure class=&quot;highlight pyth
      
    
    </summary>
    
      <category term="django" scheme="https://www.leejia.me/categories/django/"/>
    
    
      <category term="migrate" scheme="https://www.leejia.me/tags/migrate/"/>
    
      <category term="database" scheme="https://www.leejia.me/tags/database/"/>
    
  </entry>
  
  <entry>
    <title>关于开发过程的感受</title>
    <link href="https://www.leejia.me/code/develop_and_think.html"/>
    <id>https://www.leejia.me/code/develop_and_think.html</id>
    <published>2018-09-15T13:02:53.000Z</published>
    <updated>2018-09-17T02:28:44.793Z</updated>
    
    <content type="html"><![CDATA[<h2 id="胡言乱语"><a href="#胡言乱语" class="headerlink" title="胡言乱语"></a>胡言乱语</h2><p>开发遇到解不开的问题,多看源码.看源码解题,一不要太爽的事情.哈哈哈.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;胡言乱语&quot;&gt;&lt;a href=&quot;#胡言乱语&quot; class=&quot;headerlink&quot; title=&quot;胡言乱语&quot;&gt;&lt;/a&gt;胡言乱语&lt;/h2&gt;&lt;p&gt;开发遇到解不开的问题,多看源码.看源码解题,一不要太爽的事情.哈哈哈.&lt;/p&gt;

      
    
    </summary>
    
      <category term="code" scheme="https://www.leejia.me/categories/code/"/>
    
    
      <category term="感受" scheme="https://www.leejia.me/tags/%E6%84%9F%E5%8F%97/"/>
    
      <category term="源码" scheme="https://www.leejia.me/tags/%E6%BA%90%E7%A0%81/"/>
    
  </entry>
  
  <entry>
    <title>mac升级系统后出现xcrun error解决办法</title>
    <link href="https://www.leejia.me/code/xcrun_error.html"/>
    <id>https://www.leejia.me/code/xcrun_error.html</id>
    <published>2018-09-15T06:12:50.000Z</published>
    <updated>2018-09-17T02:31:52.004Z</updated>
    
    <content type="html"><![CDATA[<h2 id="现象"><a href="#现象" class="headerlink" title="现象"></a>现象</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun</span><br></pre></td></tr></table></figure><h2 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xcode-select --install</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;现象&quot;&gt;&lt;a href=&quot;#现象&quot; class=&quot;headerlink&quot; title=&quot;现象&quot;&gt;&lt;/a&gt;现象&lt;/h2&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span
      
    
    </summary>
    
      <category term="code" scheme="https://www.leejia.me/categories/code/"/>
    
    
      <category term="xcrun" scheme="https://www.leejia.me/tags/xcrun/"/>
    
      <category term="code" scheme="https://www.leejia.me/tags/code/"/>
    
  </entry>
  
  <entry>
    <title>找BUG事件快乐的事情</title>
    <link href="https://www.leejia.me/code/fing_bug.html"/>
    <id>https://www.leejia.me/code/fing_bug.html</id>
    <published>2018-09-12T12:16:31.000Z</published>
    <updated>2018-09-17T02:29:04.032Z</updated>
    
    <content type="html"><![CDATA[<p>开发中出现BUG是非常正常是事情,找BUG也是非常爽的过程~</p><p>流程: </p><ul><li>打开QQ音乐</li><li>打断点调试</li><li>看源码</li><li>实现不行再csdn,google…..</li></ul><p>今天在开发django找回密码的功能.在进入修改密码页面之前需要针对当前用户生成access_token.错误的把JTF的接口调用过来了……</p><p>打断点排查顺利解决~</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;开发中出现BUG是非常正常是事情,找BUG也是非常爽的过程~&lt;/p&gt;
&lt;p&gt;流程: &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;打开QQ音乐&lt;/li&gt;
&lt;li&gt;打断点调试&lt;/li&gt;
&lt;li&gt;看源码&lt;/li&gt;
&lt;li&gt;实现不行再csdn,google…..&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;今天在
      
    
    </summary>
    
      <category term="code" scheme="https://www.leejia.me/categories/code/"/>
    
    
      <category term="bug" scheme="https://www.leejia.me/tags/bug/"/>
    
  </entry>
  
  <entry>
    <title>mac系统下django日志如有中文报错的解决方法</title>
    <link href="https://www.leejia.me/django/django_logging_error.html"/>
    <id>https://www.leejia.me/django/django_logging_error.html</id>
    <published>2018-09-09T12:36:10.000Z</published>
    <updated>2018-09-21T10:34:42.346Z</updated>
    
    <content type="html"><![CDATA[<h2 id="出现的bug"><a href="#出现的bug" class="headerlink" title="出现的bug"></a>出现的bug</h2><p>django使用DRF框架。配置日志，如果有中文控制台会报错，但是在因为下就不会出现这样的错误，经过排查可以确定的是中文导致的bug<br>如下为完整报错信息，后面也会贴出核心错误信息.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">--- Logging error ---</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/logging/__init__.py"</span>, line <span class="number">994</span>, <span class="keyword">in</span> emit</span><br><span class="line">    stream.write(msg)</span><br><span class="line">UnicodeEncodeError: <span class="string">'ascii'</span> codec can<span class="string">'t encode characters in position 38-39: ordinal not in range(128)</span></span><br><span class="line"><span class="string">Call stack:</span></span><br><span class="line"><span class="string">  File "/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py", line 884, in _bootstrap</span></span><br><span class="line"><span class="string">    self._bootstrap_inner()</span></span><br><span class="line"><span class="string">  File "/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py", line 916, in _bootstrap_inner</span></span><br><span class="line"><span class="string">    self.run()</span></span><br><span class="line"><span class="string">  File "/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py", line 864, in run</span></span><br><span class="line"><span class="string">    self._target(*self._args, **self._kwargs)</span></span><br><span class="line"><span class="string">  File "/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/socketserver.py", line 639, in process_request_thread</span></span><br><span class="line"><span class="string">    self.finish_request(request, client_address)</span></span><br><span class="line"><span class="string">  File "/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/socketserver.py", line 361, in finish_request</span></span><br><span class="line"><span class="string">    self.RequestHandlerClass(request, client_address, self)</span></span><br><span class="line"><span class="string">  File "/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/socketserver.py", line 696, in __init__</span></span><br><span class="line"><span class="string">    self.handle()</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/core/servers/basehttp.py", line 155, in handle</span></span><br><span class="line"><span class="string">    handler.run(self.server.get_app())</span></span><br><span class="line"><span class="string">  File "/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/wsgiref/handlers.py", line 137, in run</span></span><br><span class="line"><span class="string">    self.result = application(self.environ, self.start_response)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/contrib/staticfiles/handlers.py", line 63, in __call__</span></span><br><span class="line"><span class="string">    return self.application(environ, start_response)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/core/handlers/wsgi.py", line 157, in __call__</span></span><br><span class="line"><span class="string">    response = self.get_response(request)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/core/handlers/base.py", line 124, in get_response</span></span><br><span class="line"><span class="string">    response = self._middleware_chain(request)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/core/handlers/exception.py", line 41, in inner</span></span><br><span class="line"><span class="string">    response = get_response(request)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/utils/deprecation.py", line 140, in __call__</span></span><br><span class="line"><span class="string">    response = self.get_response(request)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/core/handlers/exception.py", line 41, in inner</span></span><br><span class="line"><span class="string">    response = get_response(request)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/utils/deprecation.py", line 140, in __call__</span></span><br><span class="line"><span class="string">    response = self.get_response(request)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/core/handlers/exception.py", line 41, in inner</span></span><br><span class="line"><span class="string">    response = get_response(request)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/utils/deprecation.py", line 140, in __call__</span></span><br><span class="line"><span class="string">    response = self.get_response(request)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/core/handlers/exception.py", line 41, in inner</span></span><br><span class="line"><span class="string">    response = get_response(request)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/utils/deprecation.py", line 140, in __call__</span></span><br><span class="line"><span class="string">    response = self.get_response(request)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/core/handlers/exception.py", line 41, in inner</span></span><br><span class="line"><span class="string">    response = get_response(request)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/utils/deprecation.py", line 140, in __call__</span></span><br><span class="line"><span class="string">    response = self.get_response(request)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/core/handlers/exception.py", line 41, in inner</span></span><br><span class="line"><span class="string">    response = get_response(request)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/utils/deprecation.py", line 140, in __call__</span></span><br><span class="line"><span class="string">    response = self.get_response(request)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/core/handlers/exception.py", line 41, in inner</span></span><br><span class="line"><span class="string">    response = get_response(request)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/utils/deprecation.py", line 140, in __call__</span></span><br><span class="line"><span class="string">    response = self.get_response(request)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/core/handlers/exception.py", line 41, in inner</span></span><br><span class="line"><span class="string">    response = get_response(request)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/utils/deprecation.py", line 140, in __call__</span></span><br><span class="line"><span class="string">    response = self.get_response(request)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/core/handlers/exception.py", line 41, in inner</span></span><br><span class="line"><span class="string">    response = get_response(request)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/core/handlers/base.py", line 185, in _get_response</span></span><br><span class="line"><span class="string">    response = wrapped_callback(request, *callback_args, **callback_kwargs)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/views/decorators/csrf.py", line 58, in wrapped_view</span></span><br><span class="line"><span class="string">    return view_func(*args, **kwargs)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/views/generic/base.py", line 68, in view</span></span><br><span class="line"><span class="string">    return self.dispatch(request, *args, **kwargs)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/rest_framework/views.py", line 480, in dispatch</span></span><br><span class="line"><span class="string">    response = handler(request, *args, **kwargs)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/Documents/Code/shops/shops/shops/apps/verifications/views.py", line 82, in get</span></span><br><span class="line"><span class="string">    logger.info('</span>手机: %s 发送短信ok<span class="string">' % mobile)</span></span><br><span class="line"><span class="string">Message: '</span>手机: <span class="number">15167128625</span> 发送短信ok<span class="string">'</span></span><br><span class="line"><span class="string">Arguments: ()</span></span><br></pre></td></tr></table></figure><h2 id="核心错误代码"><a href="#核心错误代码" class="headerlink" title="核心错误代码"></a>核心错误代码</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">UnicodeEncodeError: <span class="string">'ascii'</span> codec can<span class="string">'t encode characters in position 38-39: ordinal not in range(128)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">.....</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"/Users/jetmo/Documents/Code/shops/shops/shops/apps/verifications/views.py", line 82, in get</span></span><br></pre></td></tr></table></figure><p>按道理讲, 从出现bug就没有会想到mac编码存在问题.<br></p><h2 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h2><p>在settings.py中的日志配置文件中添加<code>&#39;encoding&#39;: &#39;utf-8&#39;</code>就可以完美解决.<br>完美代码如下:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">LOGGING = &#123;</span><br><span class="line">    <span class="string">'version'</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">'disable_existing_loggers'</span>: <span class="keyword">False</span>,</span><br><span class="line">    <span class="string">'formatters'</span>: &#123;</span><br><span class="line">        <span class="string">'verbose'</span>: &#123;</span><br><span class="line">            <span class="string">'format'</span>: <span class="string">'%(levelname)s %(asctime)s %(module)s %(lineno)d %(message)s'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">'simple'</span>: &#123;</span><br><span class="line">            <span class="string">'format'</span>: <span class="string">'%(levelname)s %(module)s %(lineno)d %(message)s'</span></span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">'filters'</span>: &#123;</span><br><span class="line">        <span class="string">'require_debug_true'</span>: &#123;</span><br><span class="line">            <span class="string">'()'</span>: <span class="string">'django.utils.log.RequireDebugTrue'</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">'handlers'</span>: &#123;</span><br><span class="line">        <span class="string">'console'</span>: &#123;</span><br><span class="line">            <span class="string">'level'</span>: <span class="string">'DEBUG'</span>,</span><br><span class="line">            <span class="string">'filters'</span>: [<span class="string">'require_debug_true'</span>],</span><br><span class="line">            <span class="string">'class'</span>: <span class="string">'logging.StreamHandler'</span>,</span><br><span class="line">            <span class="string">'formatter'</span>: <span class="string">'simple'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">'file'</span>: &#123;</span><br><span class="line">            <span class="string">'level'</span>: <span class="string">'INFO'</span>,</span><br><span class="line">            <span class="string">'class'</span>: <span class="string">'logging.handlers.RotatingFileHandler'</span>,</span><br><span class="line">            <span class="string">'filename'</span>: os.path.join(os.path.dirname(BASE_DIR), <span class="string">"logs/meiduo.log"</span>),  <span class="comment"># 日志文件的位置</span></span><br><span class="line">            <span class="string">'maxBytes'</span>: <span class="number">300</span> * <span class="number">1024</span> * <span class="number">1024</span>,</span><br><span class="line">            <span class="string">'backupCount'</span>: <span class="number">10</span>,</span><br><span class="line">            <span class="string">'formatter'</span>: <span class="string">'verbose'</span>,</span><br><span class="line">            <span class="string">'encoding'</span>: <span class="string">'utf-8'</span>  <span class="comment"># 这里添加可以避免中文报错</span></span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">'loggers'</span>: &#123; <span class="comment"># 定义了一个名为django的日志器</span></span><br><span class="line">            <span class="string">'django'</span>: &#123;</span><br><span class="line">                <span class="string">'handlers'</span>: [<span class="string">'console'</span>, <span class="string">'file'</span>],</span><br><span class="line">                <span class="string">'propagate'</span>: <span class="keyword">True</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;出现的bug&quot;&gt;&lt;a href=&quot;#出现的bug&quot; class=&quot;headerlink&quot; title=&quot;出现的bug&quot;&gt;&lt;/a&gt;出现的bug&lt;/h2&gt;&lt;p&gt;django使用DRF框架。配置日志，如果有中文控制台会报错，但是在因为下就不会出现这样的错误，经过排查可以
      
    
    </summary>
    
      <category term="django" scheme="https://www.leejia.me/categories/django/"/>
    
    
      <category term="django" scheme="https://www.leejia.me/tags/django/"/>
    
      <category term="logging" scheme="https://www.leejia.me/tags/logging/"/>
    
  </entry>
  
  <entry>
    <title>rest_framework知识点之:方法get_seriazlier</title>
    <link href="https://www.leejia.me/django/django_rest_framework_get_seriazlier.html"/>
    <id>https://www.leejia.me/django/django_rest_framework_get_seriazlier.html</id>
    <published>2018-09-09T07:29:44.000Z</published>
    <updated>2018-09-09T08:00:01.435Z</updated>
    
    <content type="html"><![CDATA[<p>rest_framework中get_seriazlier()方法的作用.</p><h2 id="先看案例"><a href="#先看案例" class="headerlink" title="先看案例"></a>先看案例</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SMSCodeView</span><span class="params">(GenericAPIView)</span>:</span></span><br><span class="line">    <span class="string">"""短信验证码"""</span></span><br><span class="line">    <span class="comment"># 参数: mobile image_code_id, text</span></span><br><span class="line">    serializer_class = ImageCodeCheckSerializer()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, request, mobile)</span>:</span></span><br><span class="line">        <span class="comment"># 校验参数 (序列化器完成)</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># self.get_serializer()的目的是把request, view, format 传到序列化器中.(看源码)</span></span><br><span class="line">        serializer = self.get_serializer(data=request.query_params)</span><br><span class="line">        serializer.is_valid(raise_exception=<span class="keyword">True</span>)</span><br><span class="line">        ...省略代码...</span><br></pre></td></tr></table></figure><p>这里<code>serializer = self.get_serializer(data=request.query_params)</code>目的有三个:<br>1.获取序列化器.<code>serializer_class = ImageCodeCheckSerializer()</code>.<br>2.断言<br>3.把request, view,format传到序列化器中,以供序列化器校验.(如果不看源码,这里会比较难理解.)</p><h2 id="看源码"><a href="#看源码" class="headerlink" title="看源码"></a>看源码</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GenericAPIView</span><span class="params">(views.APIView)</span>:</span></span><br><span class="line">    ...无关代码省略...</span><br><span class="line">    queryset = <span class="keyword">None</span></span><br><span class="line">    serializer_class = <span class="keyword">None</span></span><br><span class="line"></span><br><span class="line">    ...无关代码省略...</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_serializer</span><span class="params">(self, *args, **kwargs)</span>:</span></span><br><span class="line">        ...无关代码省略...</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 这里调用方法get_serializer_class() 目的就是返回序列化器!!</span></span><br><span class="line">        serializer_class = self.get_serializer_class()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 这里目的是获取参数并分装到字典中: reques, format, view</span></span><br><span class="line">        kwargs[<span class="string">'context'</span>] = self.get_serializer_context()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 这里目的是返回序列化器(此时已经把参数封装进去了.)</span></span><br><span class="line">        <span class="keyword">return</span> serializer_class(*args, **kwargs)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_serializer_class</span><span class="params">(self)</span>:</span></span><br><span class="line">        </span><br><span class="line">        ...注释和断言干掉不需要看...</span><br><span class="line">        <span class="comment"># 这是目的是: 返回类属性:序列化器</span></span><br><span class="line">        <span class="keyword">return</span> self.serializer_class</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_serializer_context</span><span class="params">(self)</span>:</span></span><br><span class="line">        ...注释不需要看...</span><br><span class="line">        <span class="comment"># 这里目的是返回当前类视图的request, format, view并赋值</span></span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="string">'request'</span>: self.request,</span><br><span class="line">            <span class="string">'format'</span>: self.format_kwarg,</span><br><span class="line">            <span class="string">'view'</span>: self</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>自此: 看明白才能理解为什么明明类属性中明明有序列化器我们还需要绕一大圈去获取序列化器.<br>原因很明确,就是为了把参数传递到序列化器中,以便序列化器做校验.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;rest_framework中get_seriazlier()方法的作用.&lt;/p&gt;
&lt;h2 id=&quot;先看案例&quot;&gt;&lt;a href=&quot;#先看案例&quot; class=&quot;headerlink&quot; title=&quot;先看案例&quot;&gt;&lt;/a&gt;先看案例&lt;/h2&gt;&lt;figure class=&quot;highl
      
    
    </summary>
    
      <category term="django" scheme="https://www.leejia.me/categories/django/"/>
    
    
      <category term="django" scheme="https://www.leejia.me/tags/django/"/>
    
      <category term="rest_framework" scheme="https://www.leejia.me/tags/rest-framework/"/>
    
  </entry>
  
  <entry>
    <title>时间戳转换的几种方法</title>
    <link href="https://www.leejia.me/python/timestamp.html"/>
    <id>https://www.leejia.me/python/timestamp.html</id>
    <published>2018-09-05T00:49:57.000Z</published>
    <updated>2018-09-05T01:01:53.989Z</updated>
    
    <content type="html"><![CDATA[<h2 id="格式化"><a href="#格式化" class="headerlink" title="格式化"></a>格式化</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 第一种</span></span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line">timestamp = <span class="number">1536108815</span>  <span class="comment"># 如果是从网页解析出来的是字符串,需要转int</span></span><br><span class="line">dateArray = datetime.datetime.utcfromtimestamp(int(timestamp))</span><br><span class="line">styletime = dateArray.strftime(<span class="string">"%Y-%m-%d %H:%M:%S"</span>)</span><br><span class="line">prtint(styletime)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第二种</span></span><br><span class="line">ts = <span class="number">1515774430</span></span><br><span class="line">dt = time.strftime(<span class="string">"%Y-%m-%d %H:%M:%S"</span>, time.localtime(ts))</span><br><span class="line">print(dt)</span><br></pre></td></tr></table></figure><h2 id="获取时间戳"><a href="#获取时间戳" class="headerlink" title="获取时间戳"></a>获取时间戳</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line">t = time.time()</span><br><span class="line">print(t)</span><br></pre></td></tr></table></figure><h2 id="转时间戳"><a href="#转时间戳" class="headerlink" title="转时间戳"></a>转时间戳</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">dt = <span class="string">'2018-02-01 02:40:30'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 先把日期字符串转为 日期对象,然后再把日期对象转为时间戳</span></span><br><span class="line">ts = int(time.mktime(time.strptime(dt, <span class="string">"%Y-%m-%d %H:%M:%S"</span>)))</span><br><span class="line"><span class="keyword">print</span> (ts)</span><br></pre></td></tr></table></figure><blockquote><p>获取时间,获取时间戳,时间戳转化,python提供很多模块,可以多google.</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;格式化&quot;&gt;&lt;a href=&quot;#格式化&quot; class=&quot;headerlink&quot; title=&quot;格式化&quot;&gt;&lt;/a&gt;格式化&lt;/h2&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;
      
    
    </summary>
    
      <category term="python" scheme="https://www.leejia.me/categories/python/"/>
    
    
      <category term="时间戳" scheme="https://www.leejia.me/tags/%E6%97%B6%E9%97%B4%E6%88%B3/"/>
    
      <category term="timetamp" scheme="https://www.leejia.me/tags/timetamp/"/>
    
      <category term="datetime" scheme="https://www.leejia.me/tags/datetime/"/>
    
      <category term="time" scheme="https://www.leejia.me/tags/time/"/>
    
  </entry>
  
  <entry>
    <title>python中url编解码问题</title>
    <link href="https://www.leejia.me/python/python_url_decode_encode.html"/>
    <id>https://www.leejia.me/python/python_url_decode_encode.html</id>
    <published>2018-09-04T01:22:05.000Z</published>
    <updated>2018-09-04T01:28:32.993Z</updated>
    
    <content type="html"><![CDATA[<h2 id="普通字符串的处理"><a href="#普通字符串的处理" class="headerlink" title="普通字符串的处理"></a>普通字符串的处理</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> parse</span><br><span class="line"></span><br><span class="line">str1 = <span class="string">'haha哈哈'</span></span><br><span class="line">str2 = parse.quote(str1)   <span class="comment">#quote()将字符串进行编码</span></span><br><span class="line">print(str2)                <span class="comment">#str2=haha%E5%93%88%E5%93%88</span></span><br><span class="line">str3 = parse.unquote(str2) <span class="comment">#解码字符串</span></span><br><span class="line">print(str3)                <span class="comment">#str3=haha哈哈</span></span><br></pre></td></tr></table></figure><h2 id="url的处理"><a href="#url的处理" class="headerlink" title="url的处理"></a>url的处理</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> parse</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">url = <span class="string">'http://www.baidu.com/s?'</span></span><br><span class="line">dict1 =&#123;<span class="string">'wd'</span>: <span class="string">'百度翻译'</span>&#125;</span><br><span class="line">url_data = parse.urlencode(dict1) <span class="comment">#unlencode()将字典&#123;k1:v1,k2:v2&#125;转化为k1=v1&amp;k2=v2</span></span><br><span class="line">print(url_data)             <span class="comment">#url_data：wd=%E7%99%BE%E5%BA%A6%E7%BF%BB%E8%AF%91</span></span><br><span class="line"></span><br><span class="line">data = requests.get((url+url_data)).text <span class="comment">#读取url响应结果</span></span><br><span class="line">data = data.decode(<span class="string">'utf-8'</span>) <span class="comment">#将响应结果用utf8编码</span></span><br><span class="line">print(data)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">url_org = parse.unquote(url_data) <span class="comment">#解码url</span></span><br><span class="line">print(url_org)              <span class="comment">#url_org：wd=百度翻译</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;普通字符串的处理&quot;&gt;&lt;a href=&quot;#普通字符串的处理&quot; class=&quot;headerlink&quot; title=&quot;普通字符串的处理&quot;&gt;&lt;/a&gt;普通字符串的处理&lt;/h2&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td c
      
    
    </summary>
    
      <category term="python" scheme="https://www.leejia.me/categories/python/"/>
    
    
      <category term="unquote" scheme="https://www.leejia.me/tags/unquote/"/>
    
      <category term="quote" scheme="https://www.leejia.me/tags/quote/"/>
    
  </entry>
  
  <entry>
    <title>json和xml互转</title>
    <link href="https://www.leejia.me/code/json2xml_xml2json.html"/>
    <id>https://www.leejia.me/code/json2xml_xml2json.html</id>
    <published>2018-09-03T08:15:06.000Z</published>
    <updated>2018-09-17T02:28:11.880Z</updated>
    
    <content type="html"><![CDATA[<p>json和xml互转.借助的模块<code>xmltodict</code></p><h2 id="json2xml"><a href="#json2xml" class="headerlink" title="json2xml"></a>json2xml</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> xmltodict</span><br><span class="line"><span class="comment">#json转xml函数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">jsontoxml</span><span class="params">(jsonstr)</span>:</span></span><br><span class="line">    <span class="comment">#xmltodict库的unparse()json转xml</span></span><br><span class="line">    xmlstr = xmltodict.unparse(jsonstr)</span><br><span class="line">    print(xmlstr)</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    json_str = &#123;</span><br><span class="line">        <span class="string">'student'</span>: &#123;</span><br><span class="line">            <span class="string">'course'</span>: &#123;</span><br><span class="line">                <span class="string">'name'</span>: <span class="string">'math'</span>,</span><br><span class="line">                <span class="string">'score'</span>: <span class="string">'90'</span></span><br><span class="line">                &#125;,</span><br><span class="line">            <span class="string">'info'</span>: &#123;</span><br><span class="line">                <span class="string">'sex'</span>: <span class="string">'male'</span>,</span><br><span class="line">                <span class="string">'name'</span>: <span class="string">'name'</span></span><br><span class="line">                &#125;, </span><br><span class="line">            <span class="string">'stid'</span>: <span class="string">'10213'</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    jsontoxml(json_str)</span><br></pre></td></tr></table></figure><h2 id="xml2json"><a href="#xml2json" class="headerlink" title="xml2json"></a>xml2json</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> xmltodict</span><br><span class="line"><span class="comment">#定义xml转json的函数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">xmltojson</span><span class="params">(xmlstr)</span>:</span></span><br><span class="line">    <span class="comment">#parse是的xml解析器</span></span><br><span class="line">    xmlparse = xmltodict.parse(xmlstr)</span><br><span class="line">    <span class="comment">#json库dumps()是将dict转化成json格式，loads()是将json转化成dict格式。</span></span><br><span class="line">    <span class="comment">#dumps()方法的ident=1，格式化json</span></span><br><span class="line">    jsonstr = json.dumps(xmlparse,indent=<span class="number">1</span>)</span><br><span class="line">    print(jsonstr)</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    xml =<span class="string">"""&lt;student&gt;</span></span><br><span class="line"><span class="string">    &lt;stid&gt;10213&lt;/stid&gt;</span></span><br><span class="line"><span class="string">    &lt;info&gt;</span></span><br><span class="line"><span class="string">        &lt;name&gt;name&lt;/name&gt;</span></span><br><span class="line"><span class="string">        &lt;sex&gt;male&lt;/sex&gt;</span></span><br><span class="line"><span class="string">    &lt;/info&gt;</span></span><br><span class="line"><span class="string">    &lt;course&gt;</span></span><br><span class="line"><span class="string">        &lt;name&gt;math&lt;/name&gt;</span></span><br><span class="line"><span class="string">        &lt;score&gt;90&lt;/score&gt;</span></span><br><span class="line"><span class="string">    &lt;/course&gt;</span></span><br><span class="line"><span class="string">&lt;/student&gt;"""</span></span><br><span class="line"></span><br><span class="line">    xmltojson(xml)  <span class="comment">#调用转换函数</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;json和xml互转.借助的模块&lt;code&gt;xmltodict&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&quot;json2xml&quot;&gt;&lt;a href=&quot;#json2xml&quot; class=&quot;headerlink&quot; title=&quot;json2xml&quot;&gt;&lt;/a&gt;json2xml&lt;/h2&gt;&lt;fi
      
    
    </summary>
    
      <category term="code" scheme="https://www.leejia.me/categories/code/"/>
    
    
      <category term="json" scheme="https://www.leejia.me/tags/json/"/>
    
      <category term="xml" scheme="https://www.leejia.me/tags/xml/"/>
    
  </entry>
  
</feed>
