<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>apschedulerå‡ºç°Unable to determine the name of the local timezoneçš„è§£å†³æ–¹æ³•</title>
      <link href="/python/Unable-to-determine-the-name-of-the-local-timezone.html"/>
      <url>/python/Unable-to-determine-the-name-of-the-local-timezone.html</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©å†™äº†ä¸€ä¸ªå®šæ—¶ä»»åŠ¡,å®ç°æ¯å¤©æ¨é€ä¿¡æ¯åˆ°å¾®ä¿¡ä¸Š, ä»£ç åœ¨macbookpro ä¸Šè·‘èµ·æ¥çš„æ—¶å€™éå¸¸é¡ºç•….ä½†æ˜¯éƒ¨ç½²åˆ°centoså°±ä¸å¯¹äº†, ä¸€ä¸ªåŠ²çš„ç»™æˆ‘æŠ¥é”™.<br><code>ValueError: Unable to determine the name of the local timezone -- you must explicitly specify the name of the local timezone. Please refrain from using timezones like EST to prevent problems with daylight saving time. Instead, use a locale based timezone name (such as Europe/Helsinki).</code><br>å…·ä½“ä»£ç åœ¨ä¸‹é¢:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">2018-10-09 06:18:48 å¼€å§‹æ‰§è¡Œä»»åŠ¡</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"goodmorning.py"</span>, line 113, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    goodmorning.run()</span><br><span class="line">  File <span class="string">"goodmorning.py"</span>, line 106, <span class="keyword">in</span> run</span><br><span class="line">    scheduler.add_job(self.make, <span class="string">'cron'</span>, day_of_week=<span class="string">'0-6'</span>, hour=7, minute=30, second=00)</span><br><span class="line">  File <span class="string">"/root/goodmorning/venv/lib/python3.4/site-packages/apscheduler/schedulers/base.py"</span>, line 416, <span class="keyword">in</span> add_job</span><br><span class="line">    <span class="string">'trigger'</span>: self._create_trigger(trigger, trigger_args),</span><br><span class="line">  File <span class="string">"/root/goodmorning/venv/lib/python3.4/site-packages/apscheduler/schedulers/base.py"</span>, line 918, <span class="keyword">in</span> _create_trigger</span><br><span class="line">    <span class="built_in">return</span> self._create_plugin_instance(<span class="string">'trigger'</span>, trigger, trigger_args)</span><br><span class="line">  File <span class="string">"/root/goodmorning/venv/lib/python3.4/site-packages/apscheduler/schedulers/base.py"</span>, line 903, <span class="keyword">in</span> _create_plugin_instance</span><br><span class="line">    <span class="built_in">return</span> plugin_cls(**constructor_kwargs)</span><br><span class="line">  File <span class="string">"/root/goodmorning/venv/lib/python3.4/site-packages/apscheduler/triggers/cron/__init__.py"</span>, line 52, <span class="keyword">in</span> __init__</span><br><span class="line">    self.timezone = astimezone(timezone)</span><br><span class="line">  File <span class="string">"/root/goodmorning/venv/lib/python3.4/site-packages/apscheduler/util.py"</span>, line 87, <span class="keyword">in</span> astimezone</span><br><span class="line">    <span class="string">'Unable to determine the name of the local timezone -- you must explicitly '</span></span><br><span class="line">ValueError: Unable to determine the name of the <span class="built_in">local</span> timezone -- you must explicitly specify the name of the <span class="built_in">local</span> timezone. Please refrain from using timezones like EST to prevent problems with daylight saving time. Instead, use a locale based timezone name (such as Europe/Helsinki).</span><br></pre></td></tr></table></figure></p><h2 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">timedatectl <span class="built_in">set</span>-timezone Asia/Shanghai</span><br></pre></td></tr></table></figure><p>è¿™æ ·æ—¢å¯ä»¥è§£å†³æ‰¾ä¸åˆ°timezoneçš„é—®é¢˜.è¿˜å¯ä»¥æŠŠå¤±å»ä¿®æ”¹æˆä¸Šæµ·(åšä¸»çš„æœåŠ¡å™¨åœ¨ç¾å›½.ä¾¿å®œå•Š.è€Œä¸”å¥½åƒ.meåŸŸååœ¨å›½å†…æ— æ³•å¤‡æ¡ˆäº†.)</p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> apscheduler </tag>
            
            <tag> python </tag>
            
            <tag> timezone </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>æ¯å¤©å®šæ—¶ä»»åŠ¡APScheduleræ¨¡å—</title>
      <link href="/python/module_APScheduler.html"/>
      <url>/python/module_APScheduler.html</url>
      
        <content type="html"><![CDATA[<p>æœ‰çš„æ—¶å€™æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œæ¯å¤©åŒä¸€æ—¶é—´ç‚¹å»å‘é€ã€‚è¿™æ—¶å€™ï¼Œå°±éœ€è¦å†™ä¸€ä¸ªå®šæ—¶ä»»åŠ¡äº†ã€‚è¿™é‡Œæˆ‘ä»¬ç”¨åˆ°äº†APSchedulerè¿™ä¸ªåº“ï¼Œä¸äº†è§£çš„å»çœ‹ä¸€ä¸‹å®˜æ–¹æ–‡æ¡£ï¼Œè¿™é‡Œä»¥æ¯å¤©æ—©ä¸Š8ç‚¹é’Ÿä¸ºä¾‹ã€‚</p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install APScheduler</span><br></pre></td></tr></table></figure><h2 id="APScheduler"><a href="#APScheduler" class="headerlink" title="APScheduler"></a>APScheduler</h2><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">APScheduleræ˜¯ä¸€ä¸ª<span class="keyword">python</span>çš„ç¬¬ä¸‰æ–¹åº“ï¼Œç”¨æ¥æä¾›<span class="keyword">python</span>çš„åå°ç¨‹åºã€‚åŒ…å«å››ä¸ªç»„ä»¶ï¼Œåˆ†åˆ«æ˜¯ï¼š</span><br><span class="line"></span><br><span class="line">triggersï¼š ä»»åŠ¡è§¦å‘å™¨ç»„ä»¶ï¼Œæä¾›ä»»åŠ¡è§¦å‘æ–¹å¼</span><br><span class="line"></span><br><span class="line">job storesï¼š ä»»åŠ¡å•†åº—ç»„ä»¶ï¼Œæä¾›ä»»åŠ¡ä¿å­˜æ–¹å¼</span><br><span class="line"></span><br><span class="line">executorsï¼š ä»»åŠ¡è°ƒåº¦ç»„ä»¶ï¼Œæä¾›ä»»åŠ¡è°ƒåº¦æ–¹å¼</span><br><span class="line"></span><br><span class="line">schedulersï¼š ä»»åŠ¡è°ƒåº¦ç»„ä»¶ï¼Œæä¾›ä»»åŠ¡å·¥ä½œæ–¹å¼</span><br></pre></td></tr></table></figure><h2 id="å…¥é—¨"><a href="#å…¥é—¨" class="headerlink" title="å…¥é—¨"></a>å…¥é—¨</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> apscheduler.schedulers.blocking <span class="keyword">import</span> BlockingScheduler</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®ä¾‹åŒ–ä¸€ä¸ªè°ƒåº¦å™¨</span></span><br><span class="line">scheduler = BlockingScheduler()</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">job1</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"%s: æ‰§è¡Œä»»åŠ¡"</span>  % time.asctime()</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ ä»»åŠ¡å¹¶è®¾ç½®è§¦å‘æ–¹å¼ä¸º3sä¸€æ¬¡</span></span><br><span class="line">scheduler.add_job(job1, <span class="string">'interval'</span>, seconds=<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼€å§‹è¿è¡Œè°ƒåº¦å™¨</span></span><br><span class="line">scheduler.start()</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    print(get_time() + <span class="string">" å¼€å§‹æ‰§è¡Œä»»åŠ¡"</span>)</span><br><span class="line">    scheduler.add_job(ä»»åŠ¡å‡½æ•°, <span class="string">'cron'</span>, day_of_week=<span class="string">'0-6'</span>, hour=<span class="number">8</span>, minute=<span class="number">00</span>, second=<span class="number">00</span>)</span><br><span class="line">    scheduler.start()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> APScheduler </tag>
            
            <tag> å®šæ—¶ä»»åŠ¡ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>macå®‰è£…pyv8æ¨¡å—</title>
      <link href="/code/install_pyv8.html"/>
      <url>/code/install_pyv8.html</url>
      
        <content type="html"><![CDATA[<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¬¬ä¸€ç§</span></span><br><span class="line">pip install -e git://github.com/brokenseal/PyV8-OS-X<span class="comment">#egg=pyv8 </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¬¬äºŒç§</span></span><br><span class="line">https://github.com/emmetio/pyv8-binaries ä¸‹è½½å¯¹åº”çš„åŒ…è§£å‹æ”¾åˆ°pythonæ¨¡å—æ–‡ä»¶å¤¹ä¸­</span><br></pre></td></tr></table></figure><p>ä¿æŒç½‘ç»œç•…é€š, ç„¶åç­‰å¾…â€¦ å°±æˆåŠŸäº†.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Last login: Mon Oct  8 13:31:59 on ttys000</span><br><span class="line">Page: www.leejia.me</span><br><span class="line">NickName: Leejia</span><br><span class="line">âœ  ~ pip install -e git://github.com/brokenseal/PyV8-OS-X<span class="comment">#egg=pyv8 </span></span><br><span class="line">Looking <span class="keyword">in</span> indexes: http://mirrors.aliyun.com/pypi/simple</span><br><span class="line">Obtaining pyv8 from git+git://github.com/brokenseal/PyV8-OS-X<span class="comment">#egg=pyv8</span></span><br><span class="line">  Cloning git://github.com/brokenseal/PyV8-OS-X to ./src/pyv8</span><br><span class="line">Installing collected packages: pyv8</span><br><span class="line">  Running setup.py develop <span class="keyword">for</span> pyv8</span><br><span class="line">Successfully installed pyv8</span><br><span class="line">You are using pip version 18.0, however version 18.1 is available.</span><br><span class="line">You should consider upgrading via the <span class="string">'pip install --upgrade pip'</span> <span class="built_in">command</span>.</span><br><span class="line">âœ  ~ ipython3</span><br></pre></td></tr></table></figure></p><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">âœ  ~ ipython3</span><br><span class="line">Python 3.6.5 (v3.6.5:f59c0932b4, Mar 28 2018, 05:52:31) </span><br><span class="line">Type <span class="string">'copyright'</span>, <span class="string">'credits'</span> or <span class="string">'license'</span> <span class="keyword">for</span> more information</span><br><span class="line">IPython 6.4.0 -- An enhanced Interactive Python. Type <span class="string">'?'</span> <span class="keyword">for</span> <span class="built_in">help</span>.</span><br><span class="line"></span><br><span class="line">In [1]: import pyv8</span><br><span class="line"></span><br><span class="line">In [2]:</span><br></pre></td></tr></table></figure><p><code>import pyv8</code> æ²¡æœ‰æŠ¥é”™å°±è¡¨ç¤ºæˆåŠŸäº†.</p><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Author  : Leejia</span></span><br><span class="line"><span class="comment"># @Blog    ï¼šwww.leejia.me</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> pyv8 <span class="keyword">import</span> _PyV8 <span class="keyword">as</span> PyV8</span><br><span class="line"></span><br><span class="line">ctxt = PyV8.JSContext()</span><br><span class="line">ctxt.enter()</span><br><span class="line">func = ctxt.eval(<span class="string">"""</span></span><br><span class="line"><span class="string">    (function()&#123;</span></span><br><span class="line"><span class="string">        function hello()&#123;</span></span><br><span class="line"><span class="string">            return "Hello world.";</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        return hello();</span></span><br><span class="line"><span class="string">    &#125;)</span></span><br><span class="line"><span class="string">"""</span>)</span><br><span class="line">print(func())</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> pyv8 </tag>
            
            <tag> mac </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>åšå®¢å¯ç”¨æ–°ä¸»é¢˜</title>
      <link href="/code/blog_use_new_theme.html"/>
      <url>/code/blog_use_new_theme.html</url>
      
        <content type="html"><![CDATA[<ul><li><p>åšå®¢ä¹‹å‰ä¸€ç›´ä½¿ç”¨çš„æ˜¯<a href="https://github.com/tufu9441/maupassant-hexo" target="_blank" rel="noopener">Maupassant</a>.éå¸¸æ„Ÿè°¢<a href="https://www.haomwei.com" target="_blank" rel="noopener">å± åŸ</a>,æä¾›è¿™æ¬¾æ¼‚äº®ç®€æ´çš„ä¸»é¢˜.</p></li><li><p>ä»Šå¤©å¯ç”¨äº†<a href="https://github.com/cofess/" target="_blank" rel="noopener">cofess</a> å¼€å‘çš„ä¸»é¢˜<a href="https://github.com/cofess/hexo-theme-pure" target="_blank" rel="noopener">pure</a> .è¿™æ¬¾ä¸»é¢˜åœ¨Hexoå®˜æ–¹çš„ä¸»é¢˜åº“ä¸­æœ‰.ä¸€æ¬¾éå¸¸æ¼‚äº®çš„ä¸»é¢˜.</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> theme </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Hexoç”Ÿæˆçš„RSSæ–‡ä»¶atom.xmlæŠ¥é”™</title>
      <link href="/code/id_rss_vscode_bug.html"/>
      <url>/code/id_rss_vscode_bug.html</url>
      
        <content type="html"><![CDATA[<p>Hexo ç”Ÿæˆçš„ RSS çš„ atom.xml æŠ¥é”™ PCDATA invalid Char valueï¼Œäº§ç”Ÿè¿™æ ·çš„åŸå› å°±æ˜¯ Markdown æ–‡ä»¶ä¸­æœ‰ç‰¹æ®Šå­—ç¬¦ã€‚</p><h2 id="æ’ä»¶"><a href="#æ’ä»¶" class="headerlink" title="æ’ä»¶"></a>æ’ä»¶</h2><p>æˆ‘ä½¿ç”¨ <a href="https://github.com/hexojs/hexo-generator-feed" target="_blank" rel="noopener">hexo-generator-feed</a> æ¥ç”Ÿæˆ Feed çš„<code>atom.xml</code>æ–‡ä»¶</p><h2 id="é”™è¯¯"><a href="#é”™è¯¯" class="headerlink" title="é”™è¯¯"></a>é”™è¯¯</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹ atom.xmlï¼Œå‘ç°æŠ¥é”™ï¼Œä¿¡æ¯å¦‚ä¸‹ã€‚</span><br><span class="line"></span><br><span class="line">This page contains the following errors:</span><br><span class="line">error on line 264 at column 168: PCDATA invalid Char value 8</span><br><span class="line">Below is a rendering of the page up to the first error.</span><br></pre></td></tr></table></figure><p>å› ä¸ºæ˜¯ä½¿ç”¨çš„æ˜¯vscodeç›´æ¥ç¼–è¾‘çš„,è¿™ä¸ªç¼–è¾‘å™¨æœ‰ä¸ªé—®é¢˜ä¼šäº§ç”Ÿ<code>^H</code>è¿™ä¸ªå­—ç¬¦,è¿™ä¸ªå¯¼è‡´xmlæ— æ³•æ¸²æŸ“.è€Œä¸”åœ¨vscode,typoraä¸­è¿™ä¸ªå­—ç¬¦éƒ½ä¸ä¼šæ˜¾ç¤º, ç”¨vimç¼–è¾‘å™¨æ‰“å¼€å°±å¯ä»¥çœ‹åˆ°<code>^H</code></p><h2 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h2><p>ç”¨vimç¼–è¾‘å™¨æ‰“å¼€å°±å¯ä»¥çœ‹åˆ°<code>^H</code>ç„¶åæŒ¨ä¸ªåˆ æ‰.</p><p>ç„¶ååœ¨ä½¿ç”¨å‘½ä»¤é‡æ–°ç”Ÿæˆä¸€ä¸‹<code>atom.xml</code>æ–‡ä»¶</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> rss </tag>
            
            <tag> vscode </tag>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>pythonä¸­printåº•å±‚è°ƒç”¨äº†ä»€ä¹ˆæ–¹æ³•</title>
      <link href="/python/python_source_code.html"/>
      <url>/python/python_source_code.html</url>
      
        <content type="html"><![CDATA[<h2 id="print"><a href="#print" class="headerlink" title="print"></a>print</h2><p>å‡½æ•°print()åº•å±‚è°ƒç”¨çš„æ˜¯sys.stdout.write()æ¥å®ç°æ‰“å°å­—ç¬¦ä¸²æ§åˆ¶å°,ä½†æ˜¯print()åˆä¸åŒäºsys.stdout.write()</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Author  : Leejia</span></span><br><span class="line"><span class="comment"># @Blog    ï¼šwww.leejia.me</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">print(__file__)</span><br><span class="line">print(<span class="string">'hello, Leejia'</span>)</span><br><span class="line">print(<span class="string">'-'</span> * <span class="number">10</span>)</span><br><span class="line">sys.stdout.write(<span class="string">'hello, Leejia'</span>)</span><br><span class="line">print(<span class="string">'leeeeeee'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡ºç»“æœ:</span></span><br><span class="line">/Users/jetmo/Documents/Code/shops/print_input_test.py</span><br><span class="line">hello, Leejia</span><br><span class="line">----------</span><br><span class="line">hello, Leejialeeeeeee</span><br><span class="line"></span><br><span class="line">Process finished <span class="keyword">with</span> exit code <span class="number">0</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹çœ‹å‡ºæ¥, sys.stdout.write æ˜¯æ²¡æœ‰è‡ªåŠ¨æ¢è¡Œçš„</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sys.stdout.write(<span class="string">'hello, Leejia'</span>)</span><br><span class="line">print(<span class="string">'leeeeeee'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»“æœ: </span></span><br><span class="line">hello, Leejialeeeeeee</span><br></pre></td></tr></table></figure><p>sys.stdout.write åªèƒ½æ¥å—ä¸€ä¸ªå‚æ•°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sys.stdout.write(<span class="string">'hello, Leejia'</span>, <span class="string">'test'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»“æœ:</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"/Users/jetmo/Documents/Code/shops/print_input_test.py"</span>, line <span class="number">12</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    sys.stdout.write(<span class="string">'hello, Leejia'</span>, <span class="string">'test'</span>)</span><br><span class="line">TypeError: write() takes exactly one argument (<span class="number">2</span> given)</span><br></pre></td></tr></table></figure><p>sys.stdout.write åªèƒ½æ¥å—å­—ç¬¦ä¸²</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sys.stdout.write(<span class="number">123</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»“æœ</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"/Users/jetmo/Documents/Code/shops/print_input_test.py"</span>, line <span class="number">14</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    sys.stdout.write(<span class="number">123</span>)</span><br><span class="line">TypeError: write() argument must be str, <span class="keyword">not</span> int</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> input </tag>
            
            <tag> åº•å±‚æºç  </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>å…³äºubuntuæ¸…ç†åƒåœ¾</title>
      <link href="/code/clean_your_ubuntu.html"/>
      <url>/code/clean_your_ubuntu.html</url>
      
        <content type="html"><![CDATA[<p>MBPä¸Šå®‰è£…äº†ubuntu16.04è™šæ‹Ÿæœº,éšç€ä½¿ç”¨æ—¶é—´è¶Šé•¿, å¯¼è‡´ç¼“å­˜,æ— æ•ˆçš„é…ç½®æ–‡ä»¶ç­‰å ç”¨ç©ºé—´ç‰¹åˆ«çš„å¤§.ç›®å‰æœ‰22Gå¤š.äºæ˜¯åœ¨ç½‘ä¸Šæ‰¾äº†ä¸€ä¸ªæ¸…ç†æ–¹æ³•.</p><p>Ubuntu Linuxä¸Windowsç³»ç»Ÿä¸åŒï¼ŒUbuntu Linuxä¸ä¼šäº§ç”Ÿæ— ç”¨åƒåœ¾æ–‡ä»¶ï¼Œä½†æ˜¯åœ¨å‡çº§ç¼“å­˜ä¸­ï¼ŒUbuntu Linuxä¸ä¼šè‡ªåŠ¨åˆ é™¤è¿™äº›æ–‡ä»¶ï¼Œä»Šå¤©å°±æ¥è¯´è¯´è¿™äº›åƒåœ¾æ–‡ä»¶æ¸…ç†æ–¹æ³•ã€‚</p><h2 id="éå¸¸æœ‰ç”¨çš„æ¸…ç†å‘½ä»¤ï¼š"><a href="#éå¸¸æœ‰ç”¨çš„æ¸…ç†å‘½ä»¤ï¼š" class="headerlink" title="éå¸¸æœ‰ç”¨çš„æ¸…ç†å‘½ä»¤ï¼š"></a>éå¸¸æœ‰ç”¨çš„æ¸…ç†å‘½ä»¤ï¼š</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get autoclean <span class="comment"># --æ¸…ç†æ—§ç‰ˆæœ¬çš„è½¯ä»¶ç¼“å­˜ OK(å·²ç»å¸è½½æ‰çš„è½¯ä»¶åŒ…)</span></span><br><span class="line">sudo apt-get clean  <span class="comment"># --æ¸…ç†æ‰€æœ‰è½¯ä»¶ç¼“å­˜ OK(ç”µè„‘ä¸Šå­˜å‚¨çš„å®‰è£…åŒ…)</span></span><br><span class="line">sudo apt-get autoremove  <span class="comment"># --åˆ é™¤ç³»ç»Ÿä¸å†ä½¿ç”¨çš„å­¤ç«‹è½¯ä»¶ OK</span></span><br><span class="line">(å·²ç»å¸è½½äº†ï¼Œä½†æ˜¯ä¸€äº›åªæœ‰å®ƒä¾èµ–è€Œåˆ«çš„è½¯ä»¶åŒ…éƒ½ä¸éœ€è¦çš„è½¯ä»¶åŒ…)</span><br></pre></td></tr></table></figure><p>è¿™ä¸‰ä¸ªå‘½ä»¤ä¸»è¦æ¸…ç†å‡çº§ç¼“å­˜ä»¥åŠæ— ç”¨åŒ…çš„ã€‚</p><h2 id="æ¸…ç†Linuxä¸‹å­¤ç«‹çš„åŒ…ï¼š"><a href="#æ¸…ç†Linuxä¸‹å­¤ç«‹çš„åŒ…ï¼š" class="headerlink" title="æ¸…ç†Linuxä¸‹å­¤ç«‹çš„åŒ…ï¼š"></a>æ¸…ç†Linuxä¸‹å­¤ç«‹çš„åŒ…ï¼š</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">å›¾å½¢ç•Œé¢ä¸‹æˆ‘ä»¬å¯ä»¥ç”¨ï¼šgtkorphan</span><br><span class="line">sudo apt-get install gtkorphan -y</span><br><span class="line">ç»ˆç«¯å‘½ä»¤ä¸‹æˆ‘ä»¬å¯ä»¥ç”¨ï¼šdeborphan</span><br><span class="line">sudo apt-get install deborphan -y</span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤å¤šä½™çš„å†…æ ¸-åœ¨1ä¸­å·²æ¸…ç†"><a href="#åˆ é™¤å¤šä½™çš„å†…æ ¸-åœ¨1ä¸­å·²æ¸…ç†" class="headerlink" title="åˆ é™¤å¤šä½™çš„å†…æ ¸(åœ¨1ä¸­å·²æ¸…ç†)"></a>åˆ é™¤å¤šä½™çš„å†…æ ¸(åœ¨1ä¸­å·²æ¸…ç†)</h2><p>(åœ¨ç»ˆç«¯ä¸­è¾“å…¥uname -aï¼Œç„¶åçœ‹å…¶æ˜¾ç¤ºçš„ç°ç”¨å†…æ ¸ç‰ˆæœ¬æ˜¯å¤šå°‘)<br>(ä¸åˆ é™¤æ‰è€çš„å†…æ ¸ï¼Œä»¥ä¾¿äºä½¿ç”¨æ–°å‡çº§çš„å†…æ ¸æ— æ³•å¯åŠ¨æ—¶ï¼Œä½ èƒ½é©¬ä¸Šä½¿ç”¨è€å†…æ ¸è¿›è¡Œå¯åŠ¨ï¼Œä¸è‡³äºå¯¼è‡´ä½ æ— æ³•è¿›å…¥ç³»ç»Ÿçš„æ‚²å‰§ã€‚ä¸è¿‡åœ¨ä½ å‡çº§å®Œæ¯•ï¼Œé‡å¯åèƒ½è¿›å…¥ç³»ç»Ÿåï¼Œè¯´æ˜æ–°å†…æ ¸å·²ç»å¾ˆå¥½çš„å…¼å®¹äº†ä½ çš„ç”µè„‘ï¼Œé‚£ä¹ˆä½ å°±å¯ä»¥æ”¾å¿ƒå¤§èƒ†çš„åˆ é™¤æ‰è€å†…æ ¸)</p><h2 id="æ¸…ç†æ— æ•ˆè½¯ä»¶"><a href="#æ¸…ç†æ— æ•ˆè½¯ä»¶" class="headerlink" title="æ¸…ç†æ— æ•ˆè½¯ä»¶"></a>æ¸…ç†æ— æ•ˆè½¯ä»¶</h2><p>libreofficeæ˜¯ä¸€å¥—ç±»ä¼¼äºå¾®è½¯officeçš„å…è´¹åŠå…¬å¥—ä»¶ï¼Œä¸è¿‡æ— è®ºç•Œé¢äº¤äº’è¿˜æ˜¯æ‰§è¡Œæ€§èƒ½éƒ½è¿˜æœ‰å¾ˆå¤§çš„æå‡ç©ºé—´ï¼Œå¸è½½libreofficeå¯ä»¥é‡Šæ”¾300Må·¦å³çš„ç£ç›˜ç©ºé—´<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get -y purge libreoffice* <span class="comment">#åŠå…¬å¥—ä»¶ </span></span><br><span class="line">sudo apt-get -y purge thunderbird*  <span class="comment"># é‚®ç®±è½¯ä»¶</span></span><br><span class="line">sudo apt-get -y purge gnome-power-manager <span class="comment">#ç”µæºç»Ÿè®¡ </span></span><br><span class="line">sudo apt-get -y purge deja-dup <span class="comment">#å¤‡ä»½ </span></span><br><span class="line">sudo apt-get -y purge bluez* <span class="comment">#å¸è½½è“ç‰™ </span></span><br><span class="line">sudo apt-get -y purge simple-scan <span class="comment">#æ‰«æ </span></span><br><span class="line">sudo apt-get -y purge hplip* <span class="comment">#æ‰“å° </span></span><br><span class="line">sudo apt-get -y purge printer-driver* <span class="comment">#æ‰“å°é©±åŠ¨ </span></span><br><span class="line">sudo apt-get -y purge rhythmbox* <span class="comment">#éŸ³ä¹æ’­æ”¾ </span></span><br><span class="line">sudo apt-get -y purge gnome-orca <span class="comment">#å±å¹•é˜…è¯» </span></span><br><span class="line">sudo apt-get -y purge onboard <span class="comment">#å±å¹•é”®ç›˜ </span></span><br><span class="line">sudo apt-get -y purge aisleriot <span class="comment">#çº¸ç‰Œç‹ </span></span><br><span class="line">sudo apt-get -y purge gnome-sudoku <span class="comment">#æ•°ç‹¬ </span></span><br><span class="line">sudo apt-get purge stardict* <span class="comment"># æ˜Ÿé™…è¯‘ç‹</span></span><br><span class="line">sudo apt-get purge totem  <span class="comment"># å¸è½½è§†é¢‘æ’­æ”¾å™¨</span></span><br><span class="line">sudo apt-get purge Shotwell* <span class="comment"># ä¸€ä¸ªå›¾ç‰‡ç®¡ç†å·¥å…·</span></span><br><span class="line">sudo apt-get purge imagemagic*</span><br><span class="line"><span class="comment"># ä¸‹é¢çš„è°¨æ…æ“ä½œ!!</span></span><br><span class="line"><span class="comment"># aptitude remove totem # å¸è½½è§†é¢‘æ’­æ”¾å™¨</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¸…å•(sudo apt-get purge ä¸‹é¢çš„åç§°)</span></span><br><span class="line">libreoffice-common libreofficeï¼ˆå¯ä»¥æ¢ WPS ï¼Œapt purge libreoffice-commonï¼‰</span><br><span class="line">unity-webapps-common Amazon é“¾æ¥</span><br><span class="line">thunderbird é›·é¸Ÿé‚®ä»¶å®¢æˆ·ç«¯</span><br><span class="line">totem è‡ªå¸¦çš„æ’­æ”¾å™¨</span><br><span class="line">rhythmbox è‡ªå¸¦çš„éŸ³ä¹æ’­æ”¾å™¨</span><br><span class="line">empathy è‡ªå¸¦çš„å³æ—¶èŠå¤©åº”ç”¨</span><br><span class="line">brasero è‡ªå¸¦çš„å…‰ç›˜åˆ»å½•å™¨</span><br><span class="line">simple-scan æ‰«æä»ª</span><br><span class="line">gnome-mahjongg å¯¹å¯¹ç¢°æ¸¸æˆ</span><br><span class="line">aisleriot çº¸ç‰Œæ¸¸æˆ</span><br><span class="line">gnome-mines æ‰«é›·æ¸¸æˆ</span><br><span class="line">cheese webcam åº”ç”¨</span><br><span class="line">gnome-sudoku æ•°ç‹¬æ¸¸æˆ</span><br><span class="line">transmission-common BT å®¢æˆ·ç«¯</span><br><span class="line">gnome-orca å±å¹•é˜…è¯»</span><br><span class="line">webbrowser-app Ubuntuè‡ªå¸¦çš„æµè§ˆå™¨ï¼ˆæœ‰äº† chrome å’Œ Firefox æ ¹æœ¬ç”¨ä¸åˆ°è¿™ä¸ªï¼‰</span><br><span class="line">landscape-client-ui-install landscape è¿œç¨‹æ§åˆ¶è½¯ä»¶</span><br><span class="line">deja-dup å¤‡ä»½</span><br><span class="line">onboard å±å¹•é”®ç›˜</span><br><span class="line">imagemagic*</span><br></pre></td></tr></table></figure></p><h2 id="æ¸…ç†æ— æ•ˆé…ç½®æ–‡ä»¶"><a href="#æ¸…ç†æ— æ•ˆé…ç½®æ–‡ä»¶" class="headerlink" title="æ¸…ç†æ— æ•ˆé…ç½®æ–‡ä»¶"></a>æ¸…ç†æ— æ•ˆé…ç½®æ–‡ä»¶</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dpkg -l |grep ^rc|awk <span class="string">'&#123;print $2&#125;'</span> |sudo xargs dpkg -P</span><br></pre></td></tr></table></figure><h2 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h2><p>åŒ…ç®¡ç†çš„ä¸´æ—¶æ–‡ä»¶ç›®å½•:<br>åŒ…åœ¨ /var/cache/apt/archives<br>æ²¡æœ‰ä¸‹è½½å®Œçš„åœ¨ /var/cache/apt/archives/partial</p><p>åœ¨å¸è½½è½¯ä»¶çš„æ—¶å€™ï¼Œå°½å¯èƒ½ä½¿ç”¨sudo apt-get purge xxxxxï¼ˆxxxxä¸ºè¦å¸è½½çš„è½¯ä»¶åï¼‰ï¼Œè¿™æ ·å¯ä»¥å°†è½¯ä»¶ä»¥åŠå®ƒçš„é…ç½®æ–‡ä»¶å‡å¸è½½å¹²å‡€ã€‚</p><h2 id="æ•‘å‘½ç¨»è‰"><a href="#æ•‘å‘½ç¨»è‰" class="headerlink" title="æ•‘å‘½ç¨»è‰"></a>æ•‘å‘½ç¨»è‰</h2><p>æ‰§è¡Œè¿™ä¸€è¡Œçš„æ—¶å€™å¯èƒ½ä¼šå…³è”å…¶ä»–è½¯ä»¶è¿™ä¸ªæ—¶å€™å¦‚æœé‡å¯ubuntuä¼šå‡ºç°:<br><code>#è°¨æ…ä½¿ç”¨: aptitude remove totem # å¸è½½è§†é¢‘æ’­æ”¾å™¨</code><br><strong>ç™»å½•åæ— dash,æ— å¯åŠ¨æ launch,æ— menu baråªæœ‰æ¡Œé¢èƒŒæ™¯çš„å¿«é€Ÿè§£å†³åŠæ³•</strong></p><p>è§£å†³æ–¹æ¡ˆï¼š</p><ul><li>é“¾æ¥ubuntu<ul><li>(0)ä½¿ç”¨shellè¿œç¨‹é“¾æ¥ubuntu(å‰æçŸ¥é“ipåœ°å€)</li><li>(1)æˆ–è€…å°è¯•ç”¨ã€€ctrl + alt + tã€€æ‰“å¼€å‘½ä»¤è¡Œ</li></ul></li><li><p>å®‰è£…<code>compizconfig-settings-manager</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install compizconfig-settings-manager</span><br></pre></td></tr></table></figure></li><li><p>å®‰è£… <code>unity</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get -f install &amp;&amp; sudo apt-get --reinstall install unity</span><br></pre></td></tr></table></figure></li><li><p>é‡å¯ </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo shutdown now -r</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mac </tag>
            
            <tag> ubuntu </tag>
            
            <tag> clean </tag>
            
            <tag> åƒåœ¾ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>å®šåˆ¶macç»ˆç«¯æ¬¢è¿é¡µ</title>
      <link href="/code/diy_your_terminal.html"/>
      <url>/code/diy_your_terminal.html</url>
      
        <content type="html"><![CDATA[<p>macä¸Šæ— è®ºæ˜¯npmã€gitè¿˜æ˜¯Jekylléƒ½ä¼šç”¨åˆ°ç»ˆç«¯ï¼Œè™½ç„¶å‘å¤šï¼Œä½†æŠ˜è…¾ä¸æ­¢ï¼é‚è‹¦ä¸­ä½œä¹ã€‚</p><h2 id="é…ç½®æ­¥éª¤"><a href="#é…ç½®æ­¥éª¤" class="headerlink" title="é…ç½®æ­¥éª¤"></a>é…ç½®æ­¥éª¤</h2><ul><li><p>å¿«æ·é”®control+spaceå”¤å‡ºSpotlightï¼Œæœç´¢terminalæ‰“å¼€ç»ˆç«¯ã€€</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /etc <span class="comment">#è¿›å…¥ç›®å½•</span></span><br><span class="line">sudo pico motd  <span class="comment">#è¾“å…¥å¯†ç åè¿›å…¥ä¿®æ”¹é¡µé¢</span></span><br></pre></td></tr></table></figure></li><li><p>ç²˜è´´å†…å®¹å¦‚ä¸‹</p><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">                   <span class="variable">_ooOoo_</span></span><br><span class="line">                  o8888888o</span><br><span class="line">                  <span class="number">88</span><span class="string">" . "</span><span class="number">88</span></span><br><span class="line">                  (| -_- |)</span><br><span class="line">                  O\  =  /O</span><br><span class="line">               <span class="variable">____</span>/`---<span class="string">'\____</span></span><br><span class="line"><span class="string">             .'</span>  \\|     |<span class="comment">//  `.</span></span><br><span class="line">            /  \\|||  :  |||<span class="comment">//  \</span></span><br><span class="line">           /  _||||| -:- |||||-  \</span><br><span class="line">           |   | \\\  -  <span class="comment">/// |   |</span></span><br><span class="line">           | \_|  <span class="string">''</span>\---/<span class="string">''</span>  |   |</span><br><span class="line">           \  .-\<span class="variable">__</span>  `-`  <span class="variable">___</span>/-. /</span><br><span class="line">         <span class="variable">___</span>`. .<span class="string">'  /--.--\  `. . __</span></span><br><span class="line"><span class="string">      ."" '</span>&lt;  `.<span class="variable">___</span>\_&lt;|&gt;_/<span class="variable">___</span>.<span class="string">'  &gt;'</span><span class="string">""</span>.</span><br><span class="line">     | | :  `- \`.;`\ _ /`;.`/ - ` : | |</span><br><span class="line">     \  \ `-.   \_ <span class="variable">__</span>\ /<span class="variable">__</span> _/   .-` /  /</span><br><span class="line">======`-.<span class="variable">____</span>`-.<span class="variable">___</span>\<span class="variable">_____</span>/<span class="variable">___</span>.-`<span class="variable">____</span>.-<span class="string">'======</span></span><br><span class="line"><span class="string">                   `=---='</span></span><br><span class="line"></span><br><span class="line">^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span><br><span class="line">           ä½›ç¥–ä¿ä½‘  ğŸ™   æ°¸æ— BUG</span><br></pre></td></tr></table></figure></li><li><p>ä¿å­˜:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">control + X ç„¶åè¾“å…¥y  ç„¶åå¯èƒ½éœ€è¦ä½ è¾“å…¥ä¿å­˜çš„æ–‡ä»¶å</span><br><span class="line">å¡«å†™motd</span><br></pre></td></tr></table></figure></li><li><p>é‡å¯ç»ˆç«¯çœ‹æ•ˆæœå§.<br>è‡ªå¸¦çš„tetminalå’Œiterméƒ½å¯ä»¥çœ‹åˆ°æ•ˆæœ.</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mac </tag>
            
            <tag> terminal </tag>
            
            <tag> ç»ˆç«¯ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>dockerå®‰è£…å’Œä½¿ç”¨</title>
      <link href="/code/install_docker_and_use.html"/>
      <url>/code/install_docker_and_use.html</url>
      
        <content type="html"><![CDATA[<h2 id="ubuntu"><a href="#ubuntu" class="headerlink" title="ubuntu"></a>ubuntu</h2><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>æ›´æ–°ubuntuçš„aptæºç´¢å¼•<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure></p><p>å®‰è£…åŒ…å…è®¸apté€šè¿‡HTTPSä½¿ç”¨ä»“åº“<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install \</span><br><span class="line">    apt-transport-https \</span><br><span class="line">    ca-certificates \</span><br><span class="line">    curl \</span><br><span class="line">    software-properties-common</span><br></pre></td></tr></table></figure></p><p>æ·»åŠ Dockerå®˜æ–¹GPG key<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -</span><br></pre></td></tr></table></figure></p><p>è®¾ç½®Dockerç¨³å®šç‰ˆä»“åº“<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository \</span><br><span class="line">   <span class="string">"deb [arch=amd64] https://download.docker.com/linux/ubuntu \</span></span><br><span class="line"><span class="string">   <span class="variable">$(lsb_release -cs)</span> \</span></span><br><span class="line"><span class="string">   stable"</span></span><br></pre></td></tr></table></figure></p><p>æ·»åŠ ä»“åº“åï¼Œæ›´æ–°aptæºç´¢å¼•<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure></p><p>å®‰è£…æœ€æ–°ç‰ˆDocker CEï¼ˆç¤¾åŒºç‰ˆï¼‰<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install docker-ce</span><br></pre></td></tr></table></figure></p><p>æ£€æŸ¥Docker CEæ˜¯å¦å®‰è£…æ­£ç¡®<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker run hello-world</span><br></pre></td></tr></table></figure></p><p>å‡ºç°å¦‚ä¸‹ä¿¡æ¯ï¼Œè¡¨ç¤ºå®‰è£…æˆåŠŸ<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">Status: Downloaded newer image <span class="keyword">for</span> hello-world:latest</span><br><span class="line"></span><br><span class="line">Hello from Docker!</span><br><span class="line">This message shows that your installation appears to be working correctly.</span><br><span class="line"></span><br><span class="line">To generate this message, Docker took the following steps:</span><br><span class="line"> 1. The Docker client contacted the Docker daemon.</span><br><span class="line"> 2. The Docker daemon pulled the <span class="string">"hello-world"</span> image from the Docker Hub.</span><br><span class="line">    (amd64)</span><br><span class="line"> 3. The Docker daemon created a new container from that image <span class="built_in">which</span> runs the</span><br><span class="line">    executable that produces the output you are currently reading.</span><br><span class="line"> 4. The Docker daemon streamed that output to the Docker client, <span class="built_in">which</span> sent it</span><br><span class="line">    to your terminal.</span><br><span class="line"></span><br><span class="line">To try something more ambitious, you can run an Ubuntu container with:</span><br><span class="line"> $ docker run -it ubuntu bash</span><br><span class="line"></span><br><span class="line">Share images, automate workflows, and more with a free Docker ID:</span><br><span class="line"> https://hub.docker.com/</span><br><span class="line"></span><br><span class="line">For more examples and ideas, visit:</span><br><span class="line"> https://docs.docker.com/get-started/</span><br></pre></td></tr></table></figure></p><h3 id="å¯åŠ¨ä¸åœæ­¢"><a href="#å¯åŠ¨ä¸åœæ­¢" class="headerlink" title="å¯åŠ¨ä¸åœæ­¢"></a>å¯åŠ¨ä¸åœæ­¢</h3><p>å®‰è£…å®ŒæˆDockeråï¼Œé»˜è®¤å·²ç»å¯åŠ¨äº†dockeræœåŠ¡ï¼Œå¦‚éœ€æ‰‹åŠ¨æ§åˆ¶dockeræœåŠ¡çš„å¯åœï¼Œå¯æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</p><p>å¯åŠ¨docker<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service docker start</span><br></pre></td></tr></table></figure></p><p>åœæ­¢docker<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service docker stop</span><br></pre></td></tr></table></figure></p><p>é‡å¯docker<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service docker restart</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>å¼€å‘è®°å½•ä¹‹djangoæ¡†æ¶æ•°æ®åº“è¿ç§»</title>
      <link href="/django/djang_migrate_dababase.html"/>
      <url>/django/djang_migrate_dababase.html</url>
      
        <content type="html"><![CDATA[<h2 id="è®°å½•"><a href="#è®°å½•" class="headerlink" title="è®°å½•"></a>è®°å½•</h2><p>ä»Šå¤©æ–°å»ºäº†ä¸€ä¸ªæ•°æ®åº“æ¨¡å‹, ä½†æ˜¯å´æ€ä¹ˆä¹Ÿè¿ç§»ä¸æˆåŠŸ.æ˜¾ç¤º:æ²¡æœ‰ä»»ä½•æ”¹å˜..<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(shops_py3) âœ  shops git:(dev) âœ— python manage.py makemigrations</span><br><span class="line">No changes detected</span><br></pre></td></tr></table></figure></p><p>åæ¥å¿½ç„¶æƒ³åˆ°ä¸€ä¸ªé—®é¢˜: æˆ‘åªæ˜¯å»ºç«‹äº†æ•°æ®æ¨¡å‹,ä½†æ˜¯å¹¶æ²¡æœ‰ä¸ªå’Œdjangoæ¡†æ¶æœ¬èº«å»ºç«‹è”ç³».<br>å¾ˆæ˜¾ç„¶æˆ‘æ²¡æœ‰æ³¨å†Œappâ€¦.<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">INSTALLED_APPS = [</span><br><span class="line">    ....</span><br><span class="line">    <span class="string">'areas.apps.AreasConfig'</span>,</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p><p>æ³¨å†Œåå†æ‰§è¡Œæœç„¶å¦¥å¦¥çš„æˆåŠŸäº†~~~<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(shops_py3) âœ  shops git:(dev) âœ— python manage.py makemigrations</span><br></pre></td></tr></table></figure></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(shops_py3) âœ  shops git:(dev) âœ— python manage.py makemigrations</span><br><span class="line">Migrations <span class="keyword">for</span> <span class="string">'areas'</span>:</span><br><span class="line">  shops/apps/areas/migrations/<span class="number">0001</span>_initial.py</span><br><span class="line">    - Create model Area</span><br><span class="line">(shops_py3) âœ  shops git:(dev) âœ—  python manage migrate</span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å¼€å‘ä¸€å®šè¦å¿ƒç»†. ç»†èŠ‚é—®é¢˜ä¸èƒ½å‡ºé”™â€¦å› ä¸ºçœŸçš„å¾ˆéš¾æ’æŸ¥â€¦</p>]]></content>
      
      
      <categories>
          
          <category> django </category>
          
      </categories>
      
      
        <tags>
            
            <tag> migrate </tag>
            
            <tag> database </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>å…³äºå¼€å‘è¿‡ç¨‹çš„æ„Ÿå—</title>
      <link href="/code/develop_and_think.html"/>
      <url>/code/develop_and_think.html</url>
      
        <content type="html"><![CDATA[<h2 id="èƒ¡è¨€ä¹±è¯­"><a href="#èƒ¡è¨€ä¹±è¯­" class="headerlink" title="èƒ¡è¨€ä¹±è¯­"></a>èƒ¡è¨€ä¹±è¯­</h2><p>å¼€å‘é‡åˆ°è§£ä¸å¼€çš„é—®é¢˜,å¤šçœ‹æºç .çœ‹æºç è§£é¢˜,ä¸€ä¸è¦å¤ªçˆ½çš„äº‹æƒ….å“ˆå“ˆå“ˆ.</p>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ„Ÿå— </tag>
            
            <tag> æºç  </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>macå‡çº§ç³»ç»Ÿåå‡ºç°xcrun errorè§£å†³åŠæ³•</title>
      <link href="/code/xcrun_error.html"/>
      <url>/code/xcrun_error.html</url>
      
        <content type="html"><![CDATA[<h2 id="ç°è±¡"><a href="#ç°è±¡" class="headerlink" title="ç°è±¡"></a>ç°è±¡</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun</span><br></pre></td></tr></table></figure><h2 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xcode-select --install</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> xcrun </tag>
            
            <tag> code </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>æ‰¾BUGäº‹ä»¶å¿«ä¹çš„äº‹æƒ…</title>
      <link href="/code/fing_bug.html"/>
      <url>/code/fing_bug.html</url>
      
        <content type="html"><![CDATA[<p>å¼€å‘ä¸­å‡ºç°BUGæ˜¯éå¸¸æ­£å¸¸æ˜¯äº‹æƒ…,æ‰¾BUGä¹Ÿæ˜¯éå¸¸çˆ½çš„è¿‡ç¨‹~</p><p>æµç¨‹: </p><ul><li>æ‰“å¼€QQéŸ³ä¹</li><li>æ‰“æ–­ç‚¹è°ƒè¯•</li><li>çœ‹æºç </li><li>å®ç°ä¸è¡Œå†csdn,googleâ€¦..</li></ul><p>ä»Šå¤©åœ¨å¼€å‘djangoæ‰¾å›å¯†ç çš„åŠŸèƒ½.åœ¨è¿›å…¥ä¿®æ”¹å¯†ç é¡µé¢ä¹‹å‰éœ€è¦é’ˆå¯¹å½“å‰ç”¨æˆ·ç”Ÿæˆaccess_token.é”™è¯¯çš„æŠŠJTFçš„æ¥å£è°ƒç”¨è¿‡æ¥äº†â€¦â€¦</p><p>æ‰“æ–­ç‚¹æ’æŸ¥é¡ºåˆ©è§£å†³~</p>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bug </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>macç³»ç»Ÿä¸‹djangoæ—¥å¿—å¦‚æœ‰ä¸­æ–‡æŠ¥é”™çš„è§£å†³æ–¹æ³•</title>
      <link href="/django/django_logging_error.html"/>
      <url>/django/django_logging_error.html</url>
      
        <content type="html"><![CDATA[<h2 id="å‡ºç°çš„bug"><a href="#å‡ºç°çš„bug" class="headerlink" title="å‡ºç°çš„bug"></a>å‡ºç°çš„bug</h2><p>djangoä½¿ç”¨DRFæ¡†æ¶ã€‚é…ç½®æ—¥å¿—ï¼Œå¦‚æœæœ‰ä¸­æ–‡æ§åˆ¶å°ä¼šæŠ¥é”™ï¼Œä½†æ˜¯åœ¨å› ä¸ºä¸‹å°±ä¸ä¼šå‡ºç°è¿™æ ·çš„é”™è¯¯ï¼Œç»è¿‡æ’æŸ¥å¯ä»¥ç¡®å®šçš„æ˜¯ä¸­æ–‡å¯¼è‡´çš„bug<br>å¦‚ä¸‹ä¸ºå®Œæ•´æŠ¥é”™ä¿¡æ¯ï¼Œåé¢ä¹Ÿä¼šè´´å‡ºæ ¸å¿ƒé”™è¯¯ä¿¡æ¯.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">--- Logging error ---</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/logging/__init__.py"</span>, line <span class="number">994</span>, <span class="keyword">in</span> emit</span><br><span class="line">    stream.write(msg)</span><br><span class="line">UnicodeEncodeError: <span class="string">'ascii'</span> codec can<span class="string">'t encode characters in position 38-39: ordinal not in range(128)</span></span><br><span class="line"><span class="string">Call stack:</span></span><br><span class="line"><span class="string">  File "/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py", line 884, in _bootstrap</span></span><br><span class="line"><span class="string">    self._bootstrap_inner()</span></span><br><span class="line"><span class="string">  File "/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py", line 916, in _bootstrap_inner</span></span><br><span class="line"><span class="string">    self.run()</span></span><br><span class="line"><span class="string">  File "/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/threading.py", line 864, in run</span></span><br><span class="line"><span class="string">    self._target(*self._args, **self._kwargs)</span></span><br><span class="line"><span class="string">  File "/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/socketserver.py", line 639, in process_request_thread</span></span><br><span class="line"><span class="string">    self.finish_request(request, client_address)</span></span><br><span class="line"><span class="string">  File "/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/socketserver.py", line 361, in finish_request</span></span><br><span class="line"><span class="string">    self.RequestHandlerClass(request, client_address, self)</span></span><br><span class="line"><span class="string">  File "/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/socketserver.py", line 696, in __init__</span></span><br><span class="line"><span class="string">    self.handle()</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/core/servers/basehttp.py", line 155, in handle</span></span><br><span class="line"><span class="string">    handler.run(self.server.get_app())</span></span><br><span class="line"><span class="string">  File "/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/wsgiref/handlers.py", line 137, in run</span></span><br><span class="line"><span class="string">    self.result = application(self.environ, self.start_response)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/contrib/staticfiles/handlers.py", line 63, in __call__</span></span><br><span class="line"><span class="string">    return self.application(environ, start_response)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/core/handlers/wsgi.py", line 157, in __call__</span></span><br><span class="line"><span class="string">    response = self.get_response(request)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/core/handlers/base.py", line 124, in get_response</span></span><br><span class="line"><span class="string">    response = self._middleware_chain(request)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/core/handlers/exception.py", line 41, in inner</span></span><br><span class="line"><span class="string">    response = get_response(request)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/utils/deprecation.py", line 140, in __call__</span></span><br><span class="line"><span class="string">    response = self.get_response(request)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/core/handlers/exception.py", line 41, in inner</span></span><br><span class="line"><span class="string">    response = get_response(request)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/utils/deprecation.py", line 140, in __call__</span></span><br><span class="line"><span class="string">    response = self.get_response(request)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/core/handlers/exception.py", line 41, in inner</span></span><br><span class="line"><span class="string">    response = get_response(request)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/utils/deprecation.py", line 140, in __call__</span></span><br><span class="line"><span class="string">    response = self.get_response(request)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/core/handlers/exception.py", line 41, in inner</span></span><br><span class="line"><span class="string">    response = get_response(request)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/utils/deprecation.py", line 140, in __call__</span></span><br><span class="line"><span class="string">    response = self.get_response(request)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/core/handlers/exception.py", line 41, in inner</span></span><br><span class="line"><span class="string">    response = get_response(request)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/utils/deprecation.py", line 140, in __call__</span></span><br><span class="line"><span class="string">    response = self.get_response(request)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/core/handlers/exception.py", line 41, in inner</span></span><br><span class="line"><span class="string">    response = get_response(request)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/utils/deprecation.py", line 140, in __call__</span></span><br><span class="line"><span class="string">    response = self.get_response(request)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/core/handlers/exception.py", line 41, in inner</span></span><br><span class="line"><span class="string">    response = get_response(request)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/utils/deprecation.py", line 140, in __call__</span></span><br><span class="line"><span class="string">    response = self.get_response(request)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/core/handlers/exception.py", line 41, in inner</span></span><br><span class="line"><span class="string">    response = get_response(request)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/utils/deprecation.py", line 140, in __call__</span></span><br><span class="line"><span class="string">    response = self.get_response(request)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/core/handlers/exception.py", line 41, in inner</span></span><br><span class="line"><span class="string">    response = get_response(request)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/core/handlers/base.py", line 185, in _get_response</span></span><br><span class="line"><span class="string">    response = wrapped_callback(request, *callback_args, **callback_kwargs)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/views/decorators/csrf.py", line 58, in wrapped_view</span></span><br><span class="line"><span class="string">    return view_func(*args, **kwargs)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/django/views/generic/base.py", line 68, in view</span></span><br><span class="line"><span class="string">    return self.dispatch(request, *args, **kwargs)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/.virtualenvs/shops_py3/lib/python3.6/site-packages/rest_framework/views.py", line 480, in dispatch</span></span><br><span class="line"><span class="string">    response = handler(request, *args, **kwargs)</span></span><br><span class="line"><span class="string">  File "/Users/jetmo/Documents/Code/shops/shops/shops/apps/verifications/views.py", line 82, in get</span></span><br><span class="line"><span class="string">    logger.info('</span>æ‰‹æœº: %s å‘é€çŸ­ä¿¡ok<span class="string">' % mobile)</span></span><br><span class="line"><span class="string">Message: '</span>æ‰‹æœº: <span class="number">15167128625</span> å‘é€çŸ­ä¿¡ok<span class="string">'</span></span><br><span class="line"><span class="string">Arguments: ()</span></span><br></pre></td></tr></table></figure><h2 id="æ ¸å¿ƒé”™è¯¯ä»£ç "><a href="#æ ¸å¿ƒé”™è¯¯ä»£ç " class="headerlink" title="æ ¸å¿ƒé”™è¯¯ä»£ç "></a>æ ¸å¿ƒé”™è¯¯ä»£ç </h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">UnicodeEncodeError: <span class="string">'ascii'</span> codec can<span class="string">'t encode characters in position 38-39: ordinal not in range(128)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">.....</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"/Users/jetmo/Documents/Code/shops/shops/shops/apps/verifications/views.py", line 82, in get</span></span><br></pre></td></tr></table></figure><p>æŒ‰é“ç†è®², ä»å‡ºç°bugå°±æ²¡æœ‰ä¼šæƒ³åˆ°macç¼–ç å­˜åœ¨é—®é¢˜.<br></p><h2 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h2><p>åœ¨settings.pyä¸­çš„æ—¥å¿—é…ç½®æ–‡ä»¶ä¸­æ·»åŠ <code>&#39;encoding&#39;: &#39;utf-8&#39;</code>å°±å¯ä»¥å®Œç¾è§£å†³.<br>å®Œç¾ä»£ç å¦‚ä¸‹:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">LOGGING = &#123;</span><br><span class="line">    <span class="string">'version'</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">'disable_existing_loggers'</span>: <span class="keyword">False</span>,</span><br><span class="line">    <span class="string">'formatters'</span>: &#123;</span><br><span class="line">        <span class="string">'verbose'</span>: &#123;</span><br><span class="line">            <span class="string">'format'</span>: <span class="string">'%(levelname)s %(asctime)s %(module)s %(lineno)d %(message)s'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">'simple'</span>: &#123;</span><br><span class="line">            <span class="string">'format'</span>: <span class="string">'%(levelname)s %(module)s %(lineno)d %(message)s'</span></span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">'filters'</span>: &#123;</span><br><span class="line">        <span class="string">'require_debug_true'</span>: &#123;</span><br><span class="line">            <span class="string">'()'</span>: <span class="string">'django.utils.log.RequireDebugTrue'</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">'handlers'</span>: &#123;</span><br><span class="line">        <span class="string">'console'</span>: &#123;</span><br><span class="line">            <span class="string">'level'</span>: <span class="string">'DEBUG'</span>,</span><br><span class="line">            <span class="string">'filters'</span>: [<span class="string">'require_debug_true'</span>],</span><br><span class="line">            <span class="string">'class'</span>: <span class="string">'logging.StreamHandler'</span>,</span><br><span class="line">            <span class="string">'formatter'</span>: <span class="string">'simple'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">'file'</span>: &#123;</span><br><span class="line">            <span class="string">'level'</span>: <span class="string">'INFO'</span>,</span><br><span class="line">            <span class="string">'class'</span>: <span class="string">'logging.handlers.RotatingFileHandler'</span>,</span><br><span class="line">            <span class="string">'filename'</span>: os.path.join(os.path.dirname(BASE_DIR), <span class="string">"logs/meiduo.log"</span>),  <span class="comment"># æ—¥å¿—æ–‡ä»¶çš„ä½ç½®</span></span><br><span class="line">            <span class="string">'maxBytes'</span>: <span class="number">300</span> * <span class="number">1024</span> * <span class="number">1024</span>,</span><br><span class="line">            <span class="string">'backupCount'</span>: <span class="number">10</span>,</span><br><span class="line">            <span class="string">'formatter'</span>: <span class="string">'verbose'</span>,</span><br><span class="line">            <span class="string">'encoding'</span>: <span class="string">'utf-8'</span>  <span class="comment"># è¿™é‡Œæ·»åŠ å¯ä»¥é¿å…ä¸­æ–‡æŠ¥é”™</span></span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">'loggers'</span>: &#123; <span class="comment"># å®šä¹‰äº†ä¸€ä¸ªåä¸ºdjangoçš„æ—¥å¿—å™¨</span></span><br><span class="line">            <span class="string">'django'</span>: &#123;</span><br><span class="line">                <span class="string">'handlers'</span>: [<span class="string">'console'</span>, <span class="string">'file'</span>],</span><br><span class="line">                <span class="string">'propagate'</span>: <span class="keyword">True</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> django </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
            <tag> logging </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>rest_frameworkçŸ¥è¯†ç‚¹ä¹‹:æ–¹æ³•get_seriazlier</title>
      <link href="/django/django_rest_framework_get_seriazlier.html"/>
      <url>/django/django_rest_framework_get_seriazlier.html</url>
      
        <content type="html"><![CDATA[<p>rest_frameworkä¸­get_seriazlier()æ–¹æ³•çš„ä½œç”¨.</p><h2 id="å…ˆçœ‹æ¡ˆä¾‹"><a href="#å…ˆçœ‹æ¡ˆä¾‹" class="headerlink" title="å…ˆçœ‹æ¡ˆä¾‹"></a>å…ˆçœ‹æ¡ˆä¾‹</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SMSCodeView</span><span class="params">(GenericAPIView)</span>:</span></span><br><span class="line">    <span class="string">"""çŸ­ä¿¡éªŒè¯ç """</span></span><br><span class="line">    <span class="comment"># å‚æ•°: mobile image_code_id, text</span></span><br><span class="line">    serializer_class = ImageCodeCheckSerializer()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, request, mobile)</span>:</span></span><br><span class="line">        <span class="comment"># æ ¡éªŒå‚æ•° (åºåˆ—åŒ–å™¨å®Œæˆ)</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># self.get_serializer()çš„ç›®çš„æ˜¯æŠŠrequest, view, format ä¼ åˆ°åºåˆ—åŒ–å™¨ä¸­.(çœ‹æºç )</span></span><br><span class="line">        serializer = self.get_serializer(data=request.query_params)</span><br><span class="line">        serializer.is_valid(raise_exception=<span class="keyword">True</span>)</span><br><span class="line">        ...çœç•¥ä»£ç ...</span><br></pre></td></tr></table></figure><p>è¿™é‡Œ<code>serializer = self.get_serializer(data=request.query_params)</code>ç›®çš„æœ‰ä¸‰ä¸ª:<br>1.è·å–åºåˆ—åŒ–å™¨.<code>serializer_class = ImageCodeCheckSerializer()</code>.<br>2.æ–­è¨€<br>3.æŠŠrequest, view,formatä¼ åˆ°åºåˆ—åŒ–å™¨ä¸­,ä»¥ä¾›åºåˆ—åŒ–å™¨æ ¡éªŒ.(å¦‚æœä¸çœ‹æºç ,è¿™é‡Œä¼šæ¯”è¾ƒéš¾ç†è§£.)</p><h2 id="çœ‹æºç "><a href="#çœ‹æºç " class="headerlink" title="çœ‹æºç "></a>çœ‹æºç </h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GenericAPIView</span><span class="params">(views.APIView)</span>:</span></span><br><span class="line">    ...æ— å…³ä»£ç çœç•¥...</span><br><span class="line">    queryset = <span class="keyword">None</span></span><br><span class="line">    serializer_class = <span class="keyword">None</span></span><br><span class="line"></span><br><span class="line">    ...æ— å…³ä»£ç çœç•¥...</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_serializer</span><span class="params">(self, *args, **kwargs)</span>:</span></span><br><span class="line">        ...æ— å…³ä»£ç çœç•¥...</span><br><span class="line"></span><br><span class="line">        <span class="comment"># è¿™é‡Œè°ƒç”¨æ–¹æ³•get_serializer_class() ç›®çš„å°±æ˜¯è¿”å›åºåˆ—åŒ–å™¨!!</span></span><br><span class="line">        serializer_class = self.get_serializer_class()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># è¿™é‡Œç›®çš„æ˜¯è·å–å‚æ•°å¹¶åˆ†è£…åˆ°å­—å…¸ä¸­: reques, format, view</span></span><br><span class="line">        kwargs[<span class="string">'context'</span>] = self.get_serializer_context()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># è¿™é‡Œç›®çš„æ˜¯è¿”å›åºåˆ—åŒ–å™¨(æ­¤æ—¶å·²ç»æŠŠå‚æ•°å°è£…è¿›å»äº†.)</span></span><br><span class="line">        <span class="keyword">return</span> serializer_class(*args, **kwargs)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_serializer_class</span><span class="params">(self)</span>:</span></span><br><span class="line">        </span><br><span class="line">        ...æ³¨é‡Šå’Œæ–­è¨€å¹²æ‰ä¸éœ€è¦çœ‹...</span><br><span class="line">        <span class="comment"># è¿™æ˜¯ç›®çš„æ˜¯: è¿”å›ç±»å±æ€§:åºåˆ—åŒ–å™¨</span></span><br><span class="line">        <span class="keyword">return</span> self.serializer_class</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_serializer_context</span><span class="params">(self)</span>:</span></span><br><span class="line">        ...æ³¨é‡Šä¸éœ€è¦çœ‹...</span><br><span class="line">        <span class="comment"># è¿™é‡Œç›®çš„æ˜¯è¿”å›å½“å‰ç±»è§†å›¾çš„request, format, viewå¹¶èµ‹å€¼</span></span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="string">'request'</span>: self.request,</span><br><span class="line">            <span class="string">'format'</span>: self.format_kwarg,</span><br><span class="line">            <span class="string">'view'</span>: self</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>è‡ªæ­¤: çœ‹æ˜ç™½æ‰èƒ½ç†è§£ä¸ºä»€ä¹ˆæ˜æ˜ç±»å±æ€§ä¸­æ˜æ˜æœ‰åºåˆ—åŒ–å™¨æˆ‘ä»¬è¿˜éœ€è¦ç»•ä¸€å¤§åœˆå»è·å–åºåˆ—åŒ–å™¨.<br>åŸå› å¾ˆæ˜ç¡®,å°±æ˜¯ä¸ºäº†æŠŠå‚æ•°ä¼ é€’åˆ°åºåˆ—åŒ–å™¨ä¸­,ä»¥ä¾¿åºåˆ—åŒ–å™¨åšæ ¡éªŒ.</p>]]></content>
      
      
      <categories>
          
          <category> django </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
            <tag> rest_framework </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>æ—¶é—´æˆ³è½¬æ¢çš„å‡ ç§æ–¹æ³•</title>
      <link href="/python/timestamp.html"/>
      <url>/python/timestamp.html</url>
      
        <content type="html"><![CDATA[<h2 id="æ ¼å¼åŒ–"><a href="#æ ¼å¼åŒ–" class="headerlink" title="æ ¼å¼åŒ–"></a>æ ¼å¼åŒ–</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¬¬ä¸€ç§</span></span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line">timestamp = <span class="number">1536108815</span>  <span class="comment"># å¦‚æœæ˜¯ä»ç½‘é¡µè§£æå‡ºæ¥çš„æ˜¯å­—ç¬¦ä¸²,éœ€è¦è½¬int</span></span><br><span class="line">dateArray = datetime.datetime.utcfromtimestamp(int(timestamp))</span><br><span class="line">styletime = dateArray.strftime(<span class="string">"%Y-%m-%d %H:%M:%S"</span>)</span><br><span class="line">prtint(styletime)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¬¬äºŒç§</span></span><br><span class="line">ts = <span class="number">1515774430</span></span><br><span class="line">dt = time.strftime(<span class="string">"%Y-%m-%d %H:%M:%S"</span>, time.localtime(ts))</span><br><span class="line">print(dt)</span><br></pre></td></tr></table></figure><h2 id="è·å–æ—¶é—´æˆ³"><a href="#è·å–æ—¶é—´æˆ³" class="headerlink" title="è·å–æ—¶é—´æˆ³"></a>è·å–æ—¶é—´æˆ³</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line">t = time.time()</span><br><span class="line">print(t)</span><br></pre></td></tr></table></figure><h2 id="è½¬æ—¶é—´æˆ³"><a href="#è½¬æ—¶é—´æˆ³" class="headerlink" title="è½¬æ—¶é—´æˆ³"></a>è½¬æ—¶é—´æˆ³</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">dt = <span class="string">'2018-02-01 02:40:30'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å…ˆæŠŠæ—¥æœŸå­—ç¬¦ä¸²è½¬ä¸º æ—¥æœŸå¯¹è±¡,ç„¶åå†æŠŠæ—¥æœŸå¯¹è±¡è½¬ä¸ºæ—¶é—´æˆ³</span></span><br><span class="line">ts = int(time.mktime(time.strptime(dt, <span class="string">"%Y-%m-%d %H:%M:%S"</span>)))</span><br><span class="line"><span class="keyword">print</span> (ts)</span><br></pre></td></tr></table></figure><blockquote><p>è·å–æ—¶é—´,è·å–æ—¶é—´æˆ³,æ—¶é—´æˆ³è½¬åŒ–,pythonæä¾›å¾ˆå¤šæ¨¡å—,å¯ä»¥å¤šgoogle.</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ—¶é—´æˆ³ </tag>
            
            <tag> timetamp </tag>
            
            <tag> datetime </tag>
            
            <tag> time </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>pythonä¸­urlç¼–è§£ç é—®é¢˜</title>
      <link href="/python/python_url_decode_encode.html"/>
      <url>/python/python_url_decode_encode.html</url>
      
        <content type="html"><![CDATA[<h2 id="æ™®é€šå­—ç¬¦ä¸²çš„å¤„ç†"><a href="#æ™®é€šå­—ç¬¦ä¸²çš„å¤„ç†" class="headerlink" title="æ™®é€šå­—ç¬¦ä¸²çš„å¤„ç†"></a>æ™®é€šå­—ç¬¦ä¸²çš„å¤„ç†</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> parse</span><br><span class="line"></span><br><span class="line">str1 = <span class="string">'hahaå“ˆå“ˆ'</span></span><br><span class="line">str2 = parse.quote(str1)   <span class="comment">#quote()å°†å­—ç¬¦ä¸²è¿›è¡Œç¼–ç </span></span><br><span class="line">print(str2)                <span class="comment">#str2=haha%E5%93%88%E5%93%88</span></span><br><span class="line">str3 = parse.unquote(str2) <span class="comment">#è§£ç å­—ç¬¦ä¸²</span></span><br><span class="line">print(str3)                <span class="comment">#str3=hahaå“ˆå“ˆ</span></span><br></pre></td></tr></table></figure><h2 id="urlçš„å¤„ç†"><a href="#urlçš„å¤„ç†" class="headerlink" title="urlçš„å¤„ç†"></a>urlçš„å¤„ç†</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> parse</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">url = <span class="string">'http://www.baidu.com/s?'</span></span><br><span class="line">dict1 =&#123;<span class="string">'wd'</span>: <span class="string">'ç™¾åº¦ç¿»è¯‘'</span>&#125;</span><br><span class="line">url_data = parse.urlencode(dict1) <span class="comment">#unlencode()å°†å­—å…¸&#123;k1:v1,k2:v2&#125;è½¬åŒ–ä¸ºk1=v1&amp;k2=v2</span></span><br><span class="line">print(url_data)             <span class="comment">#url_dataï¼šwd=%E7%99%BE%E5%BA%A6%E7%BF%BB%E8%AF%91</span></span><br><span class="line"></span><br><span class="line">data = requests.get((url+url_data)).text <span class="comment">#è¯»å–urlå“åº”ç»“æœ</span></span><br><span class="line">data = data.decode(<span class="string">'utf-8'</span>) <span class="comment">#å°†å“åº”ç»“æœç”¨utf8ç¼–ç </span></span><br><span class="line">print(data)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">url_org = parse.unquote(url_data) <span class="comment">#è§£ç url</span></span><br><span class="line">print(url_org)              <span class="comment">#url_orgï¼šwd=ç™¾åº¦ç¿»è¯‘</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> unquote </tag>
            
            <tag> quote </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>jsonå’Œxmläº’è½¬</title>
      <link href="/code/json2xml_xml2json.html"/>
      <url>/code/json2xml_xml2json.html</url>
      
        <content type="html"><![CDATA[<p>jsonå’Œxmläº’è½¬.å€ŸåŠ©çš„æ¨¡å—<code>xmltodict</code></p><h2 id="json2xml"><a href="#json2xml" class="headerlink" title="json2xml"></a>json2xml</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> xmltodict</span><br><span class="line"><span class="comment">#jsonè½¬xmlå‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">jsontoxml</span><span class="params">(jsonstr)</span>:</span></span><br><span class="line">    <span class="comment">#xmltodictåº“çš„unparse()jsonè½¬xml</span></span><br><span class="line">    xmlstr = xmltodict.unparse(jsonstr)</span><br><span class="line">    print(xmlstr)</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    json_str = &#123;</span><br><span class="line">        <span class="string">'student'</span>: &#123;</span><br><span class="line">            <span class="string">'course'</span>: &#123;</span><br><span class="line">                <span class="string">'name'</span>: <span class="string">'math'</span>,</span><br><span class="line">                <span class="string">'score'</span>: <span class="string">'90'</span></span><br><span class="line">                &#125;,</span><br><span class="line">            <span class="string">'info'</span>: &#123;</span><br><span class="line">                <span class="string">'sex'</span>: <span class="string">'male'</span>,</span><br><span class="line">                <span class="string">'name'</span>: <span class="string">'name'</span></span><br><span class="line">                &#125;, </span><br><span class="line">            <span class="string">'stid'</span>: <span class="string">'10213'</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    jsontoxml(json_str)</span><br></pre></td></tr></table></figure><h2 id="xml2json"><a href="#xml2json" class="headerlink" title="xml2json"></a>xml2json</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> xmltodict</span><br><span class="line"><span class="comment">#å®šä¹‰xmlè½¬jsonçš„å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">xmltojson</span><span class="params">(xmlstr)</span>:</span></span><br><span class="line">    <span class="comment">#parseæ˜¯çš„xmlè§£æå™¨</span></span><br><span class="line">    xmlparse = xmltodict.parse(xmlstr)</span><br><span class="line">    <span class="comment">#jsonåº“dumps()æ˜¯å°†dictè½¬åŒ–æˆjsonæ ¼å¼ï¼Œloads()æ˜¯å°†jsonè½¬åŒ–æˆdictæ ¼å¼ã€‚</span></span><br><span class="line">    <span class="comment">#dumps()æ–¹æ³•çš„ident=1ï¼Œæ ¼å¼åŒ–json</span></span><br><span class="line">    jsonstr = json.dumps(xmlparse,indent=<span class="number">1</span>)</span><br><span class="line">    print(jsonstr)</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    xml =<span class="string">"""&lt;student&gt;</span></span><br><span class="line"><span class="string">    &lt;stid&gt;10213&lt;/stid&gt;</span></span><br><span class="line"><span class="string">    &lt;info&gt;</span></span><br><span class="line"><span class="string">        &lt;name&gt;name&lt;/name&gt;</span></span><br><span class="line"><span class="string">        &lt;sex&gt;male&lt;/sex&gt;</span></span><br><span class="line"><span class="string">    &lt;/info&gt;</span></span><br><span class="line"><span class="string">    &lt;course&gt;</span></span><br><span class="line"><span class="string">        &lt;name&gt;math&lt;/name&gt;</span></span><br><span class="line"><span class="string">        &lt;score&gt;90&lt;/score&gt;</span></span><br><span class="line"><span class="string">    &lt;/course&gt;</span></span><br><span class="line"><span class="string">&lt;/student&gt;"""</span></span><br><span class="line"></span><br><span class="line">    xmltojson(xml)  <span class="comment">#è°ƒç”¨è½¬æ¢å‡½æ•°</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> json </tag>
            
            <tag> xml </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„åº•å±‚å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</title>
      <link href="/django/xuliehua_fanxuliehua.html"/>
      <url>/django/xuliehua_fanxuliehua.html</url>
      
        <content type="html"><![CDATA[<p>åºåˆ—åŒ–å’Œååºåˆ—åŒ–ä½œä¸ºJavaé‡Œä¸€ä¸ªè¾ƒä¸ºåŸºç¡€çš„çŸ¥è¯†ç‚¹ï¼Œå¤§å®¶å¿ƒé‡Œä¹Ÿæœ‰é‚£ä¹ˆå‡ å¥è¦è¯´çš„ï¼Œä½†æˆ‘ç›¸ä¿¡å¾ˆå¤šå°ä¼™ä¼´æŒæ¡çš„ä¹Ÿå°±æ˜¯é‚£ä¹ˆå‡ å¥è€Œå·²ï¼Œå¦‚æœå†æ·±ç©¶é—®ä¸€ä¸‹Javaå¦‚ä½•å®ç°åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„ï¼Œå°±å¯èƒ½ä¸çŸ¥æ‰€æªäº†ï¼é¥è®°å½“å¹´ä¹Ÿè¢«é—®äº†è¿™ä¸€ä¸ªé—®é¢˜ï¼Œè‡ªä¿¡æ»¡æ»¡çš„è¯´äº†ä¸€å¤§å †ï¼Œä»€ä¹ˆæ˜¯åºåˆ—åŒ–ã€ä»€ä¹ˆæ˜¯ååºåˆ—åŒ–ã€ä»€ä¹ˆåœºæ™¯çš„æ—¶å€™æ‰ä¼šç”¨åˆ°ç­‰ï¼Œç„¶åé¢è¯•å®˜è¯´ï¼šé‚£ä½ èƒ½è¯´ä¸€ä¸‹åºåˆ—åŒ–å’Œååºåˆ—åŒ–åº•å±‚æ˜¯å¦‚ä½•å®ç°çš„å—ï¼Ÿä¸€è„¸æ‡µé€¼ï¼Œç„¶åå›å®¶ç­‰é€šçŸ¥ï¼</p><h2 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h2><h3 id="1-ä»€ä¹ˆæ˜¯åºåˆ—åŒ–å’Œååºåˆ—åŒ–"><a href="#1-ä»€ä¹ˆæ˜¯åºåˆ—åŒ–å’Œååºåˆ—åŒ–" class="headerlink" title="1.ä»€ä¹ˆæ˜¯åºåˆ—åŒ–å’Œååºåˆ—åŒ–"></a>1.ä»€ä¹ˆæ˜¯åºåˆ—åŒ–å’Œååºåˆ—åŒ–</h3><p>ï¼ˆ1) Javaåºåˆ—åŒ–æ˜¯æŒ‡æŠŠJavaå¯¹è±¡è½¬æ¢ä¸ºå­—èŠ‚åºåˆ—çš„è¿‡ç¨‹ï¼Œè€ŒJavaååºåˆ—åŒ–æ˜¯æŒ‡æŠŠå­—èŠ‚åºåˆ—æ¢å¤ä¸ºJavaå¯¹è±¡çš„è¿‡ç¨‹ï¼›<br>ï¼ˆ2ï¼‰åºåˆ—åŒ–ï¼šå¯¹è±¡åºåˆ—åŒ–çš„æœ€ä¸»è¦çš„ç”¨å¤„å°±æ˜¯åœ¨ä¼ é€’å’Œä¿å­˜å¯¹è±¡çš„æ—¶å€™ï¼Œä¿è¯å¯¹è±¡çš„å®Œæ•´æ€§å’Œå¯ä¼ é€’æ€§ã€‚åºåˆ—åŒ–æ˜¯æŠŠå¯¹è±¡è½¬æ¢æˆæœ‰åºå­—èŠ‚æµï¼Œä»¥ä¾¿åœ¨ç½‘ç»œä¸Šä¼ è¾“æˆ–è€…ä¿å­˜åœ¨æœ¬åœ°æ–‡ä»¶ä¸­ã€‚åºåˆ—åŒ–åçš„å­—èŠ‚æµä¿å­˜äº†Javaå¯¹è±¡çš„çŠ¶æ€ä»¥åŠç›¸å…³çš„æè¿°ä¿¡æ¯ã€‚<code>åºåˆ—åŒ–æœºåˆ¶çš„æ ¸å¿ƒä½œç”¨å°±æ˜¯å¯¹è±¡çŠ¶æ€çš„ä¿å­˜ä¸é‡å»ºã€‚</code></p><p>ï¼ˆ3ï¼‰ååºåˆ—åŒ–ï¼šå®¢æˆ·ç«¯ä»æ–‡ä»¶ä¸­æˆ–ç½‘ç»œä¸Šè·å¾—åºåˆ—åŒ–åçš„å¯¹è±¡å­—èŠ‚æµåï¼Œæ ¹æ®å­—èŠ‚æµä¸­æ‰€ä¿å­˜çš„å¯¹è±¡çŠ¶æ€åŠæè¿°ä¿¡æ¯ï¼Œé€šè¿‡ååºåˆ—åŒ–é‡å»ºå¯¹è±¡ã€‚</p><p>ï¼ˆ4ï¼‰æœ¬è´¨ä¸Šè®²ï¼Œåºåˆ—åŒ–å°±æ˜¯æŠŠå®ä½“å¯¹è±¡çŠ¶æ€æŒ‰ç…§ä¸€å®šçš„æ ¼å¼å†™å…¥åˆ°æœ‰åºå­—èŠ‚æµï¼Œååºåˆ—åŒ–å°±æ˜¯ä»æœ‰åºå­—èŠ‚æµé‡å»ºå¯¹è±¡ï¼Œæ¢å¤å¯¹è±¡çŠ¶æ€ã€‚</p><h3 id="2-ä¸ºä»€ä¹ˆéœ€è¦åºåˆ—åŒ–å’Œååºåˆ—åŒ–"><a href="#2-ä¸ºä»€ä¹ˆéœ€è¦åºåˆ—åŒ–å’Œååºåˆ—åŒ–" class="headerlink" title="2.ä¸ºä»€ä¹ˆéœ€è¦åºåˆ—åŒ–å’Œååºåˆ—åŒ–"></a>2.ä¸ºä»€ä¹ˆéœ€è¦åºåˆ—åŒ–å’Œååºåˆ—åŒ–</h3><p>æˆ‘ä»¬çŸ¥é“ï¼Œå½“ä¸¤ä¸ªè¿›ç¨‹è¿›è¡Œè¿œç¨‹é€šä¿¡æ—¶ï¼Œå¯ä»¥ç›¸äº’å‘é€å„ç§ç±»å‹çš„æ•°æ®ï¼ŒåŒ…æ‹¬æ–‡æœ¬ã€å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰ï¼Œ è€Œè¿™äº›æ•°æ®éƒ½ä¼šä»¥äºŒè¿›åˆ¶åºåˆ—çš„å½¢å¼åœ¨ç½‘ç»œä¸Šä¼ é€ã€‚</p><p>é‚£ä¹ˆå½“ä¸¤ä¸ªJavaè¿›ç¨‹è¿›è¡Œé€šä¿¡æ—¶ï¼Œèƒ½å¦å®ç°è¿›ç¨‹é—´çš„å¯¹è±¡ä¼ é€å‘¢ï¼Ÿç­”æ¡ˆæ˜¯å¯ä»¥çš„ï¼å¦‚ä½•åšåˆ°å‘¢ï¼Ÿè¿™å°±éœ€è¦Javaåºåˆ—åŒ–ä¸ååºåˆ—åŒ–äº†ï¼</p><p>æ¢å¥è¯è¯´ï¼Œä¸€æ–¹é¢ï¼Œå‘é€æ–¹éœ€è¦æŠŠè¿™ä¸ªJavaå¯¹è±¡è½¬æ¢ä¸ºå­—èŠ‚åºåˆ—ï¼Œç„¶ååœ¨ç½‘ç»œä¸Šä¼ é€ï¼›å¦ä¸€æ–¹é¢ï¼Œæ¥æ”¶æ–¹éœ€è¦ä»å­—èŠ‚åºåˆ—ä¸­æ¢å¤å‡ºJavaå¯¹è±¡ã€‚</p><p>å½“æˆ‘ä»¬æ˜æ™°äº†ä¸ºä»€ä¹ˆéœ€è¦Javaåºåˆ—åŒ–å’Œååºåˆ—åŒ–åï¼Œæˆ‘ä»¬å¾ˆè‡ªç„¶åœ°ä¼šæƒ³Javaåºåˆ—åŒ–çš„å¥½å¤„ã€‚<br>å…¶å¥½å¤„ä¸€æ˜¯å®ç°äº†æ•°æ®çš„æŒä¹…åŒ–ï¼Œé€šè¿‡åºåˆ—åŒ–å¯ä»¥æŠŠæ•°æ®æ°¸ä¹…åœ°ä¿å­˜åˆ°ç¡¬ç›˜ä¸Šï¼ˆé€šå¸¸å­˜æ”¾åœ¨æ–‡ä»¶é‡Œï¼‰ï¼ŒäºŒæ˜¯ï¼Œåˆ©ç”¨åºåˆ—åŒ–å®ç°è¿œç¨‹é€šä¿¡ï¼Œå³åœ¨ç½‘ç»œä¸Šä¼ é€å¯¹è±¡çš„å­—èŠ‚åºåˆ—ã€‚</p><p>æ€»çš„æ¥è¯´å¯ä»¥å½’ç»“ä¸ºä»¥ä¸‹å‡ ç‚¹ï¼š</p><p>ï¼ˆ1ï¼‰æ°¸ä¹…æ€§ä¿å­˜å¯¹è±¡ï¼Œä¿å­˜å¯¹è±¡çš„å­—èŠ‚åºåˆ—åˆ°æœ¬åœ°æ–‡ä»¶æˆ–è€…æ•°æ®åº“ä¸­ï¼›<br>ï¼ˆ2ï¼‰é€šè¿‡åºåˆ—åŒ–ä»¥å­—èŠ‚æµçš„å½¢å¼ä½¿å¯¹è±¡åœ¨ç½‘ç»œä¸­è¿›è¡Œä¼ é€’å’Œæ¥æ”¶ï¼›<br>ï¼ˆ3ï¼‰é€šè¿‡åºåˆ—åŒ–åœ¨è¿›ç¨‹é—´ä¼ é€’å¯¹è±¡ï¼›</p><h3 id="3-åºåˆ—åŒ–ç®—æ³•ä¸€èˆ¬ä¼šæŒ‰æ­¥éª¤åšå¦‚ä¸‹äº‹æƒ…ï¼š"><a href="#3-åºåˆ—åŒ–ç®—æ³•ä¸€èˆ¬ä¼šæŒ‰æ­¥éª¤åšå¦‚ä¸‹äº‹æƒ…ï¼š" class="headerlink" title="3.åºåˆ—åŒ–ç®—æ³•ä¸€èˆ¬ä¼šæŒ‰æ­¥éª¤åšå¦‚ä¸‹äº‹æƒ…ï¼š"></a>3.åºåˆ—åŒ–ç®—æ³•ä¸€èˆ¬ä¼šæŒ‰æ­¥éª¤åšå¦‚ä¸‹äº‹æƒ…ï¼š</h3><p>ï¼ˆ1ï¼‰å°†å¯¹è±¡å®ä¾‹ç›¸å…³çš„ç±»å…ƒæ•°æ®è¾“å‡ºã€‚<br>ï¼ˆ2ï¼‰é€’å½’åœ°è¾“å‡ºç±»çš„è¶…ç±»æè¿°ç›´åˆ°ä¸å†æœ‰è¶…ç±»ã€‚<br>ï¼ˆ3ï¼‰ç±»å…ƒæ•°æ®å®Œäº†ä»¥åï¼Œå¼€å§‹ä»æœ€é¡¶å±‚çš„è¶…ç±»å¼€å§‹è¾“å‡ºå¯¹è±¡å®ä¾‹çš„å®é™…æ•°æ®å€¼ã€‚<br>ï¼ˆ4ï¼‰ä»ä¸Šè‡³ä¸‹é€’å½’è¾“å‡ºå®ä¾‹çš„æ•°æ®</p><p>â€¦è¿™é‡Œæ˜¯Javaåºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„ä»£ç ç¤ºä¾‹â€¦.</p><p>æ³¨: æœ¬æ–‡æ‘˜è‡ª<a href="https://blog.csdn.net/xlgen157387/article/details/79840134" target="_blank" rel="noopener">https://blog.csdn.net/xlgen157387/article/details/79840134</a></p>]]></content>
      
      
      <categories>
          
          <category> django </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åºåˆ—åŒ– </tag>
            
            <tag> ååºåˆ—åŒ– </tag>
            
            <tag> ä¼ è¾“ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>djangoå¼€å‘ä¹‹ç±»è§†å›¾</title>
      <link href="/django/django_classView_decorator.html"/>
      <url>/django/django_classView_decorator.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>Djangoä¸­å¯ä»¥ä½¿ç”¨ç±»æ¥å®šä¹‰ä¸€ä¸ªè§†å›¾ã€‚ç§°ä¸ºç±»è§†å›¾</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.views.generic <span class="keyword">import</span> View</span><br><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</span><br><span class="line"><span class="keyword">from</span> django.views.generic <span class="keyword">import</span> View</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RegisterView</span><span class="params">(View)</span>:</span></span><br><span class="line">    <span class="string">"""ç±»è§†å›¾ï¼šå¤„ç†æ³¨å†Œ"""</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, request)</span>:</span></span><br><span class="line">        <span class="string">"""å¤„ç†GETè¯·æ±‚ï¼Œè¿”å›æ³¨å†Œé¡µé¢"""</span></span><br><span class="line">        <span class="keyword">return</span> render(request, <span class="string">'register.html'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span><span class="params">(self, request)</span>:</span></span><br><span class="line">        <span class="string">"""å¤„ç†POSTè¯·æ±‚ï¼Œå®ç°æ³¨å†Œé€»è¾‘"""</span></span><br><span class="line">        <span class="keyword">return</span> HttpResponse(<span class="string">'è¿™é‡Œå®ç°æ³¨å†Œé€»è¾‘'</span>)</span><br></pre></td></tr></table></figure><h2 id="ç±»è§†å›¾ä½¿ç”¨"><a href="#ç±»è§†å›¾ä½¿ç”¨" class="headerlink" title="ç±»è§†å›¾ä½¿ç”¨"></a>ç±»è§†å›¾ä½¿ç”¨</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯¼åŒ…</span></span><br><span class="line"><span class="keyword">from</span> django.views.generic <span class="keyword">import</span> View</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ³¨å†Œ</span></span><br><span class="line">urlpatterns = [</span><br><span class="line">    url(<span class="string">r'^register/$'</span>, views.RegisterView.as_view(), name=<span class="string">'register'</span>)]</span><br></pre></td></tr></table></figure><h2 id="ç±»è§†å›¾åŸç†"><a href="#ç±»è§†å›¾åŸç†" class="headerlink" title="ç±»è§†å›¾åŸç†"></a>ç±»è§†å›¾åŸç†</h2><figure class="highlight cos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç±»è§†å›¾æ˜¯ç»§æ‰¿äº†base.pyæ¨¡å—ä¸­é<span class="keyword">View</span>åŸºç±»ã€‚ä¸‹é¢æ˜¯æºç </span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">View</span><span class="params">(object)</span>:</span></span><br><span class="line">    ...çœç•¥</span><br><span class="line"></span><br><span class="line"><span class="meta">    @classonlymethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">as_view</span><span class="params">(cls, **initkwargs)</span>:</span>  <span class="comment"># å› ä¸ºæˆ‘ä»¬å®šä¹‰çš„ç±»è§†å›¾ï¼Œå°±æ˜¯ç»§æ‰¿Viewç±»ã€‚æ‰€æœ‰è¿™é‡Œclså°±æ˜¯æŒ‡ä»£æˆ‘ä»¬å®šä¹‰çš„ç±»å¯¹è±¡ã€‚</span></span><br><span class="line">        ...çœç•¥</span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">view</span><span class="params">(request, *args, **kwargs)</span>:</span></span><br><span class="line">            self = cls(**initkwargs)</span><br><span class="line">            <span class="keyword">if</span> hasattr(self, <span class="string">'get'</span>) <span class="keyword">and</span> <span class="keyword">not</span> hasattr(self, <span class="string">'head'</span>):</span><br><span class="line">                self.head = self.get</span><br><span class="line">            self.request = request</span><br><span class="line">            self.args = args</span><br><span class="line">            self.kwargs = kwargs</span><br><span class="line">            <span class="keyword">return</span> self.dispatch(request, *args, **kwargs)</span><br><span class="line">       ...çœç•¥</span><br><span class="line">        <span class="keyword">return</span> view  <span class="comment"># è¿”å›çœŸæ­£çš„è§†å›¾å‡½æ•°</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">dispatch</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        <span class="comment"># Try to dispatch to the right method; if a method doesn't exist,</span></span><br><span class="line">        <span class="comment"># defer to the error handler. Also defer to the error handler if the</span></span><br><span class="line">        <span class="comment"># request method isn't on the approved list.</span></span><br><span class="line">        <span class="keyword">if</span> request.method.lower() <span class="keyword">in</span> self.http_method_names:</span><br><span class="line">            handler = getattr(self, request.method.lower(), self.http_method_not_allowed)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            handler = self.http_method_not_allowed</span><br><span class="line">        <span class="keyword">return</span> handler(request, *args, **kwargs)</span><br><span class="line"></span><br><span class="line">    ...çœç•¥</span><br></pre></td></tr></table></figure><h2 id="ç±»è§†å›¾ä½¿ç”¨è£…é¥°å™¨"><a href="#ç±»è§†å›¾ä½¿ç”¨è£…é¥°å™¨" class="headerlink" title="ç±»è§†å›¾ä½¿ç”¨è£…é¥°å™¨"></a>ç±»è§†å›¾ä½¿ç”¨è£…é¥°å™¨</h2><h3 id="æ–¹æ³•ä¸€-ã€åœ¨urlé…ç½®ä¸­è£…é¥°ã€‘"><a href="#æ–¹æ³•ä¸€-ã€åœ¨urlé…ç½®ä¸­è£…é¥°ã€‘" class="headerlink" title="æ–¹æ³•ä¸€   ã€åœ¨urlé…ç½®ä¸­è£…é¥°ã€‘"></a>æ–¹æ³•ä¸€   ã€<strong>åœ¨urlé…ç½®ä¸­è£…é¥°</strong>ã€‘</h3><p>ï¼ˆç±»è§†å›¾ä¸‹æ‰€æœ‰è¯·æ±‚æ–¹æ³•éƒ½ä¼šè¢«è£…é¥°ã€å› ä¸ºæ˜¯åœ¨è§†å›¾å…¥å£å¤„ï¼Œåˆ†å‘è¯·æ±‚ä¹‹å‰ã€‘  ç¼ºç‚¹ï¼š å•çœ‹è§†å›¾æ— æ³•çŸ¥é“æ·»åŠ äº†è£…é¥°å™¨ï¼Œä¸åˆ©äºä»£ç çš„å®Œæ•´æ€§ã€‚ï¼‰</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¬¬ä¸€æ­¥å®šä¹‰ä¸€ä¸ªè£…é¥°å™¨</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_decorator</span><span class="params">(func)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span><span class="params">(request, *args, **kwargs)</span>:</span></span><br><span class="line">        <span class="comment"># è¿™é‡Œåšä¸€äº›é¢å¤–çš„äº‹æƒ…</span></span><br><span class="line">        print(<span class="string">"è‡ªå®šä¹‰è£…é¥°å™¨è¢«è°ƒç”¨äº†ã€‚ã€‚"</span>)</span><br><span class="line">        <span class="keyword">return</span> func(request, *args, **kwargs)</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¬¬äºŒæ­¥å®šä¸€ä¸ªç±»è§†å›¾</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DemoView</span><span class="params">(View)</span>:</span> <span class="comment"># ç»§æ‰¿è‡ªViewè¿™ä¸ªåŸºç±»</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, request)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> HttpResponse(<span class="string">"get...ok"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span><span class="params">(self, request)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> HttpResponse(<span class="string">"post...ok"</span>)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># ç¬¬ä¸‰æ­¥ï¼Œ åœ¨urlé…ç½®ä¸­è£…é¥°</span></span><br><span class="line">urlpatterns = [</span><br><span class="line">    url(<span class="string">r'^demo/$'</span>, my_decorate(DemoView.as_view()))</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h3 id="æ–¹æ³•äºŒ-ã€ç±»è§†å›¾ä¸­è£…é¥°ã€‘"><a href="#æ–¹æ³•äºŒ-ã€ç±»è§†å›¾ä¸­è£…é¥°ã€‘" class="headerlink" title="æ–¹æ³•äºŒ   ã€ç±»è§†å›¾ä¸­è£…é¥°ã€‘"></a>æ–¹æ³•äºŒ   ã€<strong>ç±»è§†å›¾ä¸­è£…é¥°</strong>ã€‘</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.utils.decorators <span class="keyword">import</span> method_decorator</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç±»è§†å›¾ä¸­è£…é¥°çš„ç¬¬ä¸€ç§</span></span><br><span class="line"><span class="comment"># ä¸ºå…¨éƒ¨è¯·æ±‚æ–¹æ³•æ·»åŠ è£…é¥°å™¨</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DemoView</span><span class="params">(View)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># methos_decorator()åšäº†ä»€ä¹ˆäº‹æƒ…ï¼Ÿå¤„ç†äº†self,å› ä¸ºç±»ä¸­ç¬¬ä¸€ä¸ªå˜é‡éƒ½æ˜¯self</span></span><br><span class="line">    <span class="comment"># æ‰€ä»¥è¿˜å¯ä»¥ç›´æ¥åœ¨è£…é¥°å™¨ä¸­ï¼Œå‚æ•°ç¬¬ä¸€ä¸ªä½ç½®æ·»åŠ self è€Œä¸ç”¨methos_decorator()</span></span><br><span class="line"><span class="meta">    @method_decorator(my_decorator)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">dispatch</span><span class="params">(self, *args, **kwargs)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> super().dispatch(*args, **kwargs)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, request)</span>:</span></span><br><span class="line">        print(<span class="string">'getæ–¹æ³•'</span>)</span><br><span class="line">        <span class="keyword">return</span> HttpResponse(<span class="string">'ok'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span><span class="params">(self, request)</span>:</span></span><br><span class="line">        print(<span class="string">'postæ–¹æ³•'</span>)</span><br><span class="line">        <span class="keyword">return</span> HttpResponse(<span class="string">'ok'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç±»è§†å›¾ä¸­è£…é¥°çš„ç¬¬äºŒç§</span></span><br><span class="line"><span class="comment"># ä¸ºç‰¹å®šè¯·æ±‚æ–¹æ³•æ·»åŠ è£…é¥°å™¨</span></span><br><span class="line"><span class="comment"># æ³¨æ„è¿™é‡Œå› ä¸ºç»™ç‰¹å®šæ–¹æ³•æ·»åŠ è£…é¥°å™¨ï¼Œæ‰€ä»¥ä¸éœ€è¦å¤å†™çˆ¶ç±»æ–¹æ³•ã€‚</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DemoView</span><span class="params">(View)</span>:</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @method_decorator(my_decorator)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, request)</span>:</span></span><br><span class="line">        print(<span class="string">'getæ–¹æ³•'</span>)</span><br><span class="line">        <span class="keyword">return</span> HttpResponse(<span class="string">'ok'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span><span class="params">(self, request)</span>:</span></span><br><span class="line">        print(<span class="string">'postæ–¹æ³•'</span>)</span><br><span class="line">        <span class="keyword">return</span> HttpResponse(<span class="string">'ok'</span>)</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="comment"># ç±»è§†å›¾ä¸­è£…é¥°çš„ç¬¬ä¸‰ç§</span></span><br><span class="line"><span class="comment"># ä¸ºå…¨éƒ¨è¯·æ±‚æ–¹æ³•æ·»åŠ è£…é¥°å™¨</span></span><br><span class="line"><span class="meta">@method_decorator(my_decorator, name='dispatch')</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DemoView</span><span class="params">(View)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, request)</span>:</span></span><br><span class="line">        print(<span class="string">'getæ–¹æ³•'</span>)</span><br><span class="line">        <span class="keyword">return</span> HttpResponse(<span class="string">'ok'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span><span class="params">(self, request)</span>:</span></span><br><span class="line">        print(<span class="string">'postæ–¹æ³•'</span>)</span><br><span class="line">        <span class="keyword">return</span> HttpResponse(<span class="string">'ok'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç±»è§†å›¾ä¸­è£…é¥°çš„ç¬¬å››ç§</span></span><br><span class="line"><span class="comment"># ä¸ºç‰¹å®šè¯·æ±‚æ–¹æ³•æ·»åŠ è£…é¥°å™¨</span></span><br><span class="line"><span class="meta">@method_decorator(my_decorator, name='get')</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DemoView</span><span class="params">(View)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, request)</span>:</span></span><br><span class="line">        print(<span class="string">'getæ–¹æ³•'</span>)</span><br><span class="line">        <span class="keyword">return</span> HttpResponse(<span class="string">'ok'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span><span class="params">(self, request)</span>:</span></span><br><span class="line">        print(<span class="string">'postæ–¹æ³•'</span>)</span><br><span class="line">        <span class="keyword">return</span> HttpResponse(<span class="string">'ok'</span>)</span><br></pre></td></tr></table></figure><blockquote><h4 id="ä¸ºä»€ä¹ˆéœ€è¦ä½¿ç”¨method-decorator-åœ¨ä¸Šé¢å·²ç»åšäº†è¯´æ˜ã€‚ä¸‹é¢ç”¨ä»£ç è¯¦ç»†é˜è¿°ä¸€ä¸‹ã€‚"><a href="#ä¸ºä»€ä¹ˆéœ€è¦ä½¿ç”¨method-decorator-åœ¨ä¸Šé¢å·²ç»åšäº†è¯´æ˜ã€‚ä¸‹é¢ç”¨ä»£ç è¯¦ç»†é˜è¿°ä¸€ä¸‹ã€‚" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦ä½¿ç”¨method_decorator? åœ¨ä¸Šé¢å·²ç»åšäº†è¯´æ˜ã€‚ä¸‹é¢ç”¨ä»£ç è¯¦ç»†é˜è¿°ä¸€ä¸‹ã€‚"></a>ä¸ºä»€ä¹ˆéœ€è¦ä½¿ç”¨method_decorator? åœ¨ä¸Šé¢å·²ç»åšäº†è¯´æ˜ã€‚ä¸‹é¢ç”¨ä»£ç è¯¦ç»†é˜è¿°ä¸€ä¸‹ã€‚</h4></blockquote><p>ä¸ºå‡½æ•°è§†å›¾å‡†å¤‡çš„è£…é¥°å™¨ï¼Œå…¶è¢«è°ƒç”¨æ—¶ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ç”¨äºæ¥æ”¶requestå¯¹è±¡</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_decorate</span><span class="params">(func)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span><span class="params">(request, *args, **kwargs)</span>:</span>  <span class="comment"># ç¬¬ä¸€ä¸ªå‚æ•°requestå¯¹è±¡</span></span><br><span class="line">        ...ä»£ç çœç•¥...</span><br><span class="line">        <span class="keyword">return</span> func(request, *args, **kwargs)</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br></pre></td></tr></table></figure><p>è€Œç±»è§†å›¾ä¸­è¯·æ±‚æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸æ˜¯requestå¯¹è±¡ï¼Œè€Œæ˜¯self è§†å›¾å¯¹è±¡æœ¬èº«ï¼Œç¬¬äºŒä¸ªä½ç½®å‚æ•°æ‰æ˜¯requestå¯¹è±¡</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DemoView</span><span class="params">(View)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">dispatch</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">        ...ä»£ç çœç•¥...</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, request)</span>:</span></span><br><span class="line">        ...ä»£ç çœç•¥...</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥å¦‚æœç›´æ¥å°†ç”¨äºå‡½æ•°è§†å›¾çš„è£…é¥°å™¨è£…é¥°ç±»è§†å›¾æ–¹æ³•ï¼Œä¼šå¯¼è‡´å‚æ•°ä¼ é€’å‡ºç°é—®é¢˜ã€‚</p><blockquote><p>method_decoratorçš„ä½œç”¨æ˜¯ä¸ºå‡½æ•°è§†å›¾è£…é¥°å™¨è¡¥å……ç¬¬ä¸€ä¸ªselfå‚æ•°ï¼Œä»¥é€‚é…ç±»è§†å›¾æ–¹æ³•ã€‚</p></blockquote><p>å¦‚æœå°†è£…é¥°å™¨æœ¬èº«æ”¹ä¸ºå¯ä»¥é€‚é…ç±»è§†å›¾æ–¹æ³•çš„ï¼Œç±»ä¼¼å¦‚ä¸‹ï¼Œåˆ™æ— éœ€å†ä½¿ç”¨method_decoratorã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_decorator</span><span class="params">(func)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span><span class="params">(self, request, *args, **kwargs)</span>:</span>  <span class="comment"># æ­¤å¤„å¢åŠ äº†self</span></span><br><span class="line">        print(<span class="string">'è‡ªå®šä¹‰è£…é¥°å™¨è¢«è°ƒç”¨äº†'</span>)</span><br><span class="line">        print(<span class="string">'è¯·æ±‚è·¯å¾„%s'</span> % request.path)</span><br><span class="line">        <span class="keyword">return</span> func(self, request, *args, **kwargs)  <span class="comment"># æ­¤å¤„å¢åŠ äº†self</span></span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br></pre></td></tr></table></figure><h3 id="æ–¹æ³•ä¸‰-æ„é€ Mixinæ‰©å±•ç±»"><a href="#æ–¹æ³•ä¸‰-æ„é€ Mixinæ‰©å±•ç±»" class="headerlink" title="æ–¹æ³•ä¸‰  æ„é€ Mixinæ‰©å±•ç±»"></a>æ–¹æ³•ä¸‰  æ„é€ Mixinæ‰©å±•ç±»</h3><p>ï¼ˆä½¿ç”¨é¢å‘å¯¹è±¡å¤šç»§æ‰¿çš„ç‰¹æ€§ï¼Œ å¯ä»¥ç»™å¤šä¸ªç±»ä½¿ç”¨è£…é¥°å™¨  æ‰€æœ‰è¯·æ±‚æ–¹æ³•å¦ä¼šæ·»åŠ è£…é¥°è¡Œä¸ºï¼‰</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ„é€ Mixinæ‰©å±•ç±» ä¸ç®¡æœ‰å‡ ä¸ªæ‰©å±•ç±»ï¼Œéƒ½è¦ç»§æ‰¿objectç±»</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyDecoratorMixin</span><span class="params">(object)</span>:</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># é‡å†™çˆ¶ç±»çš„as_view()æ–¹æ³•</span></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">as_view</span><span class="params">(cls, *args, **kwargs)</span>:</span></span><br><span class="line">        <span class="comment"># è°ƒç”¨çˆ¶ç±»çš„as_view()ç±»æ–¹æ³•</span></span><br><span class="line">        view = super().as_view(*args, **kwargs)</span><br><span class="line">        <span class="comment"># ä½¿ç”¨è£…é¥°å™¨é‡å†™çˆ¶ç±»çš„as_view()ç±»æ–¹æ³•</span></span><br><span class="line">        view = my_decorator(view)</span><br><span class="line">        <span class="keyword">return</span> view</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"><span class="comment"># å®šä¹‰ç±»è§†å›¾ï¼Œæ³¨æ„éœ€è¦ç»§æ‰¿Mixinæ‰©å±•ç±»</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DemoView</span><span class="params">(MyDecoratorMixin, View)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self, request)</span>:</span></span><br><span class="line">        print(<span class="string">'getæ–¹æ³•'</span>)</span><br><span class="line">        <span class="keyword">return</span> HttpResponse(<span class="string">'ok'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span><span class="params">(self, request)</span>:</span></span><br><span class="line">        print(<span class="string">'postæ–¹æ³•'</span>)</span><br><span class="line">        <span class="keyword">return</span> HttpResponse(<span class="string">'ok'</span>)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> django </category>
          
      </categories>
      
      
        <tags>
            
            <tag> django </tag>
            
            <tag> ç±»è§†å›¾ </tag>
            
            <tag> è£…é¥°å™¨ </tag>
            
            <tag> as_view </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>mkvirtualenvåˆ›å»ºè™šæ‹Ÿç¯å¢ƒæŠ¥é”™æ²¡æœ‰stevedoreæ¨¡å—è§£å†³æ–¹æ¡ˆ</title>
      <link href="/code/mkvirtualenv-stevedore-error.html"/>
      <url>/code/mkvirtualenv-stevedore-error.html</url>
      
        <content type="html"><![CDATA[<h3 id="äº‹å‘æœ‰å› "><a href="#äº‹å‘æœ‰å› " class="headerlink" title="äº‹å‘æœ‰å› "></a>äº‹å‘æœ‰å› </h3><p>ä¸€ç›´ä»¥æ¥æˆ‘éƒ½æ˜¯ä½¿ç”¨<code>virtualenv venv</code>æ¥åˆ›å»ºè™šæ‹Ÿç¯å¢ƒçš„.ç„¶åä½¿ç”¨<code>source venv/bin/activate</code>æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ. è™šæ‹Ÿç¯å¢ƒè¶Šæ¥è¶Šå¤š,äºæ˜¯å°è¯•ä½¿ç”¨<code>virtualenvwrapper</code>æ¥ç®¡ç†è™šæ‹Ÿç¯å¢ƒ.<code>pip install virtualenvwrapper</code> æ²¡æœ‰é—®é¢˜.ä½†æ˜¯ä½¿ç”¨<code>mkvirtualenv</code>åˆ›å»ºè™šæ‹Ÿç¯å¢ƒå‡ºç°å¦‚ä¸‹é”™è¯¯:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">JetmodeMacBook-Proâœ  ~  á…  mkvirtualenv dj -p python3</span><br><span class="line">Already using interpreter /Library/Frameworks/Python.framework/Versions/<span class="number">3.6</span>/bin/python3</span><br><span class="line">Using base prefix <span class="string">'/Library/Frameworks/Python.framework/Versions/3.6'</span></span><br><span class="line">New python executable <span class="keyword">in</span> /Users/jetmo/.virtualenvs/dj/bin/python3</span><br><span class="line">Also creating executable <span class="keyword">in</span> /Users/jetmo/.virtualenvs/dj/bin/python</span><br><span class="line">Installing setuptools, pip, wheel...done.</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"/usr/local/Cellar/python@2/2.7.15_1/Frameworks/Python.framework/Versions/2.7/lib/python2.7/runpy.py"</span>, line <span class="number">174</span>, <span class="keyword">in</span> _run_module_as_main</span><br><span class="line">    <span class="string">"__main__"</span>, fname, loader, pkg_name)</span><br><span class="line">  File <span class="string">"/usr/local/Cellar/python@2/2.7.15_1/Frameworks/Python.framework/Versions/2.7/lib/python2.7/runpy.py"</span>, line <span class="number">72</span>, <span class="keyword">in</span> _run_code</span><br><span class="line">    <span class="keyword">exec</span> code <span class="keyword">in</span> run_globals</span><br><span class="line">  File <span class="string">"/usr/local/lib/python2.7/site-packages/virtualenvwrapper-4.8.2-py2.7.egg/virtualenvwrapper/hook_loader.py"</span>, line <span class="number">16</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    <span class="keyword">from</span> stevedore <span class="keyword">import</span> ExtensionManager</span><br><span class="line">ImportError: No module named stevedore</span><br></pre></td></tr></table></figure><h3 id="debug"><a href="#debug" class="headerlink" title="debug"></a>debug</h3><p>åŸå› æ˜¯ç¼ºå°‘<code>stevedore</code>æ¨¡å—.ç›´æ¥å®‰è£…ä¼šç»§ç»­æŠ¥é”™,å¤šæ¬¡å°è¯•åæ‰¾åˆ°äº†è§£å†³åŠæ³•.</p><h3 id="æ–¹æ¡ˆ"><a href="#æ–¹æ¡ˆ" class="headerlink" title="æ–¹æ¡ˆ"></a>æ–¹æ¡ˆ</h3><p><strong>ä½¿ç”¨pip2å®‰è£…</strong>å¾ˆå¤šåŒå­¦åº”è¯¥éƒ½æ˜¯é»˜è®¤pip3ç‰ˆæœ¬,ä½†æ˜¯è¿™ä¸ªæ¨¡å—ä¸€å®šè¦ä½¿ç”¨pip2å®‰è£…(æˆ‘æ˜¯è¿™æ ·çš„). zshä¸­é”®å…¥pipåä¸¤æ¬¡tabé”®æ‰¾åˆ°é€‰æ‹©pip2<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo pip2 uninstall stevedore <span class="comment"># å…ˆå¸è½½</span></span><br><span class="line">sudo pip2 install stevedore <span class="comment"># å†å®‰è£…</span></span><br></pre></td></tr></table></figure></p><p>ç„¶åå†ä½¿ç”¨<code>mkvirtualenv django_py3 -p python3</code> å®‰è£…è™šæ‹Ÿç¯å¢ƒå°±ä¸ä¼šæŠ¥é”™äº†.</p><h3 id="å»¶ä¼¸-è™šæ‹Ÿç¯å¢ƒ"><a href="#å»¶ä¼¸-è™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="å»¶ä¼¸(è™šæ‹Ÿç¯å¢ƒ)"></a>å»¶ä¼¸(è™šæ‹Ÿç¯å¢ƒ)</h3><h4 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo pip3 install virtualenv</span><br><span class="line">sudo pip3 install virtualenvwrapper</span><br></pre></td></tr></table></figure><h4 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1ã€åˆ›å»ºç›®å½•ç”¨æ¥å­˜æ”¾è™šæ‹Ÿç¯å¢ƒ</span></span><br><span class="line">mkdir </span><br><span class="line"><span class="variable">$HOME</span>/.virtualenvs</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2ã€æ‰“å¼€~/.bashrcæ–‡ä»¶ï¼Œå¹¶æ·»åŠ å¦‚ä¸‹ï¼š</span></span><br><span class="line"><span class="built_in">export</span> WORKON_HOME=<span class="variable">$HOME</span>/.virtualenvs</span><br><span class="line"><span class="built_in">source</span> /usr/<span class="built_in">local</span>/bin/virtualenvwrapper.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3ã€è¿è¡Œ</span></span><br><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br></pre></td></tr></table></figure><h4 id="åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ"><a href="#åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ"></a>åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkvirtualenv -<span class="selector-tag">p</span> python3 è™šæ‹Ÿç¯å¢ƒåç§°</span><br></pre></td></tr></table></figure><h4 id="æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ"><a href="#æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ"></a>æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</h4><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">workon</span> è™šæ‹Ÿç¯å¢ƒåç§°</span><br></pre></td></tr></table></figure><h4 id="é€€å‡ºè™šæ‹Ÿç¯å¢ƒ"><a href="#é€€å‡ºè™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="é€€å‡ºè™šæ‹Ÿç¯å¢ƒ"></a>é€€å‡ºè™šæ‹Ÿç¯å¢ƒ</h4><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">deactivate</span></span><br></pre></td></tr></table></figure><h4 id="åˆ é™¤è™šæ‹Ÿç¯å¢ƒ"><a href="#åˆ é™¤è™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="åˆ é™¤è™šæ‹Ÿç¯å¢ƒ"></a>åˆ é™¤è™šæ‹Ÿç¯å¢ƒ</h4><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">rmvirtualenv</span> è™šæ‹Ÿç¯å¢ƒåç§°</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> stevedore </tag>
            
            <tag> virtualenv </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>æœ€ç®€å•çš„djangoç¨‹åº</title>
      <link href="/django/tiny-django-app.html"/>
      <url>/django/tiny-django-app.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ€ç®€å•çš„djangoç¨‹åº.åŒ…å«åˆ›å»ºå·¥ç¨‹,åˆ›å»ºä¸€ä¸ªapp,é…ç½®url,ç¼–è¾‘è§†å›¾å‡½æ•°, æ³¨å†Œapp</p></blockquote><h3 id="åˆ›å»ºå·¥ç¨‹"><a href="#åˆ›å»ºå·¥ç¨‹" class="headerlink" title="åˆ›å»ºå·¥ç¨‹"></a>åˆ›å»ºå·¥ç¨‹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">django-admin startproject django_demo</span><br><span class="line"><span class="built_in">cd</span> django_demo</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºapp"><a href="#åˆ›å»ºapp" class="headerlink" title="åˆ›å»ºapp"></a>åˆ›å»ºapp</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py startapp users</span><br></pre></td></tr></table></figure><h3 id="æ³¨å†Œapp"><a href="#æ³¨å†Œapp" class="headerlink" title="æ³¨å†Œapp"></a>æ³¨å†Œapp</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨settings.pyä¸­</span></span><br><span class="line">users.apps.UsersConfig</span><br></pre></td></tr></table></figure><h3 id="ç¼–è¾‘è§†å›¾å‡½æ•°"><a href="#ç¼–è¾‘è§†å›¾å‡½æ•°" class="headerlink" title="ç¼–è¾‘è§†å›¾å‡½æ•°"></a>ç¼–è¾‘è§†å›¾å‡½æ•°</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># appä¸­ viewsæ¨¡å—ä¸­</span></span><br><span class="line">from django.http import HttpResponse</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create your views here.</span></span><br><span class="line"></span><br><span class="line">def index(request):</span><br><span class="line">    <span class="string">""</span><span class="string">"</span></span><br><span class="line"><span class="string">    è§†å›¾å‡½æ•°</span></span><br><span class="line"><span class="string">    :param request: django é»˜è®¤çš„ç¬¬ä¸€ä¸ªå‚æ•°,ç”¨æˆ·æ¥æ”¶requestè¯·æ±‚</span></span><br><span class="line"><span class="string">    :return: å“åº”å¯¹è±¡</span></span><br><span class="line"><span class="string">    "</span><span class="string">""</span></span><br><span class="line">    <span class="built_in">return</span> HttpResponse(<span class="string">"è¿™æ˜¯ç”¨æˆ·ç•Œé¢"</span>)</span><br></pre></td></tr></table></figure><h3 id="æ·»åŠ è§†å›¾url"><a href="#æ·»åŠ è§†å›¾url" class="headerlink" title="æ·»åŠ è§†å›¾url"></a>æ·»åŠ è§†å›¾url</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># appä¸­åˆ›å»ºurlsæ¨¡å—</span></span><br><span class="line">from django.conf.urls import url</span><br><span class="line"></span><br><span class="line">from . import views</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    <span class="comment"># url(è·¯å¾„, è§†å›¾)</span></span><br><span class="line">    url(r<span class="string">'^index/$'</span>, views.index),</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h3 id="urlå‰ç¼€"><a href="#urlå‰ç¼€" class="headerlink" title="urlå‰ç¼€"></a>urlå‰ç¼€</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨å…¨å±€urlsä¸­é…ç½®app</span></span><br><span class="line">from django.conf.urls import url, include</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç±»æ¯”flaskä¸­è“å›¾å‰ç¼€</span></span><br><span class="line">urlpatterns = [</span><br><span class="line">    ...</span><br><span class="line">    url(r<span class="string">'^users/'</span>, include(<span class="string">'users.urls'</span>)),</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h3 id="å¯åŠ¨å·¥ç¨‹"><a href="#å¯åŠ¨å·¥ç¨‹" class="headerlink" title="å¯åŠ¨å·¥ç¨‹"></a>å¯åŠ¨å·¥ç¨‹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py runserver</span><br></pre></td></tr></table></figure><h3 id="è®¿é—®"><a href="#è®¿é—®" class="headerlink" title="è®¿é—®"></a>è®¿é—®</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1:8000/users/index</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> django </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> django </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>centosä¸‹å¯åŠ¨flaskç¨‹åº</title>
      <link href="/flask/centos-start-flask.html"/>
      <url>/flask/centos-start-flask.html</url>
      
        <content type="html"><![CDATA[<h4 id="centosç³»ç»Ÿä¸‹å®‰è£…ngnix-è´Ÿè´£è½¬å‘"><a href="#centosç³»ç»Ÿä¸‹å®‰è£…ngnix-è´Ÿè´£è½¬å‘" class="headerlink" title="centosç³»ç»Ÿä¸‹å®‰è£…ngnix(è´Ÿè´£è½¬å‘)"></a>centosç³»ç»Ÿä¸‹å®‰è£…ngnix(è´Ÿè´£è½¬å‘)</h4><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum <span class="keyword">install</span> ngnix</span><br></pre></td></tr></table></figure><h4 id="é…ç½®ngnix"><a href="#é…ç½®ngnix" class="headerlink" title="é…ç½®ngnix"></a>é…ç½®ngnix</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">é…ç½®æ–‡ä»¶è·¯å¾„: <span class="regexp">/etc/</span>nginx<span class="regexp">/nginx.conf</span></span><br></pre></td></tr></table></figure><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¦‚æœæ˜¯å¤šå°æœåŠ¡å™¨çš„è¯ï¼Œåˆ™åœ¨æ­¤é…ç½®ï¼Œå¹¶ä¿®æ”¹ location èŠ‚ç‚¹ä¸‹é¢çš„ proxy_pass </span></span><br><span class="line"><span class="attribute">upstream</span> flask &#123;</span><br><span class="line">        <span class="attribute">server</span> <span class="number">127.0.0.1:5000</span>;</span><br><span class="line">        <span class="attribute">server</span> <span class="number">127.0.0.1:5001</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">        <span class="comment"># ç›‘å¬80ç«¯å£</span></span><br><span class="line">        <span class="attribute">listen</span> <span class="number">80</span> default_server;</span><br><span class="line">        <span class="attribute">listen</span> [::]:<span class="number">80</span> default_server;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">root</span> /var/www/html;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">index</span> index.html index.htm index.nginx-debian.html;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">server_name</span> _;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">location</span> / &#123;</span><br><span class="line">                <span class="comment"># è¯·æ±‚è½¬å‘åˆ°gunicornæœåŠ¡å™¨</span></span><br><span class="line">                <span class="attribute">proxy_pass</span> http://127.0.0.1:5000;</span><br><span class="line">                <span class="comment"># è¯·æ±‚è½¬å‘åˆ°å¤šä¸ªgunicornæœåŠ¡å™¨</span></span><br><span class="line">                <span class="comment"># proxy_pass http://flask;</span></span><br><span class="line">                <span class="comment"># è®¾ç½®è¯·æ±‚å¤´ï¼Œå¹¶å°†å¤´ä¿¡æ¯ä¼ é€’ç»™æœåŠ¡å™¨ç«¯ </span></span><br><span class="line">                <span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</span><br><span class="line">                <span class="comment"># è®¾ç½®è¯·æ±‚å¤´ï¼Œä¼ é€’åŸå§‹è¯·æ±‚ipç»™ gunicorn æœåŠ¡å™¨</span></span><br><span class="line">                <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li><p>å¯åŠ¨ngnixæœåŠ¡å™¨</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -c <span class="regexp">/etc/</span>nginx<span class="regexp">/nginx.conf</span></span><br></pre></td></tr></table></figure></li><li><p>pythonè™šæ‹Ÿç¯å¢ƒä¸­å®‰è£… Gunicorn(wsgiåè®®çš„æœåŠ¡å™¨)</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip <span class="keyword">install</span> Gunicorn</span><br></pre></td></tr></table></figure></li><li><p>å¯åŠ¨Gunicorn</p></li></ol><ul><li>è¿›å…¥flaskç¨‹åºçš„å¯åŠ¨æ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹.æ¯”å¦‚æˆ‘çš„å¯åŠ¨æ–‡ä»¶æ˜¯manage.py<br>é‚£ä¹ˆè¿è¡Œå‘½ä»¤å°±æ˜¯:<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">gunicorn</span> <span class="selector-tag">-w</span> 2 <span class="selector-tag">-b</span> 127<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.1</span><span class="selector-pseudo">:5000</span> <span class="selector-tag">manage</span><span class="selector-pseudo">:app</span> <span class="selector-tag">-D</span> <span class="selector-tag">--reload</span></span><br></pre></td></tr></table></figure></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å‚æ•°å«ä¹‰: -Dè¡¨ç¤ºåå°è¿è¡Œ. --reloadè¡¨ç¤ºé‡å¯Gunicorn.å·²ç»è¿è¡Œçš„ä¼šé‡æ–°å¯åŠ¨ä¸å¿…è¦å»<span class="built_in">kill</span>è¿›ç¨‹.</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> flask </category>
          
      </categories>
      
      
        <tags>
            
            <tag> flask </tag>
            
            <tag> ngnix </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>å…³äºcentosæ“ä½œç³»ç»Ÿå®‰è£…mysqlclientå¤±è´¥çš„è§£å†³æ–¹æ¡ˆ</title>
      <link href="/flask/mysqlclientpython.html"/>
      <url>/flask/mysqlclientpython.html</url>
      
        <content type="html"><![CDATA[<h4 id="ä½¿ç”¨CentOSåŸºæœ¬æºå®‰è£…Python2é“¾æ¥åº“"><a href="#ä½¿ç”¨CentOSåŸºæœ¬æºå®‰è£…Python2é“¾æ¥åº“" class="headerlink" title="ä½¿ç”¨CentOSåŸºæœ¬æºå®‰è£…Python2é“¾æ¥åº“"></a>ä½¿ç”¨CentOSåŸºæœ¬æºå®‰è£…Python2é“¾æ¥åº“</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install python-devel</span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨CentOS-EPELæºå®‰è£…Python3å¯¹åº”ç‰ˆæœ¬çš„é“¾æ¥åº“åŒ…"><a href="#ä½¿ç”¨CentOS-EPELæºå®‰è£…Python3å¯¹åº”ç‰ˆæœ¬çš„é“¾æ¥åº“åŒ…" class="headerlink" title="ä½¿ç”¨CentOS EPELæºå®‰è£…Python3å¯¹åº”ç‰ˆæœ¬çš„é“¾æ¥åº“åŒ…"></a>ä½¿ç”¨CentOS EPELæºå®‰è£…Python3å¯¹åº”ç‰ˆæœ¬çš„é“¾æ¥åº“åŒ…</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install python34-devel</span><br></pre></td></tr></table></figure><p>ç°åœ¨å†å®‰è£…<code>mysqlclient</code>å°±ä¸ä¼šå‡ºç°<code>ç¼–è¯‘ä¸­æ–­ã€‚</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">error: <span class="built_in">command</span> <span class="string">'gcc'</span> failed with <span class="built_in">exit</span> status 1</span><br></pre></td></tr></table></figure><p>è¿™æ ·çš„é”™è¯¯äº†. å®‰è£…:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install mysqlclient</span><br></pre></td></tr></table></figure><h4 id="åç»­å†å®‰è£…Flask-MySQLdb-ä¹Ÿä¸ä¼šæŠ¥é”™å•¦"><a href="#åç»­å†å®‰è£…Flask-MySQLdb-ä¹Ÿä¸ä¼šæŠ¥é”™å•¦" class="headerlink" title="åç»­å†å®‰è£…Flask-MySQLdb ä¹Ÿä¸ä¼šæŠ¥é”™å•¦."></a>åç»­å†å®‰è£…<code>Flask-MySQLdb</code> ä¹Ÿä¸ä¼šæŠ¥é”™å•¦.</h4><p>å®‰è£…:    </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install flask-mysqldb</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> flask </category>
          
      </categories>
      
      
        <tags>
            
            <tag> flask </tag>
            
            <tag> mysqlclient </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>å…³äºcentosæ“ä½œç³»ç»Ÿå®‰è£…MySQL-pythonå¤±è´¥çš„è§£å†³æ–¹æ¡ˆ</title>
      <link href="/flask/centos-have-no-mysql.html"/>
      <url>/flask/centos-have-no-mysql.html</url>
      
        <content type="html"><![CDATA[<p>flaskè¿ç§»æ•°æ®åº“çš„æ—¶å€™ä¼šå‡ºç°.æ‰¾ä¸åˆ°mysqldbæ¨¡å—è¿™æ ·çš„æƒ…å†µ.åœ¨centosç³»ç»Ÿä¸Šæ–¹æ¡ˆä¸€å°±å¯ä»¥æœ‰æ•ˆè§£å†³.ä½†æ˜¯åœ¨ubuntu 16.04ä¸Šæ¨èä¼˜å…ˆä½¿ç”¨æ–¹æ¡ˆäºŒ.</p><h2 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h2><pre><code>MySQLdbä¸æ”¯æŒpython3.x</code></pre><h2 id="æ–¹æ¡ˆä¸€"><a href="#æ–¹æ¡ˆä¸€" class="headerlink" title="æ–¹æ¡ˆä¸€"></a>æ–¹æ¡ˆä¸€</h2><p>centos ä½¿ç”¨yum æ˜¯æ‰¾ä¸åˆ°YSQL-pythonè¿™ä¸ªåŒ…çš„.æ‰€ä»¥éœ€è¦ä¸‹è½½å®‰è£…åŒ…æ‰§è¡Œå®‰è£….</p><p>å®‰è£…å®Œä¾èµ–åŒ…åï¼Œå¼€å§‹å®‰è£…MYSQL-pythonï¼š</p><p>1ã€ä¸‹è½½taråŒ…ï¼š</p><p>æ‰§è¡Œï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https:<span class="regexp">//</span>pypi.python.org<span class="regexp">/packages/</span>c8<span class="regexp">/8f/</span>aedf47a2e973a2d2f225ac98537472fc928ad61b9647fb370870404c594b<span class="regexp">/MySQL-python-1.2.3c1.tar.gz#md5=310dd856e439d070b59ece6dd7a0734d</span></span><br></pre></td></tr></table></figure><p>å®Œæˆtarä¸‹è½½</p><p>2ã€è§£å‹æ‰§è¡Œï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">tar</span> <span class="selector-tag">-xzvf</span>  <span class="selector-tag">MySQL-python-1</span><span class="selector-class">.2</span><span class="selector-class">.3c1</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span></span><br></pre></td></tr></table></figure><p>è¿›å…¥è§£å‹ä¹‹åçš„æ–‡ä»¶å¤¹æ ¹ç›®å½•</p><p>3ã€ç¼–è¯‘(ç”¨python2 å¦‚æœåœ¨python3è™šæ‹Ÿç¯å¢ƒè¯·é€€å‡ºè™šæ‹Ÿç¯å¢ƒ)</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python setup<span class="selector-class">.py</span> build</span><br></pre></td></tr></table></figure><p>4ã€å®‰è£…(ç”¨python2 å¦‚æœåœ¨python3è™šæ‹Ÿç¯å¢ƒè¯·é€€å‡ºè™šæ‹Ÿç¯å¢ƒ)</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python setup<span class="selector-class">.py</span> install</span><br></pre></td></tr></table></figure><p>ç»è¿‡ä¸Šè¿°æ­¥éª¤å°±å®Œæˆäº†MySQL-python</p><h2 id="æ–¹æ¡ˆäºŒ"><a href="#æ–¹æ¡ˆäºŒ" class="headerlink" title="æ–¹æ¡ˆäºŒ"></a>æ–¹æ¡ˆäºŒ</h2><p>å¦‚æœè¿˜æ˜¯ä¸èƒ½è§£å†³é—®é¢˜å¯ä»¥å°è¯•:ç”¨pymysqlæ¥ä»£æ›¿MySQLdb<br>å…·ä½“ä½ç½®:<code>__init.py__</code>,<code>manage.py</code><br><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"><span class="title">pymysql</span>.install_as_MySQLdb()</span><br></pre></td></tr></table></figure></p>]]></content>
      
      
      <categories>
          
          <category> flask </category>
          
      </categories>
      
      
        <tags>
            
            <tag> centos </tag>
            
            <tag> MYSQL-python </tag>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Hello World</title>
      <link href="/code/hello-world.html"/>
      <url>/code/hello-world.html</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>gitåŸºæœ¬å‘½ä»¤</title>
      <link href="/code/git.html"/>
      <url>/code/git.html</url>
      
        <content type="html"><![CDATA[<ul><li>git init åˆå§‹åŒ–git,å½“å‰æ–‡ä»¶å¤¹ä½¿ç”¨gitç®¡ç†</li><li>git add . æ·»åŠ åˆ°æš‚å­˜åŒº</li><li>git commit -m â€œä¿®æ”¹æ˜ç»†â€  æäº¤åˆ°æœ¬åœ°ä»“åº“</li><li>git status æŸ¥çœ‹çŠ¶æ€</li><li>git push æ¨é€åˆ°è¿œç¨‹æœåŠ¡å™¨</li><li>git pull ä»è¿œç¨‹æœåŠ¡å™¨æ‹‰å–ä»£ç </li></ul><hr><ul><li>git log / reflog æŸ¥çœ‹æ—¥è®°</li><li>git reset HEAD^  å›é€€åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬æˆ–è€…æŒ‡å®šç‰ˆæœ¬</li><li>git reset â€“hard 589e122 å›é€€åˆ°æŒ‡å®šç‰ˆæœ¬</li><li>git diff  å¯¹æ¯”</li><li>git rm åˆ é™¤</li><li>git checkout æ£€æŸ¥</li></ul><hr><blockquote><p>æ ‡ç­¾</p></blockquote><ul><li>git tag -a v1.0 -m â€œversion 1.0â€ ç»™é¡¹ç›®æ‰“æ ‡ç­¾</li><li>git push origin v1.0  pushåˆ°è¿œç¨‹æœåŠ¡å™¨</li></ul><hr><ul><li>git brach æŸ¥çœ‹å½“å‰åˆ†æ”¯</li><li>git checkout -b dev  åˆ›å»ºdev åˆ†æ”¯</li><li>git push -u origin dev æŠŠå½“å‰åˆ†æ”¯åŒæ­¥åˆ°æœåŠ¡å™¨</li><li>git checkout master  åˆ‡æ¢åˆ†æ”¯</li><li>git merge dev åˆå¹¶åˆ†æ”¯</li></ul>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
            <tag> github </tag>
            
        </tags>
      
    </entry>
    
  
  
</search>
